<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>life-story</title>
    <link href="/2025/07/06/life-story/"/>
    <url>/2025/07/06/life-story/</url>
    
    <content type="html"><![CDATA[<p>许久未更新了，我一直记得这个博客。开学找到了女朋友，这学期过得蛮充实。学业压力其实也挺大的，多跨选了几门统计学院的专业课，期末的时候一边写 matlab 一遍赶课程论文，过得非常忙碌。</p><h2 id="学业">学业</h2><p>我目前所在的经济学拔尖班专业对学生科研的需求可谓赶鸭子上架，或者说拔苗助长，要求学生在什么也没学的时候就能写论文，发论文。写什么论文呢？</p><p>是排列组合式的实证分析。读者可能不知道实证分析是什么东西，其实就是排列组合式的用一堆解释变量对被解释变量进行回归。写成公式就是这个样子：</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>Y</mi><mo>=</mo><mi>β</mi><mo>+</mo><msub><mi>α</mi><mn>1</mn></msub><msub><mi>X</mi><mn>1</mn></msub><mo>+</mo><msub><mi>α</mi><mn>2</mn></msub><msub><mi>X</mi><mn>2</mn></msub><mo>+</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi></mrow><annotation encoding="application/x-tex">Y = \beta + \alpha_1 X_1 + \alpha_2 X_2+...</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05278em;">β</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.0037em;">α</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0037em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.0037em;">α</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0037em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.1056em;"></span><span class="mord">...</span></span></span></span></span></p><p>有人说，你们好厉害，大二就开始搞科研训练，学写论文。其实这压根算不上什么科研，这产生的研究结果有价值和创新吗？我看可能是有一点，但估计也不多了。这种研究的典型范式是研究一种政策对谁谁谁的影响，比如说：《人工智能技术会促进代际收入流动吗？——基于CFPS数据库的经验证据》。这种研究不用看内容就可以凭借经验知道这个促进效果肯定是正向的。然后很多人都在批量生产这一类东西。（这里还有很多想喷的点，但是我目前还得在这上面继续做，以后慢慢喷）</p><p>其实这也蛮好笑的，这种论文需要先学计量经济学的知识，但是前两年的课表压根就没有计量经济学这个东西。但是学院好像觉得我们可以自学，于是在我们的一节只上三节课就考试的课里，在期末考试给我们准备了计量经济学的知识内容。那结果肯定是完蛋，啥也没学就让我们乱写。其实说来也蛮有意思的，毕竟从小到大的考试毕竟是先让你学了再考，而这个呢，直接开考，反正我是没有这个能力。</p><h2 id="暑假">暑假</h2><p>暑假要做一个家庭金融调查，需要去实地访问，我其实还蛮喜欢到处走走。虽然这个项目非常牛马，待遇也不咋高，但还是能够有机会带队去不同的地方走走看看，或许会是很趣的经历吧</p>]]></content>
    
    
    
    <tags>
      
      <tag>life_record</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>用Python GeoPandas绘制地理信息</title>
    <link href="/2024/12/20/pygis/"/>
    <url>/2024/12/20/pygis/</url>
    
    <content type="html"><![CDATA[<h1>挖个坑先，后续寒假补</h1>]]></content>
    
    
    
    <tags>
      
      <tag>code_learning</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>EverywhereWeGo</title>
    <link href="/2024/12/06/EverywhereWeGo/"/>
    <url>/2024/12/06/EverywhereWeGo/</url>
    
    <content type="html"><![CDATA[<p>冒个泡</p><p>学期开始的时候打算跟着CS61B好好过一下数据结构与算法，顺便熟悉一下Java，但是在目前看来，学习Java对目前的学习与比赛没有直接的作用，倒是数据结构的部分让我受益匪浅。</p><p>以前一直喜欢琢磨一些算法的实现，没有尝试过开发一些应用，经常看着项目的文档就睡着了，后来了解到Cursor的威力，慢慢感觉，工程能力可以让AI代替，作为人类，只需要指挥AI实现心中的构想就可以了。这样的情况下，确保逻辑清楚就能写出很好的App了。记得才开始学习编程的时候，我倒是非常羡慕那些能够写出炫酷界面的人，后来才发现，要这样的话，可以直接学习JavaScript➕网页开发，这样快速入门，会收到足够的正向反馈。这也是为什国外往往推荐JavaScript作为入门的原因。</p><p>在寒冷的冬日，能有空闲的时间，听着音乐读一点书是一种难得的幸福。这学期是越来越忙了，人菜瘾大选了门难度很大的优化理论，选的时候以为是线性规划和运筹学这些比较简单的内容，不成想是类似于泛函分析的凸分析，虽然多了一点几何上的直观，但是对我来说难度依旧很大，不过上着课确实感觉大脑充实不少，或许有点用呢。如果时间足够充裕，会写一点这方面的内容。</p><p>不过作为一个经济学专业的学生，天天搞着coding难免有些不务正业。迷茫的时候，好奇金融市场到底是怎么一回事，于是有空去听了一个08级金融专业的学姐的讲座，不得不说在金融业工作的人的表达能力，清晰流畅，比那在学院教着课的老教授强不少。听着学姐的分享，让我感慨最深的还是足够清晰明确的路线，从西财毕业，再到LSE读硕士，最后在美国巴鲁克商学院读MBA，赶上了金融市场繁荣的大好时机。不过演讲虽然精彩，但是对现在的意义不大。当时在现场有一位即将毕业的硕士同学提问，他们班60多人，只有十多个人找到了去处，剩下的全部处于待业状态。我觉得那位学姐无法对这个问题给出满意的答案，如果硕士的就业都那么艰难，那么为了就业而选择继续读书的意义是什么？不过有几句话我觉得很有道理，用真诚和努力对待世界，世界也会用相同的方式对待你。毕竟在世界上还是好的人占大多数，大部分人还是愿意提供帮助的。让我印象最深的是她写下的这句话&quot;You have all you need to lead a wildly successful and meaningful life.&quot;</p><p>在学校的社团参加的也不多，大一的时候参加了一个羽毛球社团，想着免费的场地和球。后来逐渐变懒，球也不打了，但是代码会写一点，就加了一个数据科学社团，可惜这个社团是百废待兴，成员都寥寥无几，于是一进去就是部长了。想着以前学编程的经历，或许可以能给社团成员给出一点学习编程路上的指导。本人打算就用Kaggle上的入门系列的Jupyter笔记本，适当翻译一下，就是非常好的教材了，至少比学校的教程强。接下来会写一点教学方面的内容，感觉很有意思。不过感觉学校的课程都没几个听，我准备的课也不会有几个人来，不过希望还是来的人多一点吧。</p>]]></content>
    
    
    
    <tags>
      
      <tag>life_record</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>2024CumcmA题</title>
    <link href="/2024/09/09/2024A/"/>
    <url>/2024/09/09/2024A/</url>
    
    <content type="html"><![CDATA[<h2 id="初次尝试">初次尝试</h2><p>今年参加数模国赛，选了A题，A题原题目是这样的：</p><blockquote><p>“板凳龙”，又称“盘龙”，是浙闽地区的传统地方民俗文化活动。人们将少则几十条， 多则上百条的板凳首尾相连，形成蜿蜒曲折的板凳龙。盘龙时，龙头在前领头，龙身和龙尾 相随盘旋，整体呈圆盘状。一般来说，在舞龙队能够自如地盘入和盘出的前提下，盘龙所需 要的面积越小、行进速度越快，则观赏性越好。</p></blockquote><p>题目是几何分析类型的题，对编程能力要求很高。为了找到每个时刻整条龙的位置和速度，需要分两步求解问题，一是找到每个时刻龙头的位置，二是找到龙身各个节点的位置。这里只需要利用螺身运动的阿基米德螺旋曲线的极坐标方程即可，即：</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>ρ</mi><mo>=</mo><mfrac><mn>55</mn><mrow><mn>2</mn><mi>π</mi></mrow></mfrac><mi>θ</mi></mrow><annotation encoding="application/x-tex">\rho = \frac{55}{2\pi}\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">ρ</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.0074em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.03588em;">π</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">55</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span></span></span></span></span></p><p>代码容易实现，略去，得到在413s时整条龙的位置图：</p><p><img src="1.png"></p><h2 id="遗憾">遗憾</h2><p>求解速度很简单，使用微元法，通过计算在微小时间增量<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>δ</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">\delta {t}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span><span class="mord"><span class="mord mathnormal">t</span></span></span></span></span>下发生的<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>δ</mi><mi>x</mi></mrow><annotation encoding="application/x-tex">\delta {x}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span><span class="mord"><span class="mord mathnormal">x</span></span></span></span></span>确定速度。但是在做这道题的时候，写程序求解速度发生了偏差，并且这样的偏差是致命的，得到的速度与正确答案大相径庭。</p><p>程序的主要逻辑是没有问题的，问题出在求解设置的<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>δ</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">\delta t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span><span class="mord mathnormal">t</span></span></span></span>与求解位置而设置的角度步长 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>δ</mi><mi>θ</mi></mrow><annotation encoding="application/x-tex">\delta \theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span></span></span></span>.因为这里的模拟存在系统误差.</p><p>算法的逻辑是根据当前节点的<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>θ</mi></mrow><annotation encoding="application/x-tex">\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span></span></span></span>值，按照设置的<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>δ</mi><mi>θ</mi></mrow><annotation encoding="application/x-tex">\delta \theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span></span></span></span>限制尝试逐步增大下一个搜索的节点<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>θ</mi></mrow><annotation encoding="application/x-tex">\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span></span></span></span>值，如果所搜索的节点满足距离条件，那么就找到了目标节点，并从当前节点开始，继续搜索下一个节点…</p><p>计算机在模拟时，是严格遵循初始设置的<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>δ</mi><mi>θ</mi></mrow><annotation encoding="application/x-tex">\delta\theta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span><span class="mord mathnormal" style="margin-right:0.02778em;">θ</span></span></span></span>进行角度的增加，但是这样的话，角度值就是离散的一串值，做不到在数学意义上的连续，那么必定会有节点超出距离限制一点点，单个节点这点误差自然可以忽略不计，但是当有很多个节点时，最后的一个节点必定会积累之前所产生的全部误差。</p><p>当然，由于本题的节点比较少，位置的模拟是正确的，问题出在速度的模拟上，求解速度的部分代码：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_speed</span>(<span class="hljs-params">t0,time</span>):<br>    <span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">    输入初始角度和运动时间time</span><br><span class="hljs-string">    确定时间微元dt为1e-7</span><br><span class="hljs-string">    &#x27;&#x27;&#x27;</span><br>    dt = <span class="hljs-number">1e-7</span><br>    current_arc = time*<span class="hljs-number">200</span> <span class="hljs-comment">#当前头部的弧长</span><br>    updated_arc = (time+dt)*<span class="hljs-number">200</span> <span class="hljs-comment">#dt时间内头部加上走过的弧长</span><br>    <br>    <span class="hljs-keyword">return</span> ...<br></code></pre></td></tr></table></figure><p>当角度步长比较大时，空间的网格就会比较粗糙。这里就产生了一个反常的现象，用于模拟速度的<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>δ</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">\delta t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span><span class="mord mathnormal">t</span></span></span></span>并不是越小越好，当</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>s</mi><mo>=</mo><mi>v</mi><mi>δ</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">s = v\delta t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span><span class="mord mathnormal">t</span></span></span></span></span></p><p>即微小位移小于空间网格时，所得到的速度就会有较大的偏差。</p><h2 id="参赛体验">参赛体验</h2><p>还有很多的遗憾暂且不表。但这次比赛的体验还是不错的，没有过分熬夜，讨论的氛围良好，总体的完成度还不错。</p><p>这道题给我最大的感受是，用的数学知识并不多，往往只需要初高中水平的数学就能够完成模型的搭建。这道题对编程能力的要求比数学高多了，建议将全国大学生数学建模竞赛改成全国大学生编程技能竞赛（误）。</p><p>想起高中时总在考完试才知道自己的错漏，当找到了这微小的误差，窗玻璃上溅满了夏末的雨滴。</p><h2 id="9-23">9.23</h2><p>刷到一篇关于四川数模阅卷的回答，如果前三问答案都正确，评阅人会认为模型是正确的，有可能被推送至答辩。可惜这个错误使得整篇论文中凡是有关于速度计算的部分都是错的，在前三问中，几乎每一小问都要求计算速度，这就导致阅卷人认为我们的模型有误。至此，国奖是泡汤了。不得不说，一次参赛，是否受益终生不好说，一次教训够我记一阵子了。</p>]]></content>
    
    
    
    <tags>
      
      <tag>究竟有多少遗憾</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>优雅地选取jupyter内核</title>
    <link href="/2024/09/03/kernelchoice/"/>
    <url>/2024/09/03/kernelchoice/</url>
    
    <content type="html"><![CDATA[<p>vscode里的jupyter notebook我用着很满意，但是有一个小问题。</p><p>我安装了多个python环境还有一个julia的解释器，每次打开一个笔记本文件，总是会让我指定一个内核运行：</p><p><img src="1.png"></p>这种情况当然敲一个键就完事了，但是次数多了难免会让人厌倦。于是我在网上找了一圈，找到了官方给出的[解决方案](https://github.com/microsoft/vscode/issues/130946#issuecomment-1899389049)<blockquote><h1>Solutions</h1><h1>1. Hide all of the Python environments except the one you need</h1><ul><li>If you have n python environments and you only use one, then hide all of the others.</li><li>If you have just Jupyter and Python extension, then the remaining Python env will be automatically selected (however if you have other remote jupyter kernels, or other extensions that contribute kernels, then this will not get selected automatically). Please see solution 2.</li><li>Open a Jupyter ntoebook (to ensure the Jupyter extension gets activated)</li><li>Open your settings.json file</li><li>Add the setting <code>&quot;jupyter.kernels.excludePythonEnvironments&quot;: [...]</code> and add the environments you wish to hide.</li></ul><p>See here <a href="https://github.com/microsoft/vscode-jupyter/discussions/13032#discussioncomment-8049433">microsoft/vscode-jupyter#13032 (comment)</a></p><h1>2. Install the extension <code>Default Python Kernels for Jupyter Notebooks</code></h1><ul><li>Currently this only works in the latest Insiders Version of VS Code (will be supported in the next release of VS Code and Jupyter extension)</li><li><a href="https://code.visualstudio.com/insiders/">Install VS Code insiders</a></li><li>Install latest pre-release version of Jupyter Extension (a change in Jupyter extension is required to make this possible)</li><li>Install the above extension <a href="https://marketplace.visualstudio.com/items?itemName=donjayamanne.vscode-default-python-kernel">https://marketplace.visualstudio.com/items?itemName=donjayamanne.vscode-default-python-kernel</a></li></ul><p>From here on, all notebooks opened will have the <code>active Python environment</code> selected as the kernel.<br>You can change the <code>Active Python Environment</code> for your workspace/globally using the command <code>Python: Select Interpreter</code></p><p>You can find more information on the read me of the above extension.</p></blockquote><p>第一种方案是排除其他的内核选择，但是其他的内核还要用，这种方案就不能用，第二种是安装一个插件就好了。</p><p><img src="2.png"></p><p>插件会自动选择当前活跃的内核，避免了多次选取的麻烦，问题圆满解决。</p>]]></content>
    
    
    
    <tags>
      
      <tag>tools</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>TSP问题的优化求解</title>
    <link href="/2024/08/31/opttsp/"/>
    <url>/2024/08/31/opttsp/</url>
    
    <content type="html"><![CDATA[<h2 id="TSP旅行商问题">TSP旅行商问题</h2><h3 id="1-原题">1.原题</h3><p>现有一名外国游客从广州入境，他想<strong>在144小时以内游玩尽可能多的城市</strong>，同时要求综合游玩体验最好，请你规划他的游玩路线。需要结合游客的要求给出具体的游玩路线，包括总花费时间，门票和交通的总费用以及可以游玩的景点数量。他的要求有： <strong>（不考虑money）</strong>。</p><p>为便于测试，这里简化题目：现在有一名游客想在144小时内尽可能多游玩一些城市，给出去往每个城市的时间花费矩阵，进行优化求解得到路线图。</p><h3 id="2-模型">2.模型</h3><p>优化的目标在除了起点之外的49个城市中找到</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>M</mi><mi>a</mi><mi>x</mi><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></munderover><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></munderover><msub><mi>x</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub></mrow><annotation encoding="application/x-tex"> Max\sum_{i=0}^{n-1} \sum_{j=0}^{n-1} x_{ij} </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3.2149em;vertical-align:-1.4138em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mord mathnormal">a</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8011em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8011em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.4138em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span></span></p><p>其中<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub></mrow><annotation encoding="application/x-tex">x_{ij}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span>为决策变量，表示是否决定从城市<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span>到城市<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>j</mi></mrow><annotation encoding="application/x-tex">j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.854em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span></span></span></span>，如果选择去则<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">x_{ij}=1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>，否则<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">x_{ij}=0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span>。</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>约束条件</mtext><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></munderover><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></munderover><msub><mi>G</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><msub><mi>x</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo>≤</mo><mtext>max_time</mtext><mspace width="1em"><mtext>(总时间花费)</mtext></mspace></mrow><annotation encoding="application/x-tex">\text{约束条件}  \sum_{i=0}^{n-1} \sum_{j=0}^{n-1} G_{ij} x_{ij} \leq \text{max\_time} \quad \text{(总时间花费)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3.2149em;vertical-align:-1.4138em;"></span><span class="mord text"><span class="mord cjk_fallback">约束条件</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8011em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8011em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.4138em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">G</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.06em;vertical-align:-0.31em;"></span><span class="mord text"><span class="mord">max_time</span></span><span class="mspace" style="margin-right:1em;"></span><span class="mord text"><span class="mord">(</span><span class="mord cjk_fallback">总时间花费</span><span class="mord">)</span></span></span></span></span></span></p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi></mrow><annotation encoding="application/x-tex">G</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">G</span></span></span></span>是输入的时间矩阵，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>G</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub></mrow><annotation encoding="application/x-tex">G_{ij}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal">G</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span>表示从城市<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span>到城市<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>j</mi></mrow><annotation encoding="application/x-tex">j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.854em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span></span></span></span>的时间花费，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi><mi>a</mi><mi>x</mi><mi mathvariant="normal">_</mi><mi>t</mi><mi>i</mi><mi>m</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">max\_time</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9695em;vertical-align:-0.31em;"></span><span class="mord mathnormal">ma</span><span class="mord mathnormal">x</span><span class="mord" style="margin-right:0.02778em;">_</span><span class="mord mathnormal">t</span><span class="mord mathnormal">im</span><span class="mord mathnormal">e</span></span></span></span>表示最大时间限制。这里的时间是<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>144</mn><mo>−</mo><mtext>在广州的</mtext><mn>2.5</mn><mtext>小时</mtext></mrow><annotation encoding="application/x-tex">144 -在广州的2.5小时</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">144</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">在广州的</span><span class="mord">2.5</span><span class="mord cjk_fallback">小时</span></span></span></span></p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>n</mi><mo>−</mo><mn>1</mn><mo separator="true">,</mo><mi>j</mi><mo mathvariant="normal">≠</mo><mi>i</mi></mrow></munderover><msub><mi>x</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo>=</mo><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>n</mi><mo>−</mo><mn>1</mn><mo separator="true">,</mo><mi>j</mi><mo mathvariant="normal">≠</mo><mi>i</mi></mrow></munderover><msub><mi>x</mi><mrow><mi>j</mi><mi>i</mi></mrow></msub><mspace width="1em"><mi mathvariant="normal">∀</mi><mi>i</mi><mo>∈</mo><mo stretchy="false">{</mo><mn>0</mn><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo stretchy="false">}</mo><mspace width="1em"><mtext>(流量平衡，进出相等)</mtext></mspace></mspace></mrow><annotation encoding="application/x-tex"> \sum_{j=0}^{n-1, j \neq i} x_{ij} = \sum_{j=0}^{n-1, j \neq i} x_{ji} \quad \forall i \in \{0, \ldots, n-1\} \quad \text{(流量平衡，进出相等)} </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3.297em;vertical-align:-1.4138em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8832em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3471em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">1</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span><span class="mrel mtight"><span class="mrel mtight"><span class="mord vbox mtight"><span class="thinbox mtight"><span class="rlap mtight"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="inner"><span class="mord mtight"><span class="mrel mtight"></span></span></span><span class="fix"></span></span></span></span></span><span class="mrel mtight">=</span></span><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.4138em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:3.297em;vertical-align:-1.4138em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8832em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3471em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">1</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span><span class="mrel mtight"><span class="mrel mtight"><span class="mord vbox mtight"><span class="thinbox mtight"><span class="rlap mtight"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="inner"><span class="mord mtight"><span class="mrel mtight"></span></span></span><span class="fix"></span></span></span></span></span><span class="mrel mtight">=</span></span><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.4138em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">ji</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:1em;"></span><span class="mord">∀</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">}</span><span class="mspace" style="margin-right:1em;"></span><span class="mord text"><span class="mord">(</span><span class="mord cjk_fallback">流量平衡，进出相等</span><span class="mord">)</span></span></span></span></span></span></p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>n</mi><mo>−</mo><mn>1</mn><mo separator="true">,</mo><mi>j</mi><mo mathvariant="normal">≠</mo><mi>i</mi></mrow></munderover><msub><mi>x</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo>≤</mo><mn>1</mn><mspace width="1em"><mi mathvariant="normal">∀</mi><mi>i</mi><mo>∈</mo><mo stretchy="false">{</mo><mn>0</mn><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo stretchy="false">}</mo><mspace width="1em"><mtext>(每个城市最多有一个出边)</mtext></mspace></mspace></mrow><annotation encoding="application/x-tex"> \sum_{j=0}^{n-1, j \neq i} x_{ij} \leq 1 \quad \forall i \in \{0, \ldots, n-1\} \quad \text{(每个城市最多有一个出边)} </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3.297em;vertical-align:-1.4138em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8832em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3471em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">1</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span><span class="mrel mtight"><span class="mrel mtight"><span class="mord vbox mtight"><span class="thinbox mtight"><span class="rlap mtight"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="inner"><span class="mord mtight"><span class="mrel mtight"></span></span></span><span class="fix"></span></span></span></span></span><span class="mrel mtight">=</span></span><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.4138em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7335em;vertical-align:-0.0391em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:1em;"></span><span class="mord">∀</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">}</span><span class="mspace" style="margin-right:1em;"></span><span class="mord text"><span class="mord">(</span><span class="mord cjk_fallback">每个城市最多有一个出边</span><span class="mord">)</span></span></span></span></span></span></p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>n</mi><mo>−</mo><mn>1</mn><mo separator="true">,</mo><mi>j</mi><mo mathvariant="normal">≠</mo><mi>i</mi></mrow></munderover><msub><mi>x</mi><mrow><mi>j</mi><mi>i</mi></mrow></msub><mo>≤</mo><mn>1</mn><mspace width="1em"><mi mathvariant="normal">∀</mi><mi>i</mi><mo>∈</mo><mo stretchy="false">{</mo><mn>0</mn><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo stretchy="false">}</mo><mspace width="1em"><mtext>(每个城市最多有一个入边)</mtext></mspace></mspace></mrow><annotation encoding="application/x-tex"> \sum_{j=0}^{n-1, j \neq i} x_{ji} \leq 1 \quad \forall i \in \{0, \ldots, n-1\} \quad \text{(每个城市最多有一个入边)} </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3.297em;vertical-align:-1.4138em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8832em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3471em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">1</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span><span class="mrel mtight"><span class="mrel mtight"><span class="mord vbox mtight"><span class="thinbox mtight"><span class="rlap mtight"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="inner"><span class="mord mtight"><span class="mrel mtight"></span></span></span><span class="fix"></span></span></span></span></span><span class="mrel mtight">=</span></span><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.4138em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">ji</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7335em;vertical-align:-0.0391em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:1em;"></span><span class="mord">∀</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">}</span><span class="mspace" style="margin-right:1em;"></span><span class="mord text"><span class="mord">(</span><span class="mord cjk_fallback">每个城市最多有一个入边</span><span class="mord">)</span></span></span></span></span></span></p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>n</mi><mo>−</mo><mn>1</mn><mo separator="true">,</mo><mi>j</mi><mo mathvariant="normal">≠</mo><mtext>start_city</mtext></mrow></munderover><msub><mi>x</mi><mrow><mtext>start_city</mtext><mo separator="true">,</mo><mi>j</mi></mrow></msub><mo>=</mo><mn>1</mn><mspace width="1em"><mtext>(将起点城市出边设置为1表示从这里出发)</mtext></mspace></mrow><annotation encoding="application/x-tex"> \sum_{j=0}^{n-1, j \neq \text{start\_city}} x_{\text{start\_city}, j} = 1 \quad \text{(将起点城市出边设置为1表示从这里出发)} </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3.3779em;vertical-align:-1.4138em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.9641em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.428em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">1</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span><span class="mrel mtight"><span class="mrel mtight"><span class="mord vbox mtight"><span class="thinbox mtight"><span class="rlap mtight"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="inner"><span class="mord mtight"><span class="mrel mtight"></span></span></span><span class="fix"></span></span></span></span></span><span class="mrel mtight">=</span></span><span class="mord text mtight"><span class="mord mtight">start_city</span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.4138em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3175em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord text mtight"><span class="mord mtight">start_city</span></span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.367em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:1em;"></span><span class="mord text"><span class="mord">(</span><span class="mord cjk_fallback">将起点城市出边设置为</span><span class="mord">1</span><span class="mord cjk_fallback">表示从这里出发</span><span class="mord">)</span></span></span></span></span></span></p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>u</mi><mi>i</mi></msub><mo>−</mo><msub><mi>u</mi><mi>j</mi></msub><mo>+</mo><mi>n</mi><msub><mi>x</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo>≤</mo><mi>n</mi><mo>−</mo><mn>1</mn><mspace width="1em"><mi mathvariant="normal">∀</mi><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo>∈</mo><mo stretchy="false">{</mo><mn>1</mn><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo stretchy="false">}</mo><mo separator="true">,</mo><mi>i</mi><mo mathvariant="normal">≠</mo><mi>j</mi><mspace width="1em"><mtext>(MTZ约束，确保不被重复访问)</mtext></mspace></mspace></mrow><annotation encoding="application/x-tex"> u_i - u_j + n x_{ij} \leq n - 1 \quad \forall i, j \in \{1, \ldots, n-1\}, i \neq j \quad \text{(MTZ约束，确保不被重复访问)} </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">u</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal">u</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.9221em;vertical-align:-0.2861em;"></span><span class="mord mathnormal">n</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:1em;"></span><span class="mord">∀</span><span class="mord mathnormal">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">}</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel"><span class="mrel"><span class="mord vbox"><span class="thinbox"><span class="rlap"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="inner"><span class="mord"><span class="mrel"></span></span></span><span class="fix"></span></span></span></span></span><span class="mrel">=</span></span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mspace" style="margin-right:1em;"></span><span class="mord text"><span class="mord">(MTZ</span><span class="mord cjk_fallback">约束，确保不被重复访问</span><span class="mord">)</span></span></span></span></span></span></p><p>这里的n是城市的数量，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>=</mo><mn>50</mn></mrow><annotation encoding="application/x-tex">n=50</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">50</span></span></span></span>。</p><p>对于MTZ约束，这里的<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>u</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">u_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">u</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>是一个辅助变量，表示城市<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span></span></span></span>的访问顺序。如果<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">x_{ij}=1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>，那么<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>u</mi><mi>i</mi></msub><mo>−</mo><msub><mi>u</mi><mi>j</mi></msub><mo>≤</mo><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">u_i - u_j \leq -1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">u</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.9221em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal">u</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">−</span><span class="mord">1</span></span></span></span>，即<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>u</mi><mi>i</mi></msub><mo>≤</mo><msub><mi>u</mi><mi>j</mi></msub><mo>−</mo><mn>1</mn><mo>&lt;</mo><msub><mi>u</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">u_i \leq u_j-1 &lt; u_j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.786em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">u</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal">u</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6835em;vertical-align:-0.0391em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal">u</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span>.这样就可以保证经过的u是增长的，即保证了城市的访问顺序。</p><p>假设存在被重复访问的节点<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>v</mi><mn>1</mn></msub><msub><mi>v</mi><mn>2</mn></msub><msub><mi>v</mi><mn>3</mn></msub><msub><mi>v</mi><mn>4</mn></msub><mo separator="true">,</mo><mtext>其对应的</mtext><mi>u</mi><mtext>为</mtext><msub><mi>u</mi><mn>1</mn></msub><msub><mi>u</mi><mn>2</mn></msub><msub><mi>u</mi><mn>3</mn></msub><msub><mi>u</mi><mn>1</mn></msub><mo separator="true">,</mo><mtext>有</mtext><msub><mi>u</mi><mn>1</mn></msub><mo>&lt;</mo><msub><mi>u</mi><mn>2</mn></msub><mo>&lt;</mo><msub><mi>u</mi><mn>3</mn></msub><mo>&lt;</mo><msub><mi>u</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">v_1 v_2 v_3 v_4,其对应的u为u_1 u_2 u_3 u_1 , 有u_1&lt;u_2&lt;u_3&lt;u_1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord cjk_fallback">其对应的</span><span class="mord mathnormal">u</span><span class="mord cjk_fallback">为</span><span class="mord"><span class="mord mathnormal">u</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">u</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">u</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">u</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord cjk_fallback">有</span><span class="mord"><span class="mord mathnormal">u</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6891em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">u</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6891em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">u</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">u</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>产生矛盾，所以会避免这种情况发生。</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>x</mi><mrow><mi>i</mi><mi>i</mi></mrow></msub><mo>=</mo><mn>0</mn><mspace width="1em"><mi mathvariant="normal">∀</mi><mi>i</mi><mo>∈</mo><mo stretchy="false">{</mo><mn>0</mn><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo stretchy="false">}</mo><mspace width="1em"><mtext>(防止自环，即防止原地绕圈)</mtext></mspace></mspace></mrow><annotation encoding="application/x-tex"> x_{ii} = 0 \quad \forall i \in \{0, \ldots, n-1\} \quad \text{(防止自环，即防止原地绕圈)} </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">ii</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7335em;vertical-align:-0.0391em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:1em;"></span><span class="mord">∀</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">}</span><span class="mspace" style="margin-right:1em;"></span><span class="mord text"><span class="mord">(</span><span class="mord cjk_fallback">防止自环，即防止原地绕圈</span><span class="mord">)</span></span></span></span></span></span></p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>变量</mtext><mspace width="1em"><msub><mi>x</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo>∈</mo><mo stretchy="false">{</mo><mn>0</mn><mo separator="true">,</mo><mn>1</mn><mo stretchy="false">}</mo><mspace width="1em"><mi mathvariant="normal">∀</mi><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo>∈</mo><mo stretchy="false">{</mo><mn>0</mn><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo stretchy="false">}</mo></mspace></mspace></mrow><annotation encoding="application/x-tex">\text{变量} \quad  x_{ij} \in \{0, 1\} \quad \forall i, j \in \{0, \ldots, n-1\} </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord text"><span class="mord cjk_fallback">变量</span></span><span class="mspace" style="margin-right:1em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mclose">}</span><span class="mspace" style="margin-right:1em;"></span><span class="mord">∀</span><span class="mord mathnormal">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">}</span></span></span></span></span></p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>u</mi><mi>i</mi></msub><mo>∈</mo><mi mathvariant="double-struck">R</mi><mspace width="1em"><mi mathvariant="normal">∀</mi><mi>i</mi><mo>∈</mo><mo stretchy="false">{</mo><mn>0</mn><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo stretchy="false">}</mo></mspace></mrow><annotation encoding="application/x-tex"> u_i \in \mathbb{R} \quad \forall i \in \{0, \ldots, n-1\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6891em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">u</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7335em;vertical-align:-0.0391em;"></span><span class="mord mathbb">R</span><span class="mspace" style="margin-right:1em;"></span><span class="mord">∀</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">}</span></span></span></span></span></p><h3 id="3-1-Python-Gurobipy求解">3.1 Python Gurobipy求解</h3><p>这里生成300阶的随机数矩阵作为输入。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> gurobipy <span class="hljs-keyword">as</span> gp<br><span class="hljs-keyword">from</span> gurobipy <span class="hljs-keyword">import</span> GRB<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">solve_max_cities_with_time_constraint</span>(<span class="hljs-params">Gmatrix, max_time, start_city</span>):<br>    n = <span class="hljs-built_in">len</span>(Gmatrix)<br>    <span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">    输入参数：时间矩阵 Gmatrix，最大时间 max_time，起点城市 start_city</span><br><span class="hljs-string">    输出参数：最佳路径 path，花费时间 total_time，访问的城市数量 cities_visited</span><br><span class="hljs-string">    &#x27;&#x27;&#x27;</span><br>    model = gp.Model(<span class="hljs-string">&quot;Max_Cities_with_Time_Constraint&quot;</span>)<br><br>    <span class="hljs-comment"># 决策变量：x[i, j] ,是否选择从城市 i 到城市 j 的路径</span><br>    x = model.addVars(n, n, vtype=GRB.BINARY, name=<span class="hljs-string">&quot;x&quot;</span>)<br><br>    <span class="hljs-comment"># 辅助变量：u[i] 用于避免子环</span><br>    u = model.addVars(n, vtype=GRB.CONTINUOUS, name=<span class="hljs-string">&quot;u&quot;</span>)<br><br>    <span class="hljs-comment"># 最大化访问的城市数量</span><br>    model.setObjective(gp.quicksum(x[i, j] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n) <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)), GRB.MAXIMIZE)<br><br>    <span class="hljs-comment"># 总时间花费 &lt;= max_time</span><br>    model.addConstr(gp.quicksum(Gmatrix[i][j] * x[i, j] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n) <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)) &lt;= max_time, <span class="hljs-string">&quot;time_limit&quot;</span>)<br><br>    <span class="hljs-comment"># 添加流量约束</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>,n-<span class="hljs-number">1</span>):<br>        model.addConstr(gp.quicksum(x[i, j] <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n) <span class="hljs-keyword">if</span> j != i) == gp.quicksum(x[j, i] <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n) <span class="hljs-keyword">if</span> j != i), <span class="hljs-string">f&quot;flow_balance_<span class="hljs-subst">&#123;i&#125;</span>&quot;</span>)<br>        model.addConstr(gp.quicksum(x[i, j] <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n) <span class="hljs-keyword">if</span> j != i) &lt;= <span class="hljs-number">1</span>, <span class="hljs-string">f&quot;out_<span class="hljs-subst">&#123;i&#125;</span>&quot;</span>)<br>        model.addConstr(gp.quicksum(x[j, i] <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n) <span class="hljs-keyword">if</span> j != i) &lt;= <span class="hljs-number">1</span>, <span class="hljs-string">f&quot;in_<span class="hljs-subst">&#123;i&#125;</span>&quot;</span>)<br><br>    <span class="hljs-comment"># 添加起点约束：确保从指定的起点城市出发</span><br>    model.addConstr(gp.quicksum(x[start_city, j] <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n) <span class="hljs-keyword">if</span> j != start_city) == <span class="hljs-number">1</span>, <span class="hljs-string">&quot;start_city_out&quot;</span>)<br>    <span class="hljs-comment">#model.addConstr(gp.quicksum(x[i, start_city] for i in range(n) if i != start_city) == 0, &quot;start_city_in&quot;)</span><br><br>    <span class="hljs-comment"># 添加子环消除约束（MTZ约束）</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n):<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n):<br>            <span class="hljs-keyword">if</span> i != j:<br>                model.addConstr(u[i] - u[j] + n * x[i, j] &lt;= n - <span class="hljs-number">1</span>, <span class="hljs-string">f&quot;mtz_<span class="hljs-subst">&#123;i&#125;</span>_<span class="hljs-subst">&#123;j&#125;</span>&quot;</span>)<br><br>    <span class="hljs-comment"># 防止自环</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>        model.addConstr(x[i, i] == <span class="hljs-number">0</span>, <span class="hljs-string">f&quot;no_self_loop_<span class="hljs-subst">&#123;i&#125;</span>&quot;</span>)<br><br>    <span class="hljs-comment"># 优化模型</span><br>    model.optimize()<br><br>    <span class="hljs-comment"># 检查是否找到最优解</span><br>    <span class="hljs-keyword">if</span> model.status == GRB.OPTIMAL:<br>        path = []<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>                <span class="hljs-keyword">if</span> x[i, j].X &gt; <span class="hljs-number">0.5</span>:  <span class="hljs-comment"># 判断变量值是否为1</span><br>                    path.append((i, j))<br>        total_time = gp.quicksum(Gmatrix[i][j] * x[i, j].X <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n) <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)).getValue()<br>        cities_visited = <span class="hljs-built_in">len</span>(<span class="hljs-built_in">set</span>([i <span class="hljs-keyword">for</span> i, j <span class="hljs-keyword">in</span> path] + [j <span class="hljs-keyword">for</span> i, j <span class="hljs-keyword">in</span> path]))<br>        <span class="hljs-keyword">return</span> path, total_time, cities_visited<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;没有找到最优解&quot;</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>, <span class="hljs-literal">None</span>, <span class="hljs-number">0</span><br><br><span class="hljs-comment"># 用时间矩阵求解最大城市数目</span><br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br>Gmatrix = np.random.randint(<span class="hljs-number">1</span>, <span class="hljs-number">1000</span>, (<span class="hljs-number">300</span>, <span class="hljs-number">300</span>))<br>max_time = <span class="hljs-number">144</span> - <span class="hljs-number">2.5</span> <span class="hljs-comment">#144减去在广州的2.5小时</span><br>path, total_time, cities_visited = solve_max_cities_with_time_constraint(Gmatrix, max_time,<span class="hljs-number">4</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;最佳路径:&quot;</span>, path)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;花费时间:&quot;</span>, total_time+<span class="hljs-number">2.5</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;访问的城市数量:&quot;</span>, cities_visited)<br></code></pre></td></tr></table></figure><p>300阶的求解结果，用时645s：</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br></pre></td><td class="code"><pre><code class="hljs txt">Gurobi Optimizer version 11.0.2 build v11.0.2rc0 (win64 - Windows 11+.0 (26120.2))<br><br>CPU model: 11th Gen Intel(R) Core(TM) i5-1135G7 @ 2.40GHz, instruction set [SSE2|AVX|AVX2|AVX512]<br>Thread count: 4 physical cores, 8 logical processors, using up to 8 threads<br><br>Optimize a model with 90301 rows, 90300 columns and 715509 nonzeros<br>Model fingerprint: 0x96df0c90<br>Variable types: 300 continuous, 90000 integer (90000 binary)<br>Coefficient statistics:<br>  Matrix range     [1e+00, 1e+03]<br>  Objective range  [1e+00, 1e+00]<br>  Bounds range     [1e+00, 1e+00]<br>  RHS range        [1e+00, 3e+02]<br>Presolve removed 318 rows and 77810 columns<br>Presolve time: 3.95s<br>Presolved: 89983 rows, 12490 columns, 249326 nonzeros<br>Variable types: 299 continuous, 12191 integer (12191 binary)<br><br>Deterministic concurrent LP optimizer: primal and dual simplex (primal and dual model)<br>Showing primal log only...<br><br>Root relaxation presolved: 12490 rows, 102174 columns, 261517 nonzeros<br><br><br>Root simplex log...<br><br>Iteration    Objective       Primal Inf.    Dual Inf.      Time<br>       0    4.3750000e+02   0.000000e+00   2.805988e+04      5s<br>Concurrent spin time: 0.09s<br><br>Solved with dual simplex<br><br>Root relaxation: objective 6.434205e+01, 1347 iterations, 0.86 seconds (0.28 work units)<br><br>    Nodes    |    Current Node    |     Objective Bounds      |     Work<br> Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time<br><br>     0     0   64.34205    0   34          -   64.34205      -     -    5s<br>     0     0   64.03846    0   31          -   64.03846      -     -   11s<br>     0     0   63.92804    0   31          -   63.92804      -     -   16s<br>     0     0   63.92804    0   41          -   63.92804      -     -   17s<br>     0     0   63.92804    0   41          -   63.92804      -     -   21s<br>H    0     0                       7.0000000   63.92804   813%     -   21s<br>     0     0   63.92804    0   33    7.00000   63.92804   813%     -   21s<br>H    0     0                       9.0000000   63.92804   610%     -   44s<br>     0     0   63.92804    0   33    9.00000   63.92804   610%     -   44s<br>     0     0   63.92804    0   39    9.00000   63.92804   610%     -   45s<br>     0     0   63.92804    0   39    9.00000   63.92804   610%     -   53s<br>     0     0   63.92804    0   39    9.00000   63.92804   610%     -   53s<br>     0     0   63.88293    0   49    9.00000   63.88293   610%     -   57s<br>     0     0   63.88293    0   49    9.00000   63.88293   610%     -   58s<br>     0     0   63.88293    0   49    9.00000   63.88293   610%     -   62s<br>     0     0   63.88293    0   49    9.00000   63.88293   610%     -   62s<br>     0     0   63.88293    0   33    9.00000   63.88293   610%     -   66s<br>     0     0   63.88293    0   39    9.00000   63.88293   610%     -   67s<br>H    0     0                      19.0000000   63.88293   236%     -   80s<br>     0     0   63.88293    0   39   19.00000   63.88293   236%     -   80s<br>     0     0   63.88293    0   39   19.00000   63.88293   236%     -   81s<br>     0     0   63.88293    0   39   19.00000   63.88293   236%     -   85s<br>     0     0   63.88293    0   41   19.00000   63.88293   236%     -   86s<br>     0     0   63.88293    0   41   19.00000   63.88293   236%     -   89s<br>     0     0   63.88293    0   41   19.00000   63.88293   236%     -   90s<br>     0     0   63.84848    0   59   19.00000   63.84848   236%     -   94s<br>     0     0   63.84848    0   59   19.00000   63.84848   236%     -   95s<br>     0     0   63.84848    0   59   19.00000   63.84848   236%     -   98s<br>     0     0   63.84848    0   59   19.00000   63.84848   236%     -   99s<br>     0     0   63.84848    0   60   19.00000   63.84848   236%     -  102s<br>     0     0   63.84848    0   61   19.00000   63.84848   236%     -  103s<br>     0     0   63.84848    0   61   19.00000   63.84848   236%     -  105s<br>     0     0   63.84848    0   61   19.00000   63.84848   236%     -  106s<br>     0     0   63.84848    0   61   19.00000   63.84848   236%     -  108s<br>     0     0   63.84848    0   61   19.00000   63.84848   236%     -  109s<br>     0     0   63.84848    0   61   19.00000   63.84848   236%     -  110s<br>     0     0   63.81818    0   34   19.00000   63.81818   236%     -  118s<br>     0     0   63.76923    0   41   19.00000   63.76923   236%     -  125s<br>     0     0   63.66450    0   39   19.00000   63.66450   235%     -  135s<br>     0     0   63.66450    0   39   19.00000   63.66450   235%     -  135s<br>     0     0   63.66450    0   39   19.00000   63.66450   235%     -  136s<br>     0     0   63.66450    0   39   19.00000   63.66450   235%     -  140s<br>     0     0   63.66450    0   49   19.00000   63.66450   235%     -  140s<br>     0     0   63.66450    0   49   19.00000   63.66450   235%     -  140s<br>     0     0   63.66450    0   49   19.00000   63.66450   235%     -  141s<br>     0     0   63.66450    0   60   19.00000   63.66450   235%     -  144s<br>     0     0   63.66450    0   61   19.00000   63.66450   235%     -  144s<br>     0     0   63.66450    0   61   19.00000   63.66450   235%     -  145s<br>     0     0   63.66450    0   54   19.00000   63.66450   235%     -  145s<br>H    0     0                      21.0000000   63.66450   203%     -  150s<br>     0     0   63.66450    0   54   21.00000   63.66450   203%     -  150s<br>     0     0   63.66450    0   54   21.00000   63.66450   203%     -  151s<br>     0     2   63.00000    0   54   21.00000   63.00000   200%     -  163s<br>     3     8   63.00000    2   51   21.00000   63.00000   200%  76.3  167s<br>    11    16   62.89189    4   44   21.00000   63.00000   200%  60.7  171s<br>    23    28   62.85714    6   46   21.00000   63.00000   200%  55.7  175s<br>    35    40   62.78824    8   40   21.00000   63.00000   200%  60.7  180s<br>    47    52   62.33333   11   25   21.00000   63.00000   200%  54.0  249s<br>H   49    52                      48.0000000   63.00000  31.3%  52.8  249s<br>    51    56   62.31606   12   59   48.00000   63.00000  31.3%  52.1  252s<br>H   52    56                      50.0000000   63.00000  26.0%  51.1  252s<br>    63    72   62.30566   15   71   50.00000   63.00000  26.0%  46.6  255s<br>    92    96   62.29142   22   72   50.00000   63.00000  26.0%  38.7  260s<br>   136   121   62.27479   29   55   50.00000   63.00000  26.0%  35.9  265s<br>   164   159   62.24837   33   57   50.00000   63.00000  26.0%  52.0  271s<br>   194   186   62.23794   38   54   50.00000   63.00000  26.0%  50.6  275s<br>   253   245   62.21036   48   53   50.00000   63.00000  26.0%  43.0  281s<br>   285   275   62.18348   55   57   50.00000   63.00000  26.0%  40.1  287s<br>   303   298   62.16999   60   41   50.00000   63.00000  26.0%  39.7  291s<br>   327   299   61.82886   34   61   50.00000   63.00000  26.0%  39.0  313s<br>   329   300   61.74333   58   34   50.00000   63.00000  26.0%  38.8  319s<br>   330   301   62.18166   55   39   50.00000   63.00000  26.0%  38.7  321s<br>   332   302   60.30097   17   54   50.00000   63.00000  26.0%  38.4  325s<br>   335   304   63.00000   60   44   50.00000   63.00000  26.0%  38.1  333s<br>   337   306   61.80000    3   70   50.00000   63.00000  26.0%  37.9  339s<br>   339   307   61.66667    9   45   50.00000   63.00000  26.0%  37.6  340s<br>   340   308   59.91273   25   45   50.00000   63.00000  26.0%  37.5  345s<br>   342   309   63.00000   25   66   50.00000   63.00000  26.0%  37.3  352s<br>   344   310   62.14956   10   85   50.00000   63.00000  26.0%  37.1  358s<br>   345   311   56.91556   65   67   50.00000   63.00000  26.0%  37.0  360s<br>   347   312   59.86378   32   93   50.00000   63.00000  26.0%  36.8  366s<br>   349   314   60.26698   19   74   50.00000   63.00000  26.0%  36.6  372s<br>   350   314   61.25759   27   86   50.00000   63.00000  26.0%  36.5  375s<br>   353   316   61.99417   17   83   50.00000   63.00000  26.0%  36.2  380s<br>   356   318   61.14295   12   93   50.00000   63.00000  26.0%  35.8  400s<br>   359   320   61.85048   27  103   50.00000   63.00000  26.0%  35.5  405s<br>   360   321   61.14295   12  103   50.00000   62.99272  26.0%  35.5  424s<br>   361   325   62.99272   10   58   50.00000   62.99272  26.0%  45.6  426s<br>   367   331   62.99272   12   55   50.00000   62.99272  26.0%  47.4  432s<br>   375   336   62.96010   13   44   50.00000   62.99272  26.0%  50.8  436s<br>   383   341   62.86096   14   42   50.00000   62.99272  26.0%  53.3  440s<br>   395   349   62.11111   15   15   50.00000   62.99272  26.0%  54.9  447s<br>   403   356   61.25000   16   34   50.00000   62.99272  26.0%  56.1  450s<br>   412   361   62.40000   17   20   50.00000   62.99272  26.0%  59.9  455s<br>   416   363   62.40000   18    8   50.00000   62.99272  26.0%  61.1  461s<br>   420   366   61.31286   18   43   50.00000   62.99272  26.0%  61.9  476s<br>   429   374   62.35294   19   13   50.00000   62.99272  26.0%  62.9  480s<br>   442   384   62.29723   21   50   50.00000   62.99272  26.0%  63.8  485s<br>   458   396   62.29275   23   50   50.00000   62.99272  26.0%  69.5  492s<br>   467   403   62.28421   24   16   50.00000   62.99272  26.0%  71.6  495s<br>   489   411   59.28889   26   24   50.00000   62.99272  26.0%  81.3  503s<br>   497   424   62.27544   27   33   50.00000   62.99272  26.0%  83.8  508s<br>   513   430   62.26671   29   29   50.00000   62.99272  26.0%  87.0  512s<br>   527   435   62.26296   30   23   50.00000   62.99272  26.0%  91.9  515s<br>   562   452   62.25516   33   45   50.00000   62.99272  26.0%  94.7  523s<br>   577   464   62.25351   35   32   50.00000   62.99272  26.0%   102  529s<br>   594   472   62.25029   37   27   50.00000   62.99272  26.0%   107  534s<br>   608   481   59.98667   38   39   50.00000   62.99272  26.0%   112  539s<br>   624   488   62.24442   41   35   50.00000   62.99272  26.0%   115  543s<br>   638   493   60.66667   43   13   50.00000   62.99272  26.0%   124  548s<br>   658   505   62.23658   44   46   50.00000   62.99272  26.0%   123  554s<br>   686   517   62.22725   46   45   50.00000   62.99272  26.0%   123  559s<br>   708   528   62.22636   47   36   50.00000   62.99272  26.0%   126  564s<br>   726   536   62.20935   50   56   50.00000   62.99272  26.0%   130  569s<br>   746   546   62.20697   52   56   50.00000   62.99272  26.0%   135  576s<br>   765   560   62.19752   55   29   50.00000   62.99272  26.0%   139  584s<br>   789   570   62.19413   57   35   50.00000   62.99272  26.0%   143  588s<br>   813   565     cutoff   59        50.00000   62.99272  26.0%   146  604s<br>H  814   534                      54.0000000   62.99272  16.7%   146  604s<br>H  815   363                      59.0000000   62.99272  6.77%   146  604s<br>H  816   348                      60.0000000   62.99272  4.99%   146  604s<br>   818   344     cutoff   60        60.00000   62.99272  4.99%   146  608s<br>   882   338   62.18854   64   34   60.00000   62.99272  4.99%   145  613s<br>   951   326   62.95358   24   42   60.00000   62.99272  4.99%   143  618s<br>* 1009   293              27      61.0000000   62.98422  3.25%   139  618s<br>  1055   240   62.67102   19   39   61.00000   62.92606  3.16%   135  624s<br>  1132   197 infeasible   18        61.00000   62.81818  2.98%   134  632s<br>  1230   177 infeasible   21        61.00000   62.73681  2.85%   130  639s<br>  1345    51   62.31475   21   35   61.00000   62.60114  2.62%   123  645s<br><br>Cutting planes:<br>  Gomory: 3<br>  Cover: 1<br>  Implied bound: 19<br>  MIR: 21<br>  Mixing: 1<br>  StrongCG: 1<br>  Flow cover: 94<br>  Inf proof: 2<br>  Zero half: 1<br>  Mod-K: 1<br>  RLT: 1<br><br>Explored 1577 nodes (175523 simplex iterations) in 647.07 seconds (337.60 work units)<br>Thread count was 8 (of 8 available processors)<br><br>Solution count 10: 61 60 59 ... 7<br><br>Optimal solution found (tolerance 1.00e-04)<br>Best objective 6.100000000000e+01, best bound 6.100000000000e+01, gap 0.0000%<br>最佳路径: [(0, 211), (4, 100), (21, 150), (23, 273), (25, 171), (34, 126), (44, 280), (48, 162), (49, 215), (57, 208), (64, 170), (65, 114), (69, 173), (73, 132), (75, 73), (78, 116), (88, 21), (92, 276), (96, 0), (100, 175), (105, 161), (106, 25), (114, 78), (116, 154), (119, 260), (122, 23), (126, 57), (132, 298), (134, 135), (135, 287), (143, 232), (150, 241), (154, 259), (158, 64), (161, 119), (162, 198), (170, 34), (171, 192), (173, 214), (175, 184), (184, 222), (192, 290), (198, 256), (208, 288), (211, 49), (214, 158), (215, 48), (222, 96), (232, 69), (241, 92), (256, 122), (259, 75), (260, 44), (266, 106), (273, 65), (276, 266), (280, 143), (287, 105), (288, 4), (290, 134), (298, 88)]<br>花费时间: 142.5<br>访问的城市数量: 61<br><br></code></pre></td></tr></table></figure><p>考虑到300阶过大，换成50阶的，用时0.1s：</p><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs tap">Gurobi Optimizer version 11.0.2 build v11.0.2rc0 (win64 - Windows 11+.0 (26120.2))<br><br>CPU model: 11th Gen Intel(R) Core(TM) i5-1135G7 @ 2.40GHz, instruction set [SSE2|AVX|AVX2|AVX512]<br>Thread count:<span class="hljs-number"> 4 </span>physical cores,<span class="hljs-number"> 8 </span>logical processors, using up to<span class="hljs-number"> 8 </span>threads<br><br>Optimize a model with<span class="hljs-number"> 2551 </span>rows,<span class="hljs-number"> 2550 </span>columns and<span class="hljs-number"> 19259 </span>nonzeros<br>Model fingerprint: 0x1d9ad627<br>Variable types:<span class="hljs-number"> 50 </span>continuous,<span class="hljs-number"> 2500 </span>integer (2500 binary)<br>Coefficient statistics:<br>  Matrix range     [1e+00, 1e+03]<br>  Objective range  [1e+00, 1e+00]<br>  Bounds range     [1e+00, 1e+00]<br>  RHS range        [1e+00, 1e+02]<br>Presolve removed<span class="hljs-number"> 1432 </span>rows and<span class="hljs-number"> 2438 </span>columns<br>Presolve time: 0.08s<br>Presolved:<span class="hljs-number"> 1119 </span>rows,<span class="hljs-number"> 112 </span>columns,<span class="hljs-number"> 2786 </span>nonzeros<br>Variable types:<span class="hljs-number"> 33 </span>continuous,<span class="hljs-number"> 79 </span>integer (79 binary)<br><br>Root relaxation: objective 1.276923e+01,<span class="hljs-number"> 175 </span>iterations, 0.00 seconds (0.00 work units)<br><br>    Nodes    |    Current Node    |     Objective Bounds      |     Work<br> Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time<br><br>    <span class="hljs-number"> 0 </span>   <span class="hljs-number"> 0 </span>  12.76923   <span class="hljs-number"> 0 </span> <span class="hljs-number"> 10 </span>         -   12.76923      -     -    0s<br>    <span class="hljs-number"> 0 </span>   <span class="hljs-number"> 0 </span>  12.47012   <span class="hljs-number"> 0 </span> <span class="hljs-number"> 10 </span>         -   12.47012      -     -    0s<br>H   <span class="hljs-number"> 0 </span>   <span class="hljs-number"> 0 </span>                      5.0000000   12.47012   149%     -    0s<br>    <span class="hljs-number"> 0 </span>   <span class="hljs-number"> 0 </span>  11.37942   <span class="hljs-number"> 0 </span> <span class="hljs-number"> 16 </span>   5.00000   11.37942   128%     -    0s<br>H   <span class="hljs-number"> 0 </span>   <span class="hljs-number"> 0 </span>                      7.0000000   11.25101  60.7%     -    0s<br>H   <span class="hljs-number"> 0 </span>   <span class="hljs-number"> 0 </span>                      9.0000000   11.02273  22.5%     -    0s<br>    <span class="hljs-number"> 0 </span>   <span class="hljs-number"> 0 </span>  11.02273   <span class="hljs-number"> 0 </span> <span class="hljs-number"> 16 </span>   9.00000   11.02273  22.5%     -    0s<br>    <span class="hljs-number"> 0 </span>   <span class="hljs-number"> 0 </span>  11.02273   <span class="hljs-number"> 0 </span> <span class="hljs-number"> 10 </span>   9.00000   11.02273  22.5%     -    0s<br>H   <span class="hljs-number"> 0 </span>   <span class="hljs-number"> 0 </span>                     10.0000000   11.02273  10.2%     -    0s<br><br>Cutting planes:<br>  Gomory: 1<br>  Implied bound: 6<br><br>Explored<span class="hljs-number"> 1 </span>nodes (210 simplex iterations) in 0.20 seconds (0.10 work units)<br>Thread count was<span class="hljs-number"> 8 </span>(of<span class="hljs-number"> 8 </span>available processors)<br><br>Solution count 4:<span class="hljs-number"> 10 </span>9<span class="hljs-number"> 7 </span>5 <br><br>Optimal solution found (tolerance 1.00e-04)<br>Best objective 1.000000000000e+01, best bound 1.000000000000e+01, gap 0.0000%<br>最佳路径: [(0, 23), (1, 12), (4, 46), (12, 4), (13, 35), (19, 1), (23, 13), (35, 19), (42, 0), (46, 42)]<br>花费时间: 120.5<br>访问的城市数量: 10<br></code></pre></td></tr></table></figure><h3 id="3-2-Matlab-求解器">3.2 Matlab 求解器</h3><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><code class="hljs matlab"><br><span class="hljs-comment">% 用时间矩阵求解最大城市数目</span><br><span class="hljs-built_in">disp</span>(<span class="hljs-string">&#x27;求解开始时间为：&#x27;</span>);<br>s = datetime(<span class="hljs-string">&#x27;now&#x27;</span>)<br>Gmatrix = randi([<span class="hljs-number">1</span>, <span class="hljs-number">1000</span>], <span class="hljs-number">300</span>, <span class="hljs-number">300</span>);<br>max_time = <span class="hljs-number">144</span> - <span class="hljs-number">2.5</span>; <span class="hljs-comment">% 144减去在广州的2.5小时</span><br>[path, total_time, cities_visited] = solve_max_cities_with_time_constraint(Gmatrix, max_time, <span class="hljs-number">4</span>);<br><span class="hljs-built_in">disp</span>(<span class="hljs-string">&#x27;最佳路径:&#x27;</span>);<br><span class="hljs-built_in">disp</span>(path);<br><span class="hljs-built_in">disp</span>(<span class="hljs-string">&#x27;花费时间:&#x27;</span>);<br><span class="hljs-built_in">disp</span>(total_time + <span class="hljs-number">2.5</span>);<br><span class="hljs-built_in">disp</span>(<span class="hljs-string">&#x27;访问的城市数量:&#x27;</span>);<br><span class="hljs-built_in">disp</span>(cities_visited);<br><span class="hljs-built_in">disp</span>(<span class="hljs-string">&#x27;求解结束时间为：&#x27;</span>);<br>e = datetime(<span class="hljs-string">&#x27;now&#x27;</span>)<br><span class="hljs-built_in">disp</span>(<span class="hljs-string">&#x27;求解耗时：&#x27;</span> , e - s);<br><br><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">[path, total_time, cities_visited]</span> = <span class="hljs-title">solve_max_cities_with_time_constraint</span><span class="hljs-params">(Gmatrix, max_time, start_city)</span></span><br>    n = <span class="hljs-built_in">size</span>(Gmatrix, <span class="hljs-number">1</span>);<br>    <span class="hljs-comment">% 输入参数：时间矩阵 Gmatrix，最大时间 max_time，起点城市 start_city</span><br>    <span class="hljs-comment">% 输出参数：最佳路径 path，花费时间 total_time，访问的城市数量 cities_visited</span><br><br>    <span class="hljs-comment">% 创建模型</span><br>    model = optimproblem(<span class="hljs-string">&#x27;ObjectiveSense&#x27;</span>, <span class="hljs-string">&#x27;maximize&#x27;</span>);<br><br>    <span class="hljs-comment">% 决策变量：x(i, j) ,是否选择从城市 i 到城市 j 的路径</span><br>    x = optimvar(<span class="hljs-string">&#x27;x&#x27;</span>, n, n, <span class="hljs-string">&#x27;Type&#x27;</span>, <span class="hljs-string">&#x27;integer&#x27;</span>, <span class="hljs-string">&#x27;LowerBound&#x27;</span>, <span class="hljs-number">0</span>, <span class="hljs-string">&#x27;UpperBound&#x27;</span>, <span class="hljs-number">1</span>);<br><br>    <span class="hljs-comment">% 辅助变量：u(i) 用于避免子环</span><br>    u = optimvar(<span class="hljs-string">&#x27;u&#x27;</span>, n, <span class="hljs-string">&#x27;Type&#x27;</span>, <span class="hljs-string">&#x27;continuous&#x27;</span>, <span class="hljs-string">&#x27;LowerBound&#x27;</span>, <span class="hljs-number">0</span>);<br><br>    <span class="hljs-comment">% 最大化访问的城市数量</span><br>    model.Objective = sum(x, <span class="hljs-string">&#x27;all&#x27;</span>);<br><br>    <span class="hljs-comment">% 总时间花费 &lt;= max_time</span><br>    model.Constraints.time_limit = sum(sum(Gmatrix .* x)) &lt;= max_time;<br><br>    <span class="hljs-comment">% 添加流量约束</span><br>    <span class="hljs-keyword">for</span> <span class="hljs-built_in">i</span> = <span class="hljs-number">1</span>:n<span class="hljs-number">-1</span><br>        model.Constraints.([<span class="hljs-string">&#x27;flow_balance_&#x27;</span>, num2str(<span class="hljs-built_in">i</span>)]) = sum(x(<span class="hljs-built_in">i</span>, :)) == sum(x(:, <span class="hljs-built_in">i</span>));<br>        model.Constraints.([<span class="hljs-string">&#x27;out_&#x27;</span>, num2str(<span class="hljs-built_in">i</span>)]) = sum(x(<span class="hljs-built_in">i</span>, :)) &lt;= <span class="hljs-number">1</span>;<br>        model.Constraints.([<span class="hljs-string">&#x27;in_&#x27;</span>, num2str(<span class="hljs-built_in">i</span>)]) = sum(x(:, <span class="hljs-built_in">i</span>)) &lt;= <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">end</span><br><br>    <span class="hljs-comment">% 添加起点约束：确保从指定的起点城市出发</span><br>    model.Constraints.start_city_out = sum(x(start_city, :)) == <span class="hljs-number">1</span>;<br><br>    <span class="hljs-comment">% 添加子环消除约束（MTZ约束）</span><br>    <span class="hljs-keyword">for</span> <span class="hljs-built_in">i</span> = <span class="hljs-number">2</span>:n<br>        <span class="hljs-keyword">for</span> <span class="hljs-built_in">j</span> = <span class="hljs-number">2</span>:n<br>            <span class="hljs-keyword">if</span> <span class="hljs-built_in">i</span> ~= <span class="hljs-built_in">j</span><br>                model.Constraints.([<span class="hljs-string">&#x27;mtz_&#x27;</span>, num2str(<span class="hljs-built_in">i</span>), <span class="hljs-string">&#x27;_&#x27;</span>, num2str(<span class="hljs-built_in">j</span>)]) = u(<span class="hljs-built_in">i</span>) - u(<span class="hljs-built_in">j</span>) + n * x(<span class="hljs-built_in">i</span>, <span class="hljs-built_in">j</span>) &lt;= n - <span class="hljs-number">1</span>;<br>            <span class="hljs-keyword">end</span><br>        <span class="hljs-keyword">end</span><br>    <span class="hljs-keyword">end</span><br><br>    <span class="hljs-comment">% 防止自环</span><br>    <span class="hljs-keyword">for</span> <span class="hljs-built_in">i</span> = <span class="hljs-number">1</span>:n<br>        model.Constraints.([<span class="hljs-string">&#x27;no_self_loop_&#x27;</span>, num2str(<span class="hljs-built_in">i</span>)]) = x(<span class="hljs-built_in">i</span>, <span class="hljs-built_in">i</span>) == <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">end</span><br><br>    <span class="hljs-comment">% 求解模型</span><br>    options = optimoptions(<span class="hljs-string">&#x27;intlinprog&#x27;</span>, <span class="hljs-string">&#x27;Display&#x27;</span>, <span class="hljs-string">&#x27;iter&#x27;</span>);<br>    [sol, fval, exitflag] = solve(model, <span class="hljs-string">&#x27;Options&#x27;</span>, options);<br><br>    <span class="hljs-comment">% 检查是否找到最优解</span><br>    <span class="hljs-keyword">if</span> exitflag == <span class="hljs-number">1</span><br>        path = [];<br>        <span class="hljs-keyword">for</span> <span class="hljs-built_in">i</span> = <span class="hljs-number">1</span>:n<br>            <span class="hljs-keyword">for</span> <span class="hljs-built_in">j</span> = <span class="hljs-number">1</span>:n<br>                <span class="hljs-keyword">if</span> sol.x(<span class="hljs-built_in">i</span>, <span class="hljs-built_in">j</span>) &gt; <span class="hljs-number">0.5</span>  <span class="hljs-comment">% 判断变量值是否为1</span><br>                    path = [path; <span class="hljs-built_in">i</span>, <span class="hljs-built_in">j</span>];<br>                <span class="hljs-keyword">end</span><br>            <span class="hljs-keyword">end</span><br>        <span class="hljs-keyword">end</span><br>        total_time = sum(sum(Gmatrix .* sol.x));<br>        cities_visited = <span class="hljs-built_in">length</span>(unique([path(:, <span class="hljs-number">1</span>); path(:, <span class="hljs-number">2</span>)]));<br>    <span class="hljs-keyword">else</span><br>        <span class="hljs-built_in">disp</span>(<span class="hljs-string">&#x27;没有找到最优解&#x27;</span>);<br>        path = [];<br>        total_time = <span class="hljs-number">0</span>;<br>        cities_visited = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">end</span><br><span class="hljs-keyword">end</span><br></code></pre></td></tr></table></figure><p>遗憾的是在300阶的情况下，Matlab求解了1个小时都没有求解出来，可能永远也求不出来了。</p><p>换成50阶的,用时124s：</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><code class="hljs txt">&gt;&gt; solve<br>求解开始时间为：<br><br>s = <br><br>  datetime<br><br>   2024-08-31 18:23:42<br><br><br><br>将使用 intlinprog 求解问题。<br><br>LP:                Optimal objective value is 10.651563.                                            <br><br><br>Cut Generation:    Applied 3 Gomory cuts, 5 mir cuts,                                               <br>                   and 1 cover cut.                                                                 <br>                   Upper bound is 9.000000.                                                         <br><br><br>Branch and Bound:<br><br><br>   nodes     total   num int        integer       relative                                          <br>explored  time (s)  solution           fval        gap (%)                                         <br>      24      0.68         1   7.000000e+00   1.250000e+01                                          <br>      27      0.69         1   7.000000e+00   1.250000e+01                                          <br><br>找到最优解。<br><br>Intlinprog 已停止，因为目标值在最佳值的间隙容差范围内，options.RelativeGapTolerance = 0.0001。intcon 变量是容差范围内的整<br>数，options.IntegerTolerance = 1e-05。<br><br><br>最佳路径:<br>     1    44<br>     4    13<br>    13     1<br>    27    37<br>    29    27<br>    37     4<br>    44    29<br><br><br>花费时间:<br>  124.5000<br><br><br>访问的城市数量:<br>     7<br><br><br>求解结束时间为：<br><br>e = <br><br>  datetime<br><br>   2024-08-31 18:24:23<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>math,coding</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>图论与图算法</title>
    <link href="/2024/08/20/graph/"/>
    <url>/2024/08/20/graph/</url>
    
    <content type="html"><![CDATA[<h2 id="part-1-图论基础-BFS">part 1 图论基础&amp;BFS</h2><h3 id="part1-1-图论基础">part1.1 图论基础</h3><p><img src="1.jpg"></p><p><img src="2.jpg"></p><p><img src="3.jpg"></p><h3 id="part1-2-BFS">part1.2 BFS</h3><p><img src="4.jpg"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 广度优先搜索</span><br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np  <br><span class="hljs-keyword">import</span> sympy <span class="hljs-keyword">as</span> sp<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">quene</span>:<br>    <span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">    实现一个队列，先入先出(FIFO)</span><br><span class="hljs-string">    &#x27;&#x27;&#x27;</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        self.quene = []<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">isEmpty</span>(<span class="hljs-params">self</span>): <br>        <span class="hljs-keyword">return</span> self.quene == []<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">push</span>(<span class="hljs-params">self,element</span>):<br>        self.quene.append(element)<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">pop</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">if</span> self.isEmpty():<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;quene is empty&quot;</span>)<br>        <span class="hljs-keyword">else</span>:<br>            self.quene.pop(<span class="hljs-number">0</span>)<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_size</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">len</span>(self.quene)<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">disp</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-built_in">print</span>(self.quene)<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">search</span>(<span class="hljs-params">G_matrix,single_source=<span class="hljs-number">0</span></span>) -&gt; np.ndarray:<br>    <span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">    输入一个邻接矩阵和起点，输出一个无权图的最短路径</span><br><span class="hljs-string">    &#x27;&#x27;&#x27;</span><br><br>    vertex_q = quene()<br>    <br>    vertex_num = <span class="hljs-built_in">len</span>(G_matrix) <span class="hljs-comment">#获取节点数</span><br>    vertex_q.push(single_source) <span class="hljs-comment">#将源节点加入队列</span><br>    visited = [<span class="hljs-number">0</span>]*vertex_num <span class="hljs-comment">#初始化访问数组</span><br>    distance = [<span class="hljs-number">0</span>]*vertex_num <span class="hljs-comment">#初始化距离数组</span><br>    path = [<span class="hljs-number">0</span>]*vertex_num <span class="hljs-comment">#初始化路径数组</span><br>    <span class="hljs-comment">#处理源节点</span><br>    visited[single_source] = <span class="hljs-number">1</span> <span class="hljs-comment">#标记源节点已经访问</span><br>    path[single_source] = <span class="hljs-string">&quot;start&quot;</span><br>    <span class="hljs-comment">#开始遍历</span><br>    <span class="hljs-keyword">while</span> vertex_q.isEmpty() == <span class="hljs-literal">False</span>:<br>        current_vertex = vertex_q.quene[<span class="hljs-number">0</span>]<br>        vertex_q.pop()<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(vertex_num):<br>            <span class="hljs-keyword">if</span> G_matrix[current_vertex][i] == <span class="hljs-number">1</span> <span class="hljs-keyword">and</span> visited[i] == <span class="hljs-number">0</span>:<br>                vertex_q.push(i)<br>                visited[i] = <span class="hljs-number">1</span><br>                distance[i] = distance[current_vertex] + <span class="hljs-number">1</span><br>                path[i] = current_vertex<br>              <br>    vertex_number = np.arange(vertex_num)<br>    result_array_raw = np.array([vertex_number,visited,distance,path])<br>    result_array = result_array_raw.T<br>    name = np.array([<span class="hljs-string">&quot;vertex&quot;</span>,<span class="hljs-string">&quot;visited&quot;</span>,<span class="hljs-string">&quot;distance&quot;</span>,<span class="hljs-string">&quot;path&quot;</span>])<br>    <br>    r =  np.row_stack((name,result_array)) <br>    <span class="hljs-keyword">return</span> r<br><span class="hljs-comment">#---------------------------------测试---------------------------------</span><br>graph_matrix = np.array([<br>              [<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>],<br>              [<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>],<br>              [<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>],<br>              [<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>],<br>              [<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>],<br>              [<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>],<br>              [<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>]])<br><br><br>r = search(graph_matrix,<span class="hljs-number">3</span>)<br>t = sp.Matrix(r)<br>t<br></code></pre></td></tr></table></figure><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle scriptlevel="0" displaystyle="true"><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>v</mi><mi>e</mi><mi>r</mi><mi>t</mi><mi>e</mi><mi>x</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>v</mi><mi>i</mi><mi>s</mi><mi>i</mi><mi>t</mi><mi>e</mi><mi>d</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>d</mi><mi>i</mi><mi>s</mi><mi>t</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>e</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>p</mi><mi>a</mi><mi>t</mi><mi>h</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>3</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>3</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>3</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>s</mi><mi>t</mi><mi>a</mi><mi>r</mi><mi>t</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>4</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>3</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>5</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>3</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>6</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>3</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mstyle></mrow><annotation encoding="application/x-tex">\displaystyle \left[\begin{matrix}vertex &amp; visited &amp; distance &amp; path\\0 &amp; 1 &amp; 2 &amp; 2\\1 &amp; 1 &amp; 3 &amp; 0\\2 &amp; 1 &amp; 1 &amp; 3\\3 &amp; 1 &amp; 0 &amp; start\\4 &amp; 1 &amp; 1 &amp; 3\\5 &amp; 1 &amp; 1 &amp; 3\\6 &amp; 1 &amp; 1 &amp; 3\end{matrix}\right]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:9.6001em;vertical-align:-4.5501em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:5.0499em;"><span style="top:-7.0499em;"><span class="pstrut" style="height:11.6em;"></span><span style="width:0.667em;height:9.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="9.600em" viewbox="0 0 667 9600"><path d="M403 1759 V84 H666 V0 H319 V1759 v6000 v1759 h347 v-84H403z M403 1759 V0 H319 V1759 v6000 v1759 h84z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:4.5501em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:5.05em;"><span style="top:-7.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mord mathnormal" style="margin-right:0.02778em;">er</span><span class="mord mathnormal">t</span><span class="mord mathnormal">e</span><span class="mord mathnormal">x</span></span></span><span style="top:-6.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-4.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">3</span></span></span><span style="top:-1.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">4</span></span></span><span style="top:-0.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">5</span></span></span><span style="top:1.19em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">6</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:4.55em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:5.05em;"><span style="top:-7.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mord mathnormal">i</span><span class="mord mathnormal">s</span><span class="mord mathnormal">i</span><span class="mord mathnormal">t</span><span class="mord mathnormal">e</span><span class="mord mathnormal">d</span></span></span><span style="top:-6.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-4.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-1.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-0.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:1.19em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:4.55em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:5.05em;"><span style="top:-7.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="mord mathnormal">i</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord mathnormal">an</span><span class="mord mathnormal">ce</span></span></span><span style="top:-6.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-4.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">3</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-0.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:1.19em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:4.55em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:5.05em;"><span style="top:-7.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="mord mathnormal">a</span><span class="mord mathnormal">t</span><span class="mord mathnormal">h</span></span></span><span style="top:-6.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-4.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">3</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal">t</span></span></span><span style="top:-1.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">3</span></span></span><span style="top:-0.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">3</span></span></span><span style="top:1.19em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:4.55em;"><span></span></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:5.0499em;"><span style="top:-7.0499em;"><span class="pstrut" style="height:11.6em;"></span><span style="width:0.667em;height:9.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="9.600em" viewbox="0 0 667 9600"><path d="M347 1759 V0 H0 V84 H263 V1759 v6000 v1759 H0 v84 H347zM347 1759 V0 H263 V1759 v6000 v1759 h84z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:4.5501em;"><span></span></span></span></span></span></span></span></span></span></span></p><h2 id="part-2-Dijkstra算法">part 2 Dijkstra算法</h2><p><img src="5.jpg"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#dijkstra算法</span><br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">import</span> sympy <span class="hljs-keyword">as</span> sp<br><span class="hljs-keyword">import</span> heapq <br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">priority_queue</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        self._queue = []<br>        self._index = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">push</span>(<span class="hljs-params">self,element,prior_value</span>):<br>        heapq.heappush(self._queue,(prior_value,self._index, element))<br>        self._index += <span class="hljs-number">1</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">pop</span>(<span class="hljs-params">self</span>):  <br>        <span class="hljs-keyword">return</span> heapq.heappop(self._queue)[-<span class="hljs-number">1</span>]<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">empty</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">len</span>(self._queue) == <span class="hljs-number">0</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__str__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">str</span>(self._queue)<br>    <br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">search</span>(<span class="hljs-params">Gmatrix, single_source=<span class="hljs-number">0</span></span>) -&gt; np.ndarray:<br>    <span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">    采用Dijkstra算法，计算单源最短路径</span><br><span class="hljs-string">    &#x27;&#x27;&#x27;</span><br>    vertex_q = priority_queue()<br>    <br>    n = <span class="hljs-built_in">len</span>(Gmatrix)<br>    <br>    <span class="hljs-comment">#初始化距离和路径数组</span><br>    distance = [<span class="hljs-built_in">float</span>(<span class="hljs-string">&#x27;inf&#x27;</span>)]*n<br>    distance[single_source] = <span class="hljs-number">0</span><br>    path = [-<span class="hljs-number">1</span>]*n    <br>    <br>    <span class="hljs-comment">#对节点进行遍历</span><br>    vertex_q.push(single_source,<span class="hljs-number">0</span>)<br>    <span class="hljs-keyword">while</span> <span class="hljs-keyword">not</span> vertex_q.empty():<br>        current_vertex = vertex_q.pop()<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>   <br>            temp_distance = Gmatrix[current_vertex][i] + distance[current_vertex]<br>            <span class="hljs-keyword">if</span> Gmatrix[current_vertex][i] != <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> temp_distance &lt; distance[i]: <span class="hljs-comment">#如果有路径且新的路径更短</span><br>                distance[i] = temp_distance <span class="hljs-comment">#更新距离</span><br>                path[i] = current_vertex<br>                vertex_q.push(i,temp_distance)<br>    <br><br>    vertex_number = np.arange(n)<br>    result_array_raw = np.array([vertex_number,distance,path])<br>    result_array = result_array_raw.T<br>    name = np.array([<span class="hljs-string">&quot;vertex&quot;</span>,<span class="hljs-string">&quot;distance&quot;</span>,<span class="hljs-string">&quot;path&quot;</span>])<br>    <br>    r =  np.row_stack((name,result_array))  <br>    <span class="hljs-keyword">return</span> r<br><br><span class="hljs-comment">#-----------------test-----------------</span><br>graph_matrix = np.array([<br>              [<span class="hljs-number">0</span>,<span class="hljs-number">2</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>],<br>              [<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">3</span>,<span class="hljs-number">10</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>],<br>              [<span class="hljs-number">4</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">5</span>,<span class="hljs-number">0</span>],<br>              [<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">2</span>,<span class="hljs-number">0</span>,<span class="hljs-number">2</span>,<span class="hljs-number">8</span>,<span class="hljs-number">7</span>],<br>              [<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>],<br>              [<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>],<br>              [<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>]])<br><br>r = search(graph_matrix,<span class="hljs-number">0</span>)<br><br>t = sp.Matrix(r)<br>t<br></code></pre></td></tr></table></figure><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle scriptlevel="0" displaystyle="true"><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>v</mi><mi>e</mi><mi>r</mi><mi>t</mi><mi>e</mi><mi>x</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>d</mi><mi>i</mi><mi>s</mi><mi>t</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>e</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>p</mi><mi>a</mi><mi>t</mi><mi>h</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>−</mo><mn>1</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>3</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>3</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>3</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>4</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>3</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>3</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>5</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>5</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>6</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>6</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>4</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>4</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mstyle></mrow><annotation encoding="application/x-tex">\displaystyle \left[\begin{matrix}vertex &amp; distance &amp; path\\0 &amp; 0 &amp; -1\\1 &amp; 2 &amp; 0\\2 &amp; 3 &amp; 3\\3 &amp; 1 &amp; 0\\4 &amp; 3 &amp; 3\\5 &amp; 5 &amp; 6\\6 &amp; 4 &amp; 4\end{matrix}\right]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:9.6001em;vertical-align:-4.5501em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:5.0499em;"><span style="top:-7.0499em;"><span class="pstrut" style="height:11.6em;"></span><span style="width:0.667em;height:9.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="9.600em" viewbox="0 0 667 9600"><path d="M403 1759 V84 H666 V0 H319 V1759 v6000 v1759 h347 v-84H403z M403 1759 V0 H319 V1759 v6000 v1759 h84z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:4.5501em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:5.05em;"><span style="top:-7.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mord mathnormal" style="margin-right:0.02778em;">er</span><span class="mord mathnormal">t</span><span class="mord mathnormal">e</span><span class="mord mathnormal">x</span></span></span><span style="top:-6.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-4.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">3</span></span></span><span style="top:-1.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">4</span></span></span><span style="top:-0.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">5</span></span></span><span style="top:1.19em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">6</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:4.55em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:5.05em;"><span style="top:-7.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="mord mathnormal">i</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mord mathnormal">an</span><span class="mord mathnormal">ce</span></span></span><span style="top:-6.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-4.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">3</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-1.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">3</span></span></span><span style="top:-0.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">5</span></span></span><span style="top:1.19em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:4.55em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:5.05em;"><span style="top:-7.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="mord mathnormal">a</span><span class="mord mathnormal">t</span><span class="mord mathnormal">h</span></span></span><span style="top:-6.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">−</span><span class="mord">1</span></span></span><span style="top:-4.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">3</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">3</span></span></span><span style="top:-0.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">6</span></span></span><span style="top:1.19em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:4.55em;"><span></span></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:5.0499em;"><span style="top:-7.0499em;"><span class="pstrut" style="height:11.6em;"></span><span style="width:0.667em;height:9.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="9.600em" viewbox="0 0 667 9600"><path d="M347 1759 V0 H0 V84 H263 V1759 v6000 v1759 H0 v84 H347zM347 1759 V0 H263 V1759 v6000 v1759 h84z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:4.5501em;"><span></span></span></span></span></span></span></span></span></span></span></p><h2 id="part-3-最小生成树">part 3 最小生成树</h2><p><img src="6.jpg"></p><h3 id="part-3-1-Prim算法">part 3.1  Prim算法</h3><p><img src="7.jpg"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#Prim算法求解最小生成树</span><br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">import</span> sympy <span class="hljs-keyword">as</span> sp<br><span class="hljs-keyword">import</span> random <span class="hljs-keyword">as</span> rd<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">prior_queue</span>:<br>    <span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">    用字典实现的优先队列</span><br><span class="hljs-string">    &#x27;&#x27;&#x27;</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        self.<span class="hljs-built_in">dict</span> = &#123;&#125;<br>        <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">pop_min</span>(<span class="hljs-params">self</span>):<br>        min_key = <span class="hljs-built_in">min</span>(self.<span class="hljs-built_in">dict</span>, key=self.<span class="hljs-built_in">dict</span>.get)<br>        self.<span class="hljs-built_in">dict</span>.pop(min_key)<br>        <span class="hljs-keyword">return</span> min_key<br>    <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">pop_max</span>(<span class="hljs-params">self</span>): <br>        max_key = <span class="hljs-built_in">max</span>(self.<span class="hljs-built_in">dict</span>, key=self.<span class="hljs-built_in">dict</span>.get)<br>        self.<span class="hljs-built_in">dict</span>.pop(max_key)<br>        <span class="hljs-keyword">return</span> max_key<br>        <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">push</span>(<span class="hljs-params">self, key, priority</span>):<br>        self.<span class="hljs-built_in">dict</span>[key] = priority <br>    <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">isEmpty</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">len</span>(self.<span class="hljs-built_in">dict</span>) == <span class="hljs-number">0</span><br>        <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__str__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">str</span>(self.<span class="hljs-built_in">dict</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">pr_search</span>(<span class="hljs-params">Gmatrix</span>) -&gt; np.ndarray:<br>    <span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">    用Prim算法生成最小生成树</span><br><span class="hljs-string">    &#x27;&#x27;&#x27;</span><br>    vertex_num = <span class="hljs-built_in">len</span>(Gmatrix)<br>    vertex_set = <span class="hljs-built_in">set</span>(<span class="hljs-built_in">range</span>(vertex_num))<br>    exe_set = <span class="hljs-built_in">set</span>()<br>    adjacent_matrix = np.zeros((vertex_num, vertex_num))<br>    start = rd.randint(<span class="hljs-number">0</span>, vertex_num-<span class="hljs-number">1</span>)<br>    exe_set.add(start)<br>    <br>    <span class="hljs-keyword">while</span> exe_set != vertex_set:<br>        Bejudged_q = prior_queue()<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> exe_set:<br>            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(vertex_num):<br>                <span class="hljs-keyword">if</span> j <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> exe_set <span class="hljs-keyword">and</span> Gmatrix[i][j] != <span class="hljs-number">0</span>:<br>                    Bejudged_q.push((i, j), Gmatrix[i][j])<br>        (i, j) = Bejudged_q.pop_min()<br>        adjacent_matrix[i][j] = Gmatrix[i][j] <span class="hljs-comment">#权重直接从Gmatrix读取</span><br>        exe_set.add(j)<br>    <br>    <span class="hljs-keyword">return</span> adjacent_matrix<br>    <br><span class="hljs-comment">#--------------------test------------------------</span><br><br>graph_matrix = np.array([<br>              [<span class="hljs-number">0</span>,<span class="hljs-number">2</span>,<span class="hljs-number">4</span>,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>],<br>              [<span class="hljs-number">2</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">3</span>,<span class="hljs-number">10</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>],<br>              [<span class="hljs-number">4</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">2</span>,<span class="hljs-number">0</span>,<span class="hljs-number">5</span>,<span class="hljs-number">0</span>],<br>              [<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">2</span>,<span class="hljs-number">0</span>,<span class="hljs-number">7</span>,<span class="hljs-number">8</span>,<span class="hljs-number">4</span>],<br>              [<span class="hljs-number">0</span>,<span class="hljs-number">10</span>,<span class="hljs-number">0</span>,<span class="hljs-number">7</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">6</span>],<br>              [<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">5</span>,<span class="hljs-number">8</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>],<br>              [<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">4</span>,<span class="hljs-number">6</span>,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>]])<br><br>r = pr_search(graph_matrix)<br>weight_sum = np.<span class="hljs-built_in">sum</span>(r)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;最小生成树的权重和为：&#x27;</span>, weight_sum)<br>t = sp.Matrix(r)<br>t<br></code></pre></td></tr></table></figure><pre><code class="hljs">最小生成树的权重和为： 16.0</code></pre><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle scriptlevel="0" displaystyle="true"><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center center center center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2.0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1.0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2.0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>6.0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>4.0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1.0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mstyle></mrow><annotation encoding="application/x-tex">\displaystyle \left[\begin{matrix}0 &amp; 2.0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0\\0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0\\0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0\\1.0 &amp; 0 &amp; 2.0 &amp; 0 &amp; 0 &amp; 0 &amp; 0\\0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 6.0\\0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0\\0 &amp; 0 &amp; 0 &amp; 4.0 &amp; 0 &amp; 1.0 &amp; 0\end{matrix}\right]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:8.4001em;vertical-align:-3.9501em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:4.4499em;"><span style="top:-6.4499em;"><span class="pstrut" style="height:10.4em;"></span><span style="width:0.667em;height:8.400em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="8.400em" viewbox="0 0 667 8400"><path d="M403 1759 V84 H666 V0 H319 V1759 v4800 v1759 h347 v-84H403z M403 1759 V0 H319 V1759 v4800 v1759 h84z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:3.9501em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:4.45em;"><span style="top:-6.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-5.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1.0</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-0.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:0.59em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:3.95em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:4.45em;"><span style="top:-6.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2.0</span></span></span><span style="top:-5.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-0.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:0.59em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:3.95em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:4.45em;"><span style="top:-6.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-5.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2.0</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-0.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:0.59em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:3.95em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:4.45em;"><span style="top:-6.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-5.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-0.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:0.59em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">4.0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:3.95em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:4.45em;"><span style="top:-6.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-5.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-0.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:0.59em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:3.95em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:4.45em;"><span style="top:-6.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-5.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-0.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:0.59em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1.0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:3.95em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:4.45em;"><span style="top:-6.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-5.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">6.0</span></span></span><span style="top:-0.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:0.59em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:3.95em;"><span></span></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:4.4499em;"><span style="top:-6.4499em;"><span class="pstrut" style="height:10.4em;"></span><span style="width:0.667em;height:8.400em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="8.400em" viewbox="0 0 667 8400"><path d="M347 1759 V0 H0 V84 H263 V1759 v4800 v1759 H0 v84 H347zM347 1759 V0 H263 V1759 v4800 v1759 h84z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:3.9501em;"><span></span></span></span></span></span></span></span></span></span></span></p><h3 id="part-3-2-Kruskal算法">part 3.2 Kruskal算法</h3><p><img src="8.jpg"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#Kruskal算法求解最小生成树</span><br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">import</span> sympy <span class="hljs-keyword">as</span> sp<br><span class="hljs-keyword">from</span> DataFrame <span class="hljs-keyword">import</span> priority_queue<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Dsu</span>:<br>    <span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">    并查集</span><br><span class="hljs-string">    &#x27;&#x27;&#x27;</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, size</span>):<br>        self.size = size<br>        self.parent = np.arange(size) <span class="hljs-comment">#存储父节点</span><br>        self.rank = np.zeros(size) <span class="hljs-comment">#存储树的深度</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">find</span>(<span class="hljs-params">self, x</span>):<br>        <span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">        查找节点</span><br><span class="hljs-string">        &#x27;&#x27;&#x27;</span>  <br>        <span class="hljs-keyword">if</span> x != self.parent[x]:<br>            self.parent[x] = self.find(self.parent[x])<br>        <span class="hljs-keyword">return</span> self.parent[x]<br>    <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">is_same</span>(<span class="hljs-params">self, x, y</span>):<br>        <span class="hljs-keyword">return</span> self.find(x) == self.find(y)<br>  <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">union</span>(<span class="hljs-params">self, x, y</span>):<br>        x = self.find(x)<br>        y = self.find(y)<br>        <span class="hljs-keyword">if</span> x == y:<br>            <span class="hljs-keyword">return</span><br>        <span class="hljs-keyword">if</span> self.rank[x] &lt; self.rank[y]:<br>            x, y = y, x<br>        self.parent[y] = x<br>        <span class="hljs-keyword">if</span> self.rank[x] == self.rank[y]:<br>            self.rank[x] += <span class="hljs-number">1</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__str__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">str</span>(self.parent)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">k_search</span>(<span class="hljs-params">Gmatrix</span>) -&gt; np.ndarray:<br>    <br>    vertex_num = <span class="hljs-built_in">len</span>(Gmatrix)<br>    vertex = np.arange(vertex_num)<br>    dsu = Dsu(vertex_num)<br>    <br>    <span class="hljs-comment">#将所有的边添加进优先队列中</span><br>    edge_q = priority_queue()<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(vertex_num):<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(i+<span class="hljs-number">1</span>,vertex_num):<br>            <span class="hljs-keyword">if</span> Gmatrix[i][j] != <span class="hljs-number">0</span>:<br>                edge_q.push((i,j),Gmatrix[i][j])<br>    <br>    selected_edge = <span class="hljs-built_in">set</span>()<br>    <span class="hljs-keyword">while</span> <span class="hljs-built_in">len</span>(selected_edge) &lt; vertex_num-<span class="hljs-number">1</span>:<br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> edge_q.empty(): <br>            temp = edge_q.pop_min()<br>            _edge = (temp[<span class="hljs-number">0</span>],temp[<span class="hljs-number">1</span>])<br>            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> dsu.is_same(_edge[<span class="hljs-number">0</span>],_edge[<span class="hljs-number">1</span>]):<br>                selected_edge.add(_edge)<br>                dsu.union(_edge[<span class="hljs-number">0</span>],_edge[<span class="hljs-number">1</span>])        <br>    <br>    tree_info = <span class="hljs-built_in">list</span>(selected_edge)<br>    tree_matrix = np.zeros((vertex_num,vertex_num))<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> tree_info:<br>        tree_matrix[i[<span class="hljs-number">0</span>]][i[<span class="hljs-number">1</span>]] = Gmatrix[i[<span class="hljs-number">0</span>]][i[<span class="hljs-number">1</span>]]<br>    <br>    <span class="hljs-keyword">return</span> tree_matrix<br><span class="hljs-comment">#----------------test-------------------------------</span><br>graph_matrix = np.array([<br>              [<span class="hljs-number">0</span>,<span class="hljs-number">2</span>,<span class="hljs-number">4</span>,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>],<br>              [<span class="hljs-number">2</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">3</span>,<span class="hljs-number">10</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>],<br>              [<span class="hljs-number">4</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">2</span>,<span class="hljs-number">0</span>,<span class="hljs-number">5</span>,<span class="hljs-number">0</span>],<br>              [<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">2</span>,<span class="hljs-number">0</span>,<span class="hljs-number">7</span>,<span class="hljs-number">8</span>,<span class="hljs-number">4</span>],<br>              [<span class="hljs-number">0</span>,<span class="hljs-number">10</span>,<span class="hljs-number">0</span>,<span class="hljs-number">7</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">6</span>],<br>              [<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">5</span>,<span class="hljs-number">8</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>],<br>              [<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">4</span>,<span class="hljs-number">6</span>,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>]])<br><br>r = k_search(graph_matrix)<br>weight_sum = np.<span class="hljs-built_in">sum</span>(r)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;最小生成树的权重和为：&#x27;</span>, weight_sum)<br>t = sp.Matrix(r)<br>t<br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">最小生成树的权重和为： <span class="hljs-number">16.0</span><br></code></pre></td></tr></table></figure><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle scriptlevel="0" displaystyle="true"><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center center center center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2.0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1.0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2.0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>4.0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>6.0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1.0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mstyle></mrow><annotation encoding="application/x-tex">\displaystyle \left[\begin{matrix}0 &amp; 2.0 &amp; 0 &amp; 1.0 &amp; 0 &amp; 0 &amp; 0\\0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0\\0 &amp; 0 &amp; 0 &amp; 2.0 &amp; 0 &amp; 0 &amp; 0\\0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 4.0\\0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 6.0\\0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 1.0\\0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0\end{matrix}\right]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:8.4001em;vertical-align:-3.9501em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:4.4499em;"><span style="top:-6.4499em;"><span class="pstrut" style="height:10.4em;"></span><span style="width:0.667em;height:8.400em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="8.400em" viewbox="0 0 667 8400"><path d="M403 1759 V84 H666 V0 H319 V1759 v4800 v1759 h347 v-84H403z M403 1759 V0 H319 V1759 v4800 v1759 h84z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:3.9501em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:4.45em;"><span style="top:-6.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-5.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-0.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:0.59em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:3.95em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:4.45em;"><span style="top:-6.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2.0</span></span></span><span style="top:-5.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-0.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:0.59em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:3.95em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:4.45em;"><span style="top:-6.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-5.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-0.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:0.59em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:3.95em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:4.45em;"><span style="top:-6.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1.0</span></span></span><span style="top:-5.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2.0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-0.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:0.59em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:3.95em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:4.45em;"><span style="top:-6.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-5.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-0.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:0.59em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:3.95em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:4.45em;"><span style="top:-6.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-5.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-0.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:0.59em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:3.95em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:4.45em;"><span style="top:-6.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-5.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">4.0</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">6.0</span></span></span><span style="top:-0.61em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1.0</span></span></span><span style="top:0.59em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:3.95em;"><span></span></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:4.4499em;"><span style="top:-6.4499em;"><span class="pstrut" style="height:10.4em;"></span><span style="width:0.667em;height:8.400em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="8.400em" viewbox="0 0 667 8400"><path d="M347 1759 V0 H0 V84 H263 V1759 v4800 v1759 H0 v84 H347zM347 1759 V0 H263 V1759 v4800 v1759 h84z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:3.9501em;"><span></span></span></span></span></span></span></span></span></span></span></p>]]></content>
    
    
    
    <tags>
      
      <tag>coding</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Two-sided Markets</title>
    <link href="/2024/08/03/digital-econ/"/>
    <url>/2024/08/03/digital-econ/</url>
    
    <content type="html"><![CDATA[<blockquote><p>有一些是我写的。尚未写完。</p><p>数字经济学还是有好教材的，推荐孙毅的《数字经济学》</p></blockquote><h1>双边市场</h1><h2 id="一、双边市场的定义和特征">一、双边市场的定义和特征</h2><h3 id="定义">定义</h3><p>双边市场理论是近年来网络经济学与产业组织理论所研究的热点之一。双边市场通常存在一类“平台企业”，将买方（B）和卖方（S）吸引到市场中，并同时向双边用户销售具有相互依赖性与互补性的产品或服务。在使得双方达成交易的同时，平台企业也能从中获得利润。</p><p>双边市场的结构包括市场成员、跨边网络外部性、市场价格结构三要素。</p><h4 id="市场成员">市场成员</h4><p>传统概念中，“市场”指买卖双方聚集在一起进行交易的场所，既可以是有形的，也可以是无形的。传统的单边市场构成很简单。在单边市场中，主要的微观结构由买方和卖方构成，卖方直接出售产品和服务给买方，市场交易直接在买方和卖方中进行。在这样的市场中买方与卖方的互动及其类型主要有：相互搜索、讨价还价、达成交易。</p><p>但双边市场的情况比单边市场复杂。双边市场的市场成员由买方、卖方，以及平台企业构成。与传统的单边市场相比，如果没有平台企业及其所提供的运作平台，那么双边用户就不能发现彼此，换言之是平台企业创造了双边市场。在双边市场中，平台企业提供一个交易平台作为作为“媒人中介”，在双边市场的形成与运作发展中发挥着重要的作用，是双边市场中最重要的组成部分。交易平台能够通过匹配买卖双方，通过降低买卖双方的搜索成本进而降低交易成本，促使买卖双方达成交易。</p><h4 id="跨边网络外部性">跨边网络外部性</h4><p>跨边网络外部性也被称作双边网络外部性。跨边网络外部性是指在双边市场中一方获取的效用取决于另一方的规模，并且买卖双方存在依赖性，如果没有买方的参与，那么卖方就不会参与到双边市场中。如果一方的数量和质量越高，那么参与到双边市场中的另一方所获得效用也越高。但是跨边网络外部性不一定是正向的，也会同时形成市场制约结构，虽然提高一方的规模会提高另一方用户的效用，但另一边用户的规模提升也会使该边用户的效用受损。</p><h4 id="市场价格结构">市场价格结构</h4><p>在传统的单边市场中价格结构呈现中性，成交量只与价格总量有关，与价格结构无关。但在双边市场中价格结构呈现了非中性的特征，成交量与价格总量以及价格结构均相关。</p><p>在双边市场中，平台对双边用户制定合理的价格虽然十分重要，但是如何在双边用户之间分配合理的价格总水平显得更为重要。例如，在网购平台中，平台企业为了丰富商品的种类，需要制定合理的价格吸引更多的买家进入。与此同时，平台企业也需要制定合理的价格吸引消费者进入平台。因此价格总水平需要在卖方与买方之间平均分配。因此，在双边市场中，价格结构呈现了非中性的特征。</p><h3 id="分类">分类</h3><p>双边市场有较多的分类方式，可按照平台所有权、平台企业的功能、平台的连接性质、网络外部性、复杂程度进行划分。</p><p>例如按照平台所有权可划分为独立拥有性平台（Independence）和垂直一体化平台（Vertical）。按照平台企业的功能可划分为市场创造类平台（Market-maker）如超市、电商网站以及婚恋网站等，受众制造类平台（Audience-maker）如报纸、媒体平台，需求协调类平台（Demand-marker）如网络游戏、操作系统等。</p><h3 id="特征">特征</h3><p>双边市场存在许多区别于传统的单边市场的典型特征，它们会极大影响平台企业的商业模式。</p><p>首先，按照前文对双边市场结构的介绍，双边市场中双边用户之间存在跨边网络外部性，它是双边市场的重要特征。</p><p>双边用户对交易平台的需求存在互动性。这种需求特点也可被称为“需求的互补性”，一边对平台的需求增加或减少，另一边的需求也将会相应地增加或减少。</p><p>双边用户的归属存在复杂性。在经济学中，单归属为一个用户只使用一个平台的情形，多归属为一个用户使用多个平台的情形。对于一个用户只存在两种情形，对于一群用户便存在三种情况：全部单归属，全部多归属和部分多归属。那么在双边市场的两个用户群之间便存在着9种情况。</p><p>双边市场中的竞争存在多维性，在竞争类型和竞争场面上都有许多划分。首先在竞争类型上，同时存在着内部竞争与外部竞争。内部竞争通常发生在市场中的同一边用户群中，外部竞争通常很激烈，发生在平台企业与其他平台企业或者主体之间。</p><p>双边市场具有中间组织特性。中间组织具有市场和企业组织的双重特征，是某些市场主体基于各种联系所形成的正式或非正式交易制度,体现了主体之间的紧密合作关系。</p><h2 id="二、双边市场的定价模型与补贴策略">二、双边市场的定价模型与补贴策略</h2><h3 id="定价模型">定价模型</h3><p>与传统单边市场的供求分析方法相比，双边市场由于具有网络外部性、交易双方的相互依赖互补以及价格结构非中性等特征，其定价方式有所不同。此前已有广泛的研究，例如庇古模型、利润最大化定价，拉姆齐定价等。本节所介绍的模型为基于Tride与Rochet（2003）的经典模型，并根据Armstrong（2006）的论文进行了改进。</p><p>在该模型中，我们只考虑一组生产者与一组消费者，双方进入平台的注册费我们不予考虑，仅考虑平台从交易中获得的交易费。基于此，我们介绍双边市场中的一种价格分配方案。</p><h4 id="双边市场的价格分配模型">双边市场的价格分配模型</h4><p>设双边市场中生产者的数量为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">m</span></span></span></span>，消费者的数量为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span>，它们通过平台进行交易活动。其中<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi></mrow><annotation encoding="application/x-tex">c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">c</span></span></span></span>和<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span>分别为生产者和消费者的平台使用成本，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>H</mi></mrow><annotation encoding="application/x-tex">H</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span></span></span></span>和<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi></mrow><annotation encoding="application/x-tex">F</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span></span></span></span>分别为当前成本所对应的生产者和消费者数量。并且我们假设本模型中所有产品都是一致的。根据传统的单边市场的结论，它们满足以下关系：</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable width="100%"><mtr><mtd width="50%"></mtd><mtd><mrow><mo fence="true">{</mo><mtable rowspacing="0.36em" columnalign="left left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>m</mi><mo>=</mo><mi>H</mi><mo stretchy="false">(</mo><mi>c</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>n</mi><mo>=</mo><mi>F</mi><mo stretchy="false">(</mo><mi>k</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr></mtable></mrow></mtd><mtd width="50%"></mtd><mtd><mtext>(1)</mtext></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{cases}m=H(c)\\n=F(k)\end{cases} \tag{1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3em;vertical-align:-1.25em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size4">{</span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="mopen">(</span><span class="mord mathnormal">c</span><span class="mclose">)</span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="tag"><span class="strut" style="height:3em;vertical-align:-1.25em;"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">1</span></span><span class="mord">)</span></span></span></span></span></span></p><p>根据需求定理，一种商品的价格或者成本和需求量呈现反向变动关系，于是我们知道：</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable width="100%"><mtr><mtd width="50%"></mtd><mtd><mrow><mo fence="true">{</mo><mtable rowspacing="0.36em" columnalign="left left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msup><mi>H</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo stretchy="false">(</mo><mi>c</mi><mo stretchy="false">)</mo><mo>&lt;</mo><mn>0</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msup><mi>F</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo stretchy="false">(</mo><mi>k</mi><mo stretchy="false">)</mo><mo>&lt;</mo><mn>0</mn></mrow></mstyle></mtd></mtr></mtable></mrow></mtd><mtd width="50%"></mtd><mtd><mtext>(2)</mtext></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{cases}H&#x27;(c)&lt;0\\F&#x27;(k)&lt;0\end{cases} \tag{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3em;vertical-align:-1.25em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size4">{</span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.08125em;">H</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">c</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">0</span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="tag"><span class="strut" style="height:3em;vertical-align:-1.25em;"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">2</span></span><span class="mord">)</span></span></span></span></span></span></p><p>但在双边市场中，生产者与消费者无法直接进行交易。只有通过平台，交易才能进行。</p><p>因此我们假设匹配到对方的概率与对方的人数正相关，设<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mi>M</mi></msub></mrow><annotation encoding="application/x-tex">P_M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>和<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>P</mi><mi>N</mi></msub></mrow><annotation encoding="application/x-tex">P_N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>分别为生产者和消费者匹配到对方的概率，我们有：</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable width="100%"><mtr><mtd width="50%"></mtd><mtd><mrow><mo fence="true">{</mo><mtable rowspacing="0.16em" columnalign="left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mfrac><mrow><mi mathvariant="normal">d</mi><msub><mi>P</mi><mi>M</mi></msub></mrow><mrow><mi mathvariant="normal">d</mi><mi>n</mi></mrow></mfrac><mo>&gt;</mo><mn>0</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mfrac><mrow><mi mathvariant="normal">d</mi><msub><mi>P</mi><mi>N</mi></msub></mrow><mrow><mi mathvariant="normal">d</mi><mi>m</mi></mrow></mfrac><mo>&gt;</mo><mn>0</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>0</mn><mo>&lt;</mo><msub><mi>P</mi><mi>M</mi></msub><mo separator="true">,</mo><msub><mi>P</mi><mi>N</mi></msub><mo>&lt;</mo><mn>1</mn></mrow></mstyle></mtd></mtr></mtable></mrow></mtd><mtd width="50%"></mtd><mtd><mtext>(3)</mtext></mtd></mtr></mtable><annotation encoding="application/x-tex">\left.\left\{\begin{array}{l}\frac{\mathrm{d}P_M}{\mathrm{d}n}&gt;0\\\frac{\mathrm{d}P_N}{\mathrm{d}m}&gt;0\\0&lt;P_M,P_N&lt;1\end{array}\right.\right. \tag{3}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3.7128em;vertical-align:-1.6064em;"></span><span class="minner"><span class="mopen nulldelimiter"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-2.5em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎩</span></span></span><span style="top:-2.492em;"><span class="pstrut" style="height:3.15em;"></span><span style="height:0.016em;width:0.8889em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.8889em" height="0.016em" style="width:0.8889em" viewbox="0 0 888.89 16" preserveaspectratio="xMinYMin"><path d="M384 0 H504 V16 H384z M384 0 H504 V16 H384z"/></svg></span></span><span style="top:-3.15em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎨</span></span></span><span style="top:-4.292em;"><span class="pstrut" style="height:3.15em;"></span><span style="height:0.016em;width:0.8889em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.8889em" height="0.016em" style="width:0.8889em" viewbox="0 0 888.89 16" preserveaspectratio="xMinYMin"><path d="M384 0 H504 V16 H384z M384 0 H504 V16 H384z"/></svg></span></span><span style="top:-4.3em;"><span class="pstrut" style="height:3.15em;"></span><span class="delimsizinginner delim-size4"><span>⎧</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.1064em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8964em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathrm mtight">d</span><span class="mord mathnormal mtight">n</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.4103em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathrm mtight">d</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3567em;margin-left:-0.1389em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1433em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">0</span></span></span><span style="top:-2.9536em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8964em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathrm mtight">d</span><span class="mord mathnormal mtight">m</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.4103em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathrm mtight">d</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3567em;margin-left:-0.1389em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1433em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">0</span></span></span><span style="top:-1.7536em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.6064em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose nulldelimiter"></span></span></span><span class="tag"><span class="strut" style="height:3.7128em;vertical-align:-1.6064em;"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">3</span></span><span class="mord">)</span></span></span></span></span></span></p><p>假设生产者和消费者只能通过平台完成交易，即双方不会形成多次合作的关系，根据3式我们可以得出生产者的利润函数为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>π</mi><mi>M</mi></msub></mrow><annotation encoding="application/x-tex">\pi_M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，消费者的利润函数为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>π</mi><mi>N</mi></msub></mrow><annotation encoding="application/x-tex">\pi_N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>.其中我们设<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi></mrow><annotation encoding="application/x-tex">v</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span></span></span></span>与<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">s</span></span></span></span>分别为生产者与消费者获得的利润。</p><p>并且假设当生产者或消费者的利润为0时会自动退出市场。根据以上假设我们有：</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable width="100%"><mtr><mtd width="50%"></mtd><mtd><mrow><msub><mi>π</mi><mi>M</mi></msub><mo>=</mo><mrow><mo fence="true">{</mo><mtable rowspacing="0.36em" columnalign="left left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mi>P</mi><mi>M</mi></msub><mi>v</mi><mo>−</mo><mi>c</mi><mo separator="true">,</mo><msub><mi>P</mi><mi>M</mi></msub><mi>v</mi><mo>&gt;</mo><mi>c</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>0</mn><mo separator="true">,</mo><msub><mi>P</mi><mi>M</mi></msub><mi>v</mi><mo>⩽</mo><mi>c</mi></mrow></mstyle></mtd></mtr></mtable></mrow></mrow></mtd><mtd width="50%"></mtd><mtd><mtext>(4)</mtext></mtd></mtr></mtable><annotation encoding="application/x-tex">\pi_M=\begin{cases}P_Mv-c, P_Mv&gt;c\\0, P_Mv\leqslant c\end{cases} \tag{4}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:3em;vertical-align:-1.25em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size4">{</span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal">c</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal">c</span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel amsrm">⩽</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal">c</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="tag"><span class="strut" style="height:3em;vertical-align:-1.25em;"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">4</span></span><span class="mord">)</span></span></span></span></span></span></p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable width="100%"><mtr><mtd width="50%"></mtd><mtd><mrow><msub><mi>π</mi><mi>N</mi></msub><mo>=</mo><mrow><mo fence="true">{</mo><mtable rowspacing="0.36em" columnalign="left left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><msub><mi>P</mi><mi>N</mi></msub><mi>s</mi><mo>−</mo><mi>k</mi><mo separator="true">,</mo><msub><mi>P</mi><mi>N</mi></msub><mi>s</mi><mo>&gt;</mo><mi>k</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>0</mn><mo separator="true">,</mo><msub><mi>P</mi><mi>N</mi></msub><mi>s</mi><mo>⩽</mo><mi>k</mi></mrow></mstyle></mtd></mtr></mtable></mrow></mrow></mtd><mtd width="50%"></mtd><mtd><mtext>(5)</mtext></mtd></mtr></mtable><annotation encoding="application/x-tex">\pi_N=\begin{cases}P_Ns-k,P_Ns&gt;k\\0,P_Ns\leqslant k\end{cases} \tag{5}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:3em;vertical-align:-1.25em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size4">{</span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel amsrm">⩽</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="tag"><span class="strut" style="height:3em;vertical-align:-1.25em;"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">5</span></span><span class="mord">)</span></span></span></span></span></span></p><p>从4和5可知双方所获得的利润均与匹配概率正相关，也就是和对方的人数正相关，可知双方存在着跨边网络外部性。</p><p>接下来我们开始讨论双方的人数问题。</p><p>在双边市场中，一方的成本为生产成本（生产者）或者搜索成本（消费者）与平台所收费用之和。假设生产成本（生产者）和搜索成本（消费者）固定，则平台向生产者收取的费用<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi></mrow><annotation encoding="application/x-tex">c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">c</span></span></span></span>和向消费者收取的费用<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span>作为变量。</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable width="100%"><mtr><mtd width="50%"></mtd><mtd><mrow><mo fence="true">{</mo><mtable rowspacing="0.36em" columnalign="left left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>m</mi><mo>=</mo><mi>m</mi><mo stretchy="false">(</mo><mi>n</mi><mo separator="true">,</mo><mi>c</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>n</mi><mo>=</mo><mi>n</mi><mo stretchy="false">(</mo><mi>m</mi><mo separator="true">,</mo><mi>k</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr></mtable></mrow></mtd><mtd width="50%"></mtd><mtd><mtext>(6)</mtext></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{cases}m=m(n,c)\\n=n(m,k)\end{cases} \tag{6}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3em;vertical-align:-1.25em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size4">{</span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal">m</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">c</span><span class="mclose">)</span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal">n</span><span class="mopen">(</span><span class="mord mathnormal">m</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="tag"><span class="strut" style="height:3em;vertical-align:-1.25em;"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">6</span></span><span class="mord">)</span></span></span></span></span></span></p><p>并且</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable width="100%"><mtr><mtd width="50%"></mtd><mtd><mrow><mo fence="true">{</mo><mtable rowspacing="0.36em" columnalign="left left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mfrac><mrow><mi mathvariant="normal">∂</mi><mi>m</mi></mrow><mrow><mi mathvariant="normal">∂</mi><mi>n</mi></mrow></mfrac><mo>&gt;</mo><mn>0</mn><mo separator="true">,</mo><mfrac><mrow><mi mathvariant="normal">∂</mi><mi>m</mi></mrow><mrow><mi mathvariant="normal">∂</mi><mi>c</mi></mrow></mfrac><mo>&lt;</mo><mn>0</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mfrac><mrow><mi mathvariant="normal">∂</mi><mi>n</mi></mrow><mrow><mi mathvariant="normal">∂</mi><mi>m</mi></mrow></mfrac><mo>&gt;</mo><mn>0</mn><mo separator="true">,</mo><mfrac><mrow><mi mathvariant="normal">∂</mi><mi>n</mi></mrow><mrow><mi mathvariant="normal">∂</mi><mi>k</mi></mrow></mfrac><mo>&lt;</mo><mn>0</mn></mrow></mstyle></mtd></mtr></mtable></mrow></mtd><mtd width="50%"></mtd><mtd><mtext>(7)</mtext></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{cases}\frac{\partial m}{\partial n}&gt;0,\frac{\partial m}{\partial c}&lt;0\\\frac{\partial n}{\partial m}&gt;0,\frac{\partial n}{\partial k}&lt;0\end{cases} \tag{7}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3em;vertical-align:-1.25em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size4">{</span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8801em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight" style="margin-right:0.05556em;">∂</span><span class="mord mathnormal mtight">n</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight" style="margin-right:0.05556em;">∂</span><span class="mord mathnormal mtight">m</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8801em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight" style="margin-right:0.05556em;">∂</span><span class="mord mathnormal mtight">c</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight" style="margin-right:0.05556em;">∂</span><span class="mord mathnormal mtight">m</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">0</span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8801em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight" style="margin-right:0.05556em;">∂</span><span class="mord mathnormal mtight">m</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight" style="margin-right:0.05556em;">∂</span><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8801em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight" style="margin-right:0.05556em;">∂</span><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight" style="margin-right:0.05556em;">∂</span><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="tag"><span class="strut" style="height:3em;vertical-align:-1.25em;"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">7</span></span><span class="mord">)</span></span></span></span></span></span></p><p>记<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi></mrow><annotation encoding="application/x-tex">c</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">c</span></span></span></span>和<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span>分别为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>p</mi><mi>M</mi></msub></mrow><annotation encoding="application/x-tex">p_M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>和<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>p</mi><mi>N</mi></msub></mrow><annotation encoding="application/x-tex">p_N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>,并令<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mo>=</mo><msub><mi>p</mi><mi>M</mi></msub><mo>+</mo><msub><mi>p</mi><mi>N</mi></msub></mrow><annotation encoding="application/x-tex">p = p_M + p_N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，则平台获得的利润为：</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable width="100%"><mtr><mtd width="50%"></mtd><mtd><mrow><mi>π</mi><mo>=</mo><mi>m</mi><msub><mi>p</mi><mi>M</mi></msub><msub><mi>P</mi><mi>M</mi></msub><mo>+</mo><mi>n</mi><msub><mi>p</mi><mi>N</mi></msub><msub><mi>P</mi><mi>N</mi></msub></mrow></mtd><mtd width="50%"></mtd><mtd><mtext>(8)</mtext></mtd></mtr></mtable><annotation encoding="application/x-tex">\pi=mp_MP_M+np_NP_N \tag{8}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">m</span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">n</span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span><span class="tag"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">8</span></span><span class="mord">)</span></span></span></span></span></span></p><p>并且考虑到市场出清时，生产者所出售的产品数量与消费者所购买的产品数量相等，即：</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable width="100%"><mtr><mtd width="50%"></mtd><mtd><mrow><mi>m</mi><msub><mi>P</mi><mi>M</mi></msub><mo>=</mo><mi>n</mi><msub><mi>P</mi><mi>N</mi></msub></mrow></mtd><mtd width="50%"></mtd><mtd><mtext>(9)</mtext></mtd></mtr></mtable><annotation encoding="application/x-tex">mP_M=nP_N \tag{9}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord mathnormal">m</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord mathnormal">n</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span><span class="tag"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">9</span></span><span class="mord">)</span></span></span></span></span></span></p><p>故<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>π</mi><mo>=</mo><mi>m</mi><msub><mi>P</mi><mi>M</mi></msub><mo stretchy="false">(</mo><msub><mi>p</mi><mi>M</mi></msub><mo>+</mo><msub><mi>p</mi><mi>N</mi></msub><mo stretchy="false">)</mo><mo>=</mo><mi>m</mi><msub><mi>P</mi><mi>m</mi></msub><mi>p</mi><mo>=</mo><mi>n</mi><msub><mi>P</mi><mi>n</mi></msub><mi>p</mi></mrow><annotation encoding="application/x-tex">\pi = mP_M(p_M+p_N)=mP_mp = nP_np</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">m</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">m</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal">p</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">n</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal">p</span></span></span></span>.可知平台利润与<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">m</span></span></span></span>、<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span>成正比。记最终成交量为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>=</mo><mi>t</mi><mi>m</mi><mi>n</mi></mrow><annotation encoding="application/x-tex">N = tmn</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="mord mathnormal">t</span><span class="mord mathnormal">mn</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi></mrow><annotation encoding="application/x-tex">t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="mord mathnormal">t</span></span></span></span>为大于零的实数，则平台的利润为：</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable width="100%"><mtr><mtd width="50%"></mtd><mtd><mrow><mi>π</mi><mo>=</mo><mi>p</mi><mi>N</mi></mrow></mtd><mtd width="50%"></mtd><mtd><mtext>(10)</mtext></mtd></mtr></mtable><annotation encoding="application/x-tex">\pi = pN \tag{10}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">pN</span></span><span class="tag"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">10</span></span><span class="mord">)</span></span></span></span></span></span></p><p>为解决双边市场定价中最重要的价格分配问题，接下来我们介绍一个简单的优化模型用于对双边市场价格机制进行阐述。</p><p>在双边市场中，平台企业的目标是获得最大化利润。在对每笔交易收取费用一定的情况下，有：</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable width="100%"><mtr><mtd width="50%"></mtd><mtd><mrow><munder><mrow><mi>max</mi><mo>⁡</mo></mrow><mrow><msub><mi>p</mi><mi>M</mi></msub><mo separator="true">,</mo><msub><mi>p</mi><mi>N</mi></msub></mrow></munder><mi>π</mi><mo>=</mo><mi>t</mi><mi>m</mi><mi>n</mi><mi>p</mi></mrow></mtd><mtd width="50%"></mtd><mtd><mtext>(11)</mtext></mtd></mtr></mtable><annotation encoding="application/x-tex">\max_{p_M, p_N}\pi=tmnp \tag{11}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2667em;vertical-align:-0.8361em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.4306em;"><span style="top:-2.4em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3567em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1433em;"><span></span></span></span></span></span></span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3567em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1433em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop">max</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8361em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8095em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">t</span><span class="mord mathnormal">mn</span><span class="mord mathnormal">p</span></span><span class="tag"><span class="strut" style="height:1.5861em;vertical-align:-0.8361em;"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">11</span></span><span class="mord">)</span></span></span></span></span></span></p><p>定义双边的需求价格弹性分别为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>η</mi><mi>m</mi></msub></mrow><annotation encoding="application/x-tex">\eta_m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">η</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>与<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>η</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">\eta_n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">η</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable width="100%"><mtr><mtd width="50%"></mtd><mtd><mrow><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><msub><mi>η</mi><mi>m</mi></msub><mo>=</mo><mfrac><mrow><mi mathvariant="normal">∂</mi><mi>m</mi><mi mathvariant="normal">/</mi><mi>m</mi></mrow><mrow><mi mathvariant="normal">∂</mi><msub><mi>p</mi><mi>M</mi></msub><mi mathvariant="normal">/</mi><msub><mi>p</mi><mi>M</mi></msub></mrow></mfrac></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><msub><mi>η</mi><mi>n</mi></msub><mo>=</mo><mfrac><mrow><mi mathvariant="normal">∂</mi><mi>n</mi><mi mathvariant="normal">/</mi><mi>n</mi></mrow><mrow><mi mathvariant="normal">∂</mi><msub><mi>p</mi><mi>N</mi></msub><mi mathvariant="normal">/</mi><msub><mi>p</mi><mi>N</mi></msub></mrow></mfrac></mrow></mstyle></mtd></mtr></mtable><mspace linebreak="newline"></mspace></mrow></mtd><mtd width="50%"></mtd><mtd><mtext>(12)</mtext></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned}&amp;\eta_{m}=\frac{\partial m/m}{\partial p_{M}/p_{M}} \\&amp;\eta_{n}=\frac{\partial n / n}{\partial p_{N} / p_{N}}\end{aligned}  \tag{12}\\</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:5.326em;vertical-align:-2.413em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.913em;"><span style="top:-4.913em;"><span class="pstrut" style="height:3.427em;"></span><span class="mord"></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.427em;"></span><span class="mord"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.413em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.913em;"><span style="top:-4.913em;"><span class="pstrut" style="height:3.427em;"></span><span class="mord"><span class="mord"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">η</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord" style="margin-right:0.05556em;">∂</span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">/</span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord" style="margin-right:0.05556em;">∂</span><span class="mord mathnormal">m</span><span class="mord">/</span><span class="mord mathnormal">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.427em;"></span><span class="mord"><span class="mord"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">η</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord" style="margin-right:0.05556em;">∂</span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">/</span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord" style="margin-right:0.05556em;">∂</span><span class="mord mathnormal">n</span><span class="mord">/</span><span class="mord mathnormal">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.413em;"><span></span></span></span></span></span></span></span></span><span class="mspace newline"></span><span class="tag"><span class="strut" style="height:5.326em;vertical-align:-2.413em;"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">12</span></span><span class="mord">)</span></span></span></span></span></span></p><p>定义跨边网络外部性强度分别为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>η</mi><mi>m</mi></msub></mrow><annotation encoding="application/x-tex">\eta_m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">η</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>和<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>η</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">\eta_n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">η</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>.由于消费者和生产者之间的网络外部性往往为复杂网络外部性，故此处的<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>η</mi><mi>m</mi></msub></mrow><annotation encoding="application/x-tex">\eta_m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">η</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>与<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>η</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">\eta_n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">η</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>并不互为相反数。</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable width="100%"><mtr><mtd width="50%"></mtd><mtd><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><msub><mi>e</mi><mi>m</mi></msub><mo>=</mo><mfrac><mrow><mi mathvariant="normal">∂</mi><mi>m</mi><mi mathvariant="normal">/</mi><mi>m</mi></mrow><mrow><mi mathvariant="normal">∂</mi><mi>n</mi><mi mathvariant="normal">/</mi><mi>n</mi></mrow></mfrac></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><msub><mi>e</mi><mi>n</mi></msub><mo>=</mo><mfrac><mrow><mi mathvariant="normal">∂</mi><mi>n</mi><mi mathvariant="normal">/</mi><mi>n</mi></mrow><mrow><mi mathvariant="normal">∂</mi><mi>m</mi><mi mathvariant="normal">/</mi><mi>m</mi></mrow></mfrac></mrow></mstyle></mtd></mtr></mtable></mtd><mtd width="50%"></mtd><mtd><mtext>(13)</mtext></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned}&amp;e_{m}=\frac{\partial m/m}{\partial n/n} \\&amp;e_{n}=\frac{\partial n / n}{\partial m / m}\end{aligned} \tag{13}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:5.326em;vertical-align:-2.413em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.913em;"><span style="top:-4.913em;"><span class="pstrut" style="height:3.427em;"></span><span class="mord"></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.427em;"></span><span class="mord"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.413em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.913em;"><span style="top:-4.913em;"><span class="pstrut" style="height:3.427em;"></span><span class="mord"><span class="mord"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord" style="margin-right:0.05556em;">∂</span><span class="mord mathnormal">n</span><span class="mord">/</span><span class="mord mathnormal">n</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord" style="margin-right:0.05556em;">∂</span><span class="mord mathnormal">m</span><span class="mord">/</span><span class="mord mathnormal">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.427em;"></span><span class="mord"><span class="mord"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord" style="margin-right:0.05556em;">∂</span><span class="mord mathnormal">m</span><span class="mord">/</span><span class="mord mathnormal">m</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord" style="margin-right:0.05556em;">∂</span><span class="mord mathnormal">n</span><span class="mord">/</span><span class="mord mathnormal">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.413em;"><span></span></span></span></span></span></span></span></span><span class="tag"><span class="strut" style="height:5.326em;vertical-align:-2.413em;"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">13</span></span><span class="mord">)</span></span></span></span></span></span></p><p>假设<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>η</mi></mrow><annotation encoding="application/x-tex">\eta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">η</span></span></span></span>与<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>e</mi></mrow><annotation encoding="application/x-tex">e</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">e</span></span></span></span>恒定，则增大一单位对生产者价格<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>p</mi><mi>M</mi></msub></mrow><annotation encoding="application/x-tex">p_M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，生产者数量<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">m</span></span></span></span>的变动量为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>η</mi><mi>M</mi></msub><msub><mi>p</mi><mi>M</mi></msub></mrow><annotation encoding="application/x-tex">{\eta_M} p_M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">η</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，从而可知增加<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>p</mi><mi>M</mi></msub></mrow><annotation encoding="application/x-tex">p_M</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>对总交易量的边际影响为：</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable width="100%"><mtr><mtd width="50%"></mtd><mtd><mrow><mo stretchy="false">(</mo><mn>1</mn><mo>+</mo><msub><mi>e</mi><mi>n</mi></msub><mo stretchy="false">)</mo><msub><mi>n</mi><mi>m</mi></msub><msub><mi>p</mi><mi>M</mi></msub></mrow></mtd><mtd width="50%"></mtd><mtd><mtext>(14)</mtext></mtd></mtr></mtable><annotation encoding="application/x-tex">(1+e_n)n_mp_M \tag{14}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span><span class="tag"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">14</span></span><span class="mord">)</span></span></span></span></span></span></p><p>当<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span></span></span></span>一定的情况下并达到均衡时，生产者和消费者提供的边际利润相等，平台利润最大化：</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable width="100%"><mtr><mtd width="50%"></mtd><mtd><mrow><mo stretchy="false">(</mo><mn>1</mn><mo>+</mo><msub><mi>e</mi><mi>n</mi></msub><mo stretchy="false">)</mo><msub><mi>η</mi><mi>m</mi></msub><msub><mi>p</mi><mi>M</mi></msub><mo>=</mo><mo stretchy="false">(</mo><mn>1</mn><mo>+</mo><msub><mi>e</mi><mi>m</mi></msub><mo stretchy="false">)</mo><msub><mi>η</mi><mi>n</mi></msub><msub><mi>p</mi><mi>N</mi></msub></mrow></mtd><mtd width="50%"></mtd><mtd><mtext>(15)</mtext></mtd></mtr></mtable><annotation encoding="application/x-tex">(1+e_n)\eta_mp_M=(1+e_m)\eta_np_N \tag{15}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">η</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">η</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span><span class="tag"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">15</span></span><span class="mord">)</span></span></span></span></span></span></p><p>即</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable width="100%"><mtr><mtd width="50%"></mtd><mtd><mrow><mfrac><msub><mi>p</mi><mi>M</mi></msub><mrow><mo stretchy="false">(</mo><mn>1</mn><mo>+</mo><msub><mi>e</mi><mi>m</mi></msub><mo stretchy="false">)</mo><msub><mi>η</mi><mi>n</mi></msub></mrow></mfrac><mo>=</mo><mfrac><msub><mi>p</mi><mi>N</mi></msub><mrow><mo stretchy="false">(</mo><mn>1</mn><mo>+</mo><msub><mi>e</mi><mi>n</mi></msub><mo stretchy="false">)</mo><msub><mi>η</mi><mi>m</mi></msub></mrow></mfrac></mrow></mtd><mtd width="50%"></mtd><mtd><mtext>(16)</mtext></mtd></mtr></mtable><annotation encoding="application/x-tex">\frac{p_M}{(1+e_m)\eta_n}=\frac{p_N}{(1+e_n)\eta_m} \tag{16}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.0436em;vertical-align:-0.936em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1076em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">η</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.0436em;vertical-align:-0.936em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1076em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">η</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="tag"><span class="strut" style="height:2.0436em;vertical-align:-0.936em;"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">16</span></span><span class="mord">)</span></span></span></span></span></span></p><p>由于双方的利润满足大于零的条件，可得平台对双边收取费用的约束条件：</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable width="100%"><mtr><mtd width="50%"></mtd><mtd><mrow><mo fence="true">{</mo><mtable rowspacing="0.36em" columnalign="left left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>k</mi><mo>+</mo><msub><mi>p</mi><mi>n</mi></msub><mo>&lt;</mo><mi>s</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mi>c</mi><mo>+</mo><msub><mi>p</mi><mi>m</mi></msub><mo>&lt;</mo><mi>ν</mi></mrow></mstyle></mtd></mtr></mtable></mrow></mtd><mtd width="50%"></mtd><mtd><mtext>(17)</mtext></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{cases}k+p_n&lt;s\\c+p_m&lt;\nu\end{cases} \tag{17}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3em;vertical-align:-1.25em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size4">{</span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal">s</span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord mathnormal">c</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.06366em;">ν</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="tag"><span class="strut" style="height:3em;vertical-align:-1.25em;"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">17</span></span><span class="mord">)</span></span></span></span></span></span></p><p>从式16可知，双边市场的价格分配与双边价格弹性和跨边网络外部性有关。</p><p>双边价格弹性。在不考虑跨边网络外部性的情况下，平台收取的费用与其需求价格弹性呈现负相关关系。与传统市场相比，双边市场价格的不对称更为显著，双边市场甚至会以低于边际成本的方式对于弹性较大的一方进行定价。</p><p>跨边网络外部性。例如当消费者数量变动时，若跨边网络外部性增强，消费者数量变动所引起的生产者数量变动量<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>e</mi><mi>m</mi></msub></mrow><annotation encoding="application/x-tex">e_m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>会增大，使平台对生产者收取的费用上升，即市场价格结构会向跨边网络外部性强度较大的一方倾斜。</p><h3 id="补贴策略">补贴策略</h3><h4 id="边际成本">边际成本</h4><p>前文所提出的模型尚未考虑平台企业所付出的成本。假设平台每完成一笔交易，都需要向每个生产者支付<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>c</mi><mi>m</mi></msub></mrow><annotation encoding="application/x-tex">c_m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，向每个消费者支付<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>c</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">c_n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，可以得到平台在完成交易时的利润函数：</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable width="100%"><mtr><mtd width="50%"></mtd><mtd><mrow><mi mathvariant="normal">Π</mi><mo>=</mo><mi>N</mi><mi>p</mi><mo>−</mo><mi>m</mi><msub><mi>c</mi><mi>m</mi></msub><mo>−</mo><mi>n</mi><msub><mi>c</mi><mi>n</mi></msub></mrow></mtd><mtd width="50%"></mtd><mtd><mtext>(18)</mtext></mtd></mtr></mtable><annotation encoding="application/x-tex">\Pi=Np-mc_m-nc_n \tag{18}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">Π</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">Np</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7333em;vertical-align:-0.15em;"></span><span class="mord mathnormal">m</span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord mathnormal">n</span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span><span class="tag"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">18</span></span><span class="mord">)</span></span></span></span></span></span></p><p>当<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>p</mi><mi>m</mi></msub></mrow><annotation encoding="application/x-tex">p_m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>和<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>p</mi><mi>n</mi></msub></mrow><annotation encoding="application/x-tex">p_n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>分别增加一单位时，平台利润分别增大：</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable width="100%"><mtr><mtd width="50%"></mtd><mtd><mrow><mo stretchy="false">(</mo><mn>1</mn><mo>+</mo><msub><mi>e</mi><mi>n</mi></msub><mo stretchy="false">)</mo><msub><mi>η</mi><mi>m</mi></msub><msub><mi>p</mi><mi>M</mi></msub><mi>N</mi><mi>p</mi><mo>−</mo><msub><mi>η</mi><mi>m</mi></msub><msub><mi>p</mi><mi>M</mi></msub><msub><mi>c</mi><mi>m</mi></msub></mrow></mtd><mtd width="50%"></mtd><mtd><mtext>(19)</mtext></mtd></mtr></mtable><annotation encoding="application/x-tex">(1+e_n)\eta_mp_MNp-\eta_mp_Mc_m \tag{19}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">η</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal">Np</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">η</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span><span class="tag"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">19</span></span><span class="mord">)</span></span></span></span></span></span></p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable width="100%"><mtr><mtd width="50%"></mtd><mtd><mrow><mo stretchy="false">(</mo><mn>1</mn><mo>+</mo><msub><mi>e</mi><mi>m</mi></msub><mo stretchy="false">)</mo><msub><mi>n</mi><mi>n</mi></msub><msub><mi>p</mi><mi>N</mi></msub><mi>N</mi><mi>p</mi><mo>−</mo><msub><mi>n</mi><mi>n</mi></msub><msub><mi>p</mi><mi>N</mi></msub><msub><mi>c</mi><mi>n</mi></msub></mrow></mtd><mtd width="50%"></mtd><mtd><mtext>(20)</mtext></mtd></mtr></mtable><annotation encoding="application/x-tex">(1+e_m)n_np_NNp-n_np_Nc_n \tag{20}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal">Np</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span><span class="tag"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">20</span></span><span class="mord">)</span></span></span></span></span></span></p><p>故当市场达到均衡时：</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable width="100%"><mtr><mtd width="50%"></mtd><mtd><mrow><mo stretchy="false">(</mo><mn>1</mn><mo>+</mo><msub><mi>e</mi><mi>n</mi></msub><mo stretchy="false">)</mo><msub><mi>n</mi><mi>m</mi></msub><msub><mi>p</mi><mi>M</mi></msub><mi>N</mi><mi>p</mi><mo>−</mo><msub><mi>n</mi><mi>m</mi></msub><msub><mi>p</mi><mi>M</mi></msub><msub><mi>c</mi><mi>m</mi></msub><mo>=</mo><mo stretchy="false">(</mo><mn>1</mn><mo>+</mo><msub><mi>e</mi><mi>m</mi></msub><mo stretchy="false">)</mo><msub><mi>n</mi><mi>n</mi></msub><msub><mi>p</mi><mi>N</mi></msub><mi>N</mi><mi>p</mi><mo>−</mo><msub><mi>n</mi><mi>n</mi></msub><msub><mi>p</mi><mi>N</mi></msub><msub><mi>c</mi><mi>n</mi></msub></mrow></mtd><mtd width="50%"></mtd><mtd><mtext>(21)</mtext></mtd></mtr></mtable><annotation encoding="application/x-tex">(1+e_n)n_mp_MNp-n_mp_Mc_m=(1+e_m)n_np_NNp-n_np_Nc_n  \tag{21}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal">Np</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal">Np</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span><span class="tag"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">21</span></span><span class="mord">)</span></span></span></span></span></span></p><p>化简可得：</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable width="100%"><mtr><mtd width="50%"></mtd><mtd><mrow><mfrac><msub><mi>p</mi><mi>M</mi></msub><msub><mi>p</mi><mi>N</mi></msub></mfrac><mo>=</mo><mfrac><msub><mi>η</mi><mi>n</mi></msub><msub><mi>η</mi><mi>m</mi></msub></mfrac><mfrac><mrow><mo stretchy="false">(</mo><mn>1</mn><mo>+</mo><msub><mi>e</mi><mi>m</mi></msub><mo stretchy="false">)</mo><mi>N</mi><mi>p</mi><mo>−</mo><msub><mi>c</mi><mi>n</mi></msub></mrow><mrow><mo stretchy="false">(</mo><mn>1</mn><mo>+</mo><msub><mi>e</mi><mi>n</mi></msub><mo stretchy="false">)</mo><mi>N</mi><mi>p</mi><mo>−</mo><msub><mi>c</mi><mi>m</mi></msub></mrow></mfrac></mrow></mtd><mtd width="50%"></mtd><mtd><mtext>(22)</mtext></mtd></mtr></mtable><annotation encoding="application/x-tex">\frac{p_M}{p_N}=\frac{\eta_n}{\eta_m}\frac{(1+e_m)Np-c_n}{(1+e_n)Np-c_m} \tag{22}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.988em;vertical-align:-0.8804em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1076em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8804em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.363em;vertical-align:-0.936em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1076em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">η</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">η</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.8804em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.427em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord mathnormal">Np</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord mathnormal">Np</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span><span class="tag"><span class="strut" style="height:2.363em;vertical-align:-0.936em;"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">22</span></span><span class="mord">)</span></span></span></span></span></span></p><p>可知，由于受到双边市场价格分配机制的影响，价格并不等于边际成本。并且由于网络外部性，双边市场中的价格结构必然是非对称的，平台会对需求价格弹性较低的一方收取较高的价格，即通过这种倾斜式的价格结构来获取超额利润。</p><h4 id="“先低后高”定价与掠夺性定价的争论">“先低后高”定价与掠夺性定价的争论</h4><p>在传统的单边市场中存在着掠夺式定价。掠夺式定价其实是一个不稳定的市场行为，是一个主导企业在为压制竞争对手所采取的阶段性行为。在单边市场中，主导企业为了获得竞争优势，利用其自身能够承受“价格战”带来的利润损失的特性，让市场价格达到一个很低的水平，从而将竞争对手排挤出市场。当企业获得垄断地位后，再通过提高价格的方式获得大量利润。</p><p>但能否界定双边市场中低于边际成本的定价方式是否为掠夺性定价仍然存在争议。然而这种“先低后高”的定价模式在双边市场中是一个理性稳定的在均衡状态下的行为，即使平台已经度过了初创期也如此。平台企业在行业内很难有较大的竞争优势，较难取得市场上的垄断地位。</p><h4 id="平台的交叉补贴和扶持策略">平台的交叉补贴和扶持策略</h4><p>交叉补贴是指企业利用在某个市场上的利润来支持它在另一个市场上发展的行为。在传统的单边市场理论中，由于交叉补贴一般采取掠夺式定价手段，极大损害了市场效率和消费者福利，是一种不正当的竞争行为。</p><p>但在双边市场中，交叉补贴的现象很常见。为了提高用户参与数量实现盈利，平台往往会对产品和服务供给者进行补贴和扶持。当然也存在生产者补贴消费者的情况，对于提供补贴的生产者而言，其进入市场的成本得到了降低，并没有带来负担。例如，求职网站往往对于上网求职者收取负价格，也就是补贴上网求职者。这样的补贴行为有利于提高用户数量。</p><h2 id="三、双边市场的经典案例及分析">三、双边市场的经典案例及分析</h2><p>阿里巴巴是中国第一批进行电子商务的平台企业，其所创建的淘宝网是我国网购平台的代表。阿里巴巴作为平台企业的典型代表，借助淘宝网这一交易平台，将企业、消费者等众多参与者连接起来，通过统一交易标准，为双边用户提供服务，最终形成双边市场。</p><h4 id="淘宝网的发展历程">淘宝网的发展历程</h4><p>淘宝网从2003开始起步，发展至今经历了四个阶段。</p><p>第一阶段为2003-2006年，为了提高用户规模，此时阿里巴巴采取了免费补贴策略。在2003年，中国的网购市场大部分被eBay占据。此时的淘宝网跟随了eBay的步伐，并根据其本土企业的特点，在用户服务等方面都进行了区别于eBay的改进，使其更符合中国人的使用习惯。</p><p>第二阶段为2006-2008年。在2006年时，网络效应开始显现，淘宝网采取了持续免费的策略，以保证用户规模的持续扩张，最终奠定了其强大的市场地位。接下来淘宝网考虑了盈利问题。在2006年时，淘宝网实行了第一项收费服务“招财进宝”，但因其会导致小成本用户的流失而遭到了各方的反对。</p><p>第三阶段为2008-2011年。此时的淘宝网采取了开放平台战略，确定了盈利方式。淘宝网避免了常见的收费项目，对卖家的大部分增值服务进行收费，并且用户可以在开放平台进行开发性创业。这些成为了淘宝网盈利的增长点。</p><p>第四阶段为2011年至今，淘宝网对市场进行了细分，并通过支付宝的发展进入了金融市场，为金融行业注入了新鲜血夜。同时淘宝网也在改变着中国人的消费方式，其创建的“双11”购物狂欢节深刻影响着中国的网购市场。</p><h4 id="淘宝网作为平台企业发展战略的分析">淘宝网作为平台企业发展战略的分析</h4><p>淘宝网从一开始就认识到了传统市场的地域限制和小众消费的强烈诉求，确定了双边市场的发展目标，明确了其作为平台核心的价值和其所要发挥的中介功能。</p><p>在定价策略上，为了解决平台企业发展所需要的大规模用户数量和高度的用户黏性的问题，淘宝网在初创时期一直通过价格结构的调整来解决，即通过价格优势来巩固竞争中取得的有利地位。淘宝网采取了补贴模式，但也有“招财进宝”的失误。只有灵活运用补贴策略，才能在买卖双方之间形成一种均衡，进而持续激发网络效应。</p><p>平台企业的转折点便是企业可存活下来的用户“临界数量”。淘宝网在2006年之后用户数量达到了临界数量，网络效应能够持续递增。此时用户自行产生的网络效应就可以吸引到更多人来加入，形成了正反馈机制以及“赢者通吃”的市场现象。</p><p>淘宝网还通过开放战略，对客户需求进行了进一步的发掘，开发出了针对性的个性化推送服务。这样的策略细化了市场需求，从而进一步降低了消费者的搜索成本，使用户黏性得到了提高。</p><h1>第四节  平台垄断</h1><h2 id="一、平台垄断的产生及影响">一、平台垄断的产生及影响</h2><h3 id="平台垄断的定义和生成逻辑">平台垄断的定义和生成逻辑</h3><p>平台垄断主要表现形式为平台企业通过垄断协议、滥用市场支配地位、经营者集中、滥用行政权力以排除或限制竞争等手段，实现垄断行为进而损害供应商和消费者的合法权益。</p><p>数据壁垒和创新壁垒形成了市场壁垒，是平台企业实施垄断的必要条件。只有在高市场进入壁垒的市场中，在位企业才能实施垄断。</p><p>当平台企业拥有了市场支配地位，为了维持其地位，会通过排他性协议、捆绑销售等垄断举动进一步提高市场壁垒，形成平台垄断。例如腾讯在2016年收购中国音乐集团股权，收购后腾讯占有的独家曲库资源超过80%，有可能通过一些列版权付费模式提高市场进入壁垒。我国市场监管总局认为其存在垄断行为，并采取了相应措施。</p><h3 id="平台垄断的特征及表现形式">平台垄断的特征及表现形式</h3><p>除了平台企业的共有特征，有垄断行为的平台企业通常具有以下特征</p><h4 id="歧视性定价策略">歧视性定价策略</h4><p>在数字经济时代，平台企业比以往更容易获得双边用户的多种信息，这为平台企业进行“用户画像”提供了前所未有的便利。由于平台企业的边际成本较低，按照边际成本进行定价与市场规律不符，因此平台企业会利用其数据优势实行歧视性定价。与完全垄断定价相比，平台企业的歧视性定价满足了消费者的需求偏好。同时，因为歧视性定价照顾了对价格较为敏感的消费者，实现了对“长尾市场”的全覆盖，社会福利水平也得到了提高。</p><p>平台企业可回溯消费者的购买历史，为消费者提供定制化的折扣和商品组合。有研究和事实显示，平台企业可能会对品牌忠诚度较高的消费者收取较高的价格，产生“大数据杀熟”现象。例如老用户比新用户贵，价格不敏感的人比价格敏感的人贵等。相较于传统经济学中的价格歧视，这种借助算法实现的价格歧视更具有隐蔽性。</p><p>虽然平台企业的歧视性定价提高了社会福利水平，但剥夺了全部的消费者福利，同时也侵害了消费者的隐私数据。</p><h4 id="跨市场竞争">跨市场竞争</h4><h5 id="自我优待">自我优待</h5><p>自我优待是指平台企业利用其市场地位差异化对待自营业务和商业用户业务，是一种滥用自身市场支配地位的行为。平台会利用其具有的海量用户数据进行数据垄断，在网络流量上对自身的产品进行补贴。例如Google要求搭载Android操作系统的硬件制造商将Google作为默认的搜索引擎，同时给设备制造商提供奖励。</p><p>平台的自我优待行为正面效应极为微小，主要为负面效应。自我优待破坏了市场的公平竞争秩序，使其他经营者处于不利地位。面对这样的问题，欧盟的《数字市场法》提出了“数字守门人”制度。数字守门人是在市场中扮演者特别重要角色的平台，需要履行相应的义务。这在一定程度上能够维持市场的公平竞争秩序，防止平台企业自我优待行为的发生。</p><h5 id="兼并">兼并</h5><p>垄断平台会采取横向或纵向的方式，甚至使用来自资本市场的支持打压市场上的竞争者，实现恶意兼并。已有的研究发现，选择横向兼并扩张市场份额是平台企业的严格占优策略。而近年来，平台兼并问题也引起了人们的注意。例如，2015年美团并购大众点评，2016年滴滴打车并购Uber中国等。在国外，有亚马逊恶意收购Quidsi（美国电子商务企业）等例子。</p><p>一方面，由于平台掌握了巨量的流量资源，大型平台往往会投资甚至并购初创企业；另一方面如果平台对自己的公司提供补贴，将损害市场上其他企业的利益。</p><p>与平台企业的歧视性定价相似，横向兼并可以提高社会福利水平，但是这并不符合帕累托优化原则。为了避免平台垄断造成商家的福利损失，应当对合并后的平台进行严格的限制。</p><h4 id="不稳定的垄断结构">不稳定的垄断结构</h4><p>不同于自然垄断等较为稳定的结构，大量的潜在竞争者存在于平台市场中，使得垄断结构不稳定。例如在互联网市场中，由于其具有较低的进入壁垒，在主流市场之外的长尾市场中，存在着大量的中小型平台企业，同时也形成了垄断平台与大量中小型平台企业共存的分层式垄断竞争结构。</p><p>并且由于平台内用户的转移成本较低，处于优势地位的平台企业的市场份额的优势并不稳定。同时，由于垄断者还面临着来自于其他平台市场中的垄断者的跨市场竞争，因此在市场中表现为垄断与竞争并存的结构。</p><h4 id="数据要素垄断">数据要素垄断</h4><p>平台垄断与数据垄断之间存在极为密切的关联，在数字经济的视角下数据垄断主要体现为用户流量垄断、算法技术垄断和数据要素垄断。平台持有的数据量与其用户量呈现正相关关系，即用户越多，平台的数据量越大。如果平台企业在数据持有上占据垄断地位，那么就能够实现用户的注意力垄断。而拥有大量数据的平台能够更快地迭代开发算法技术，获得更能够满足用户偏好的结果，加深对用户行为的支配。</p><p>当前数据产权制度的缺位使得平台企业拥有了较高的数据处置权。平台企业为了使自身利益最大化，通过歧视性定价、数据监控、强制数据授权、数据合谋等数据垄断行为侵害消费者利益，同时通过抑制数据要素流通，阻止其他潜在竞争者进入市场。</p><p>数据价值的实现主要在于流通和共享。由于数据要素的垄断，以数据作为生产要素的市场被严重破坏，未能真正体现数据价值。</p><h3 id="平台垄断的影响">平台垄断的影响</h3><h4 id="社会福利水平的提高">社会福利水平的提高</h4><p>平台企业的规模优势可以降低交易成本，进而提高经济效率。在前文所提到的，平台企业的兼并可以提高社会福利水平。同时借助平台中存在的网络外部性，平台之间的合并会产生“一加一大于二”的效果。另外，平台的垄断竞争结构和其中存在的“长尾市场”全覆盖提高了社会福利水平。在互联网市场中，平台的垄断竞争使得其产品高产高价，在位的垄断平台在占据较高市场份额的同时，大量的中小型企业在剩余的市场份额中展开竞争，使得垄断竞争市场的社会福利水平不低于竞争市场。</p><h4 id="数字经济红利分配不均的加剧">数字经济红利分配不均的加剧</h4><p>虽然平台可对价格敏感型的消费者制定低价格，在一定程度上提高了社会总福利水平，但这本质上仍是一种垄断行为，会加剧资源错配等问题。并且平台可根据其占据的数据和算法使其剥夺消费者福利的行为更具有隐蔽性。</p><h4 id="社会整体的非系统风险加剧">社会整体的非系统风险加剧</h4><p>随着数字经济在总体经济的占比不断增加，数据要素支撑社会整体运行的力度越来越大，使得数据要素具备了准公共物品的特征，甚至在部分平台上表现出关键设施的特征，关系到了整个平台经济甚至宏观经济的发展。</p><h2 id="二、平台垄断的监管与治理">二、平台垄断的监管与治理</h2><h3 id="平台垄断行为的认定">平台垄断行为的认定</h3><p>随着国内平台经济的发展，我国市场监管部门加大了对平台经济领域的反垄断监管力度。在认定平台垄断上，通过识别协议垄断、独家版权协议等垄断行为，有效治理平台企业的垄断行为，构建可竞争平台市场。</p><p>在《关于平台经济领域的反垄断指南》中，通过“二选一”协议强迫经营者退出对手平台被视为构成垄断。“二选一”指要求平台经营者在竞争性平台间进行二选一。这种协议强迫经营者退出对手平台，降低了竞争对手的市场份额，还能通过网络效应进一步扩张，实现其维持垄断的目的。</p><p>在网络音乐市场中，独家版权协议较为常见。独家版权协议作为一种重要的数字音乐版权交易形式，不仅可以使市场交易成本显著降低，还可以提高数字音乐服务平台的维权积极性，推动了我国数字音乐版权产业的发展。与此同时，独家版权协议作为一种创新壁垒的体现，过度集中会形成市场壁垒，排除了竞争。或者说，独家版权协议本质上是一种排他性协议，平台企业通过签订合同锁定了版权人，排除了竞争行为。</p><p>根据我国数字音乐版权产业的发展历程，有限的独家版权协议可以起到稳定市场预期、提高市场效率、推动版权产业发展的作用。但是垄断平台会通过大规模的独家版权协议排除竞争。若能对平台垄断进行合理规制，让市场中存在相对较低的市场壁垒，则可以实现排他性与竞争效率兼顾的良性市场竞争环境。</p><p>在2014年之前，我国的数字音乐市场处于起步状态。此时消费者和数字音乐服务商的版权意识较弱，各大音乐平台不愿意花费资金购买音乐版权，使得盗版音乐泛滥。这种情况严重阻碍了音乐版权产业的发展。市场中虽然有大量的音乐服务企业，但是由于较低的版权意识和侵权成本使得市场进入壁垒极低。此时的市场竞争不属于良性竞争，并不具备可持续发展的条件，消费者虽然可以零成本享受服务，但是版权人的合法利益不能得到保障。</p><p>2014—2016年，我国数字音乐市场开始良性发展。2015年，国家版权局颁布了被称为网络音乐市场的“最严禁令”——《关于责令网络音乐服务商停止未经授权传播音乐作品的通知》，提高了网络音乐的版权保护力度。此时的独家版权模式成为了数字音乐平台开展竞争的方式，实现了以市场竞争推动数字音乐产业的发展。此时由于较低的市场进入壁垒，使得在位企业难以通过阻碍潜在竞争者进入市场，实现了实现排他性与竞争效率兼顾的良性市场竞争。</p><p>但在市场竞争后期，垄断风险随着独家版权协议规模的扩大而上升。部分音乐平台位了抢占市场份额而哄抬价格，这是一种典型的不正当竞争，加剧了市场上的垄断风险。此时大量的独家授权协议的排他性与市场上的网络外部性共同作用，使得市场竞争效率降低。同时，资本市场对哄抬价格的支持是一种典型的资本扩张行为，属于掠夺性定价策略。在2017年12月，腾讯完成了对中国音乐平台的收购，此时其对市场资源的占有率超过80%，合并后的腾讯音乐集团会通过其高市场占有率，在网络效应的加持下，阻碍潜在竞争者进入市场，维护其市场支配地位。</p><p>2021年，国家市场监督管理总局认定“腾讯收购中国音乐集团”一案中腾讯的行为是经营者集中，并对其做出了行政处罚。市场监管总局对腾讯进行了一系列反垄断措施，包括限制其与上游版权方达成独家版权协议，限制新歌首发的独家合作期限等措施。</p><h3 id="平台垄断的治理">平台垄断的治理</h3><p>在平台市场中，市场壁垒会通过阻止潜在竞争者进入，阻碍市场竞争，降低市场效率。市场壁垒是造成平台垄断的重要因素，并且双边市场中的网络外部性会放大垄断效应。平台市场壁垒与传统市场壁垒存在差异性，由于缺乏市场份额优势的市场壁垒难以起到排除竞争的目的，以前文所提到的网络音乐市场为例，适当的市场壁垒反而会提高市场竞争水平，推动产业发展。因此，在平台市场下，应当用新的市场治理模式来治理平台垄断。</p><h4 id="数据要素壁垒治理">数据要素壁垒治理</h4><p>在数字经济背景下，数据要素已经成为了平台企业所竞争的生产要素，同时数据的垄断经营使得部分占据优势的平台企业占据了大部分的数字经济红利。</p><p>数据要素具有有限的排他性，但由于平台企业对平台内用户数据的实际控制权，数据要素壁垒也有可能随之形成。当前的国际治理方案“数字服务税”或“双支柱方案”难以从根源上解决平台企业利用数据要素垄断获取垄断利润的问题，反而产生了新的数据流通壁垒。国际垄断平台可以利用数据要素的跨国流通实现合理避税，造成来源国的税收损失。对此，针对数据要素进入市场的过程，利用“数据税”的形式可以解决这些问题，又能避免“数字服务税”带来的数据流通壁垒。</p><h4 id="创新壁垒治理">创新壁垒治理</h4><p>与数据要素壁垒的形成相似，创新壁垒的形成也与平台企业所拥有的市场份额优势相关。垄断平台可利用其大规模占有的独家版权构建市场壁垒，形成市场壁垒。在前文的腾讯音乐垄断中，若能够建立公共服务平台，让数字音乐版权被集体管理组织，则垄断平台的独家版权规模就有望被限制，市场壁垒也有望被消除。例如美国的《音乐现代化法案》就提出设立集体管理组织，让音乐作品实现统一的管理与交易。</p><p>除了规范企业行为的“行为救济”方案，还可考虑放开市场准入，让国内企业参与到国际竞争中来，实现市场的开放与可竞争性，减少平台垄断的发生。</p><h2 id="参考文献">参考文献</h2><blockquote><p>陈应龙. 双边市场中平台企业的商业模式研究[D]. 湖北:武汉大学,2014.</p><p>毕菁佩.双边市场中平台企业的动态定价研究[D].北京邮电大学,2017.</p><p>纪汉霖.双边市场定价策略研究[D].复旦大学,2006.</p><p>夏杰长.基于双边市场理论的电商平台定价策略[J].企业经济,2023,42(08):5-13+2.DOI:10.13529/j.cnki.enterprise.economy.2023.08.001.</p><p>张一进,张金松.互联网行业平台企业发展战略研究——以淘宝网平台为例[J].华东经济管理,2016,30(06):54-61.</p><p>Rysman, M. (2009). The economics of two-sided markets. <em>Journal of economic perspectives</em>, <em>23</em>(3), 125-143.</p><p>Rochet, J. C., &amp; Tirole, J. (2006). Two‐sided markets: a progress report. <em>The RAND journal of economics</em>, <em>37</em>(3), 645-667.</p><p>Armstrong, M. (2006). Competition in two‐sided markets. <em>The RAND journal of economics</em>, <em>37</em>(3), 668-691.</p></blockquote><blockquote><p>王世强,陈逸豪,叶光亮.数字经济中企业歧视性定价与质量竞争[J].经济研究,2020,55(12):115-131.</p><p>路文成.市场壁垒与平台企业垄断行为的认定和规制研究[D].山东大学,2022.DOI:10.27272/d.cnki.gshdu.2022.006407.</p><p>叶明,郭江兰.数字经济时代算法价格歧视行为的法律规制[J].价格月刊,2020,(03):33-40.DOI:10.14076/j.issn.1006-2025.2020.03.06.</p><p>靳哲,李文.平台自我优待的反垄断规制——以欧盟《数字市场法》为视角[J].现代营销(下旬刊),2024,(06):138-140.DOI:10.19932/j.cnki.22-1256/F.2024.06.138.</p><p>顾聪,刘颖,吕本富,等.市场结构、经济福利与平台经济反垄断[J].中国管理科学,2023,31(11):208-216.DOI:10.16381/j.cnki.issn1003-207x.2021.0268.</p><p>荆文君.互联网行业的市场结构特征及其福利影响研究[D].中央财经大学,2018.</p><p>陈镜霖,许庭皓,马紫琳.数字经济下平台数据合规的反垄断规制理据[J].投资与合作,2024,(07):174-176.</p><p>马平川.平台反垄断的监管变革及其应对[J].法学评论,2022,40(04):174-183.DOI:10.13415/j.cnki.fxpl.2022.04.015.</p><p>白雪洁,娜梅雅.数字平台企业市场力量的特殊性及其反垄断监管的研究[J].经济与管理研究,2023,44(05):21-35.DOI:10.13502/j.cnki.issn1000-7636.2023.05.002.</p></blockquote><blockquote></blockquote>]]></content>
    
    
    
    <tags>
      
      <tag>econ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>碎碎念合集</title>
    <link href="/2024/07/12/nonsense/"/>
    <url>/2024/07/12/nonsense/</url>
    
    <content type="html"><![CDATA[<blockquote><p>合集，持续更新。</p></blockquote><h1>4.</h1><h1>3.</h1><p>上了大学，回家次数也少了起来。虽然在川内上大学，但这学期以来因为各种各样的事情，还没回过家。</p><p>小时候总是希望离家远一点，熟悉的地方早就看烦了，后来实现了这个愿望，但是家乡却变得亲切起来了。</p><p>起因是今天读到一侧新闻，中储粮油罐车矿物油食用油混装:</p><blockquote><p>早在2005年，《南国早报》就报道过“罐车清洗难防交叉污染，拉完危险化学品后又拉食品”；湖南省衡阳市在2013年也曾发布过“关于严厉打击违法违规运输食用油的通知”。</p><p>2017年，有德国实验室检测出老干妈、海天等国产品牌的矿物油超标，违反欧盟和美国的相关标准，然而当时却被《环球时报》视为对中国品牌的敌意打压。</p><p>在中储粮首次承认食用油、煤制油等化工类液体油罐车混装后，央视网如此怒斥。然而骂归骂，中储粮的表态只是“引以为戒”，没有道歉，没有召回，没有赔偿，也没有处理责任人。</p><p>直到这次曝光后，公众才赫然发现，原来这早已是行业内公开的秘密。混合运输这些油料的司机当然都清楚得很，但他们的自我辩解是：“大货车拉一趟不容易”、“我们开运输的不挣钱”、“清洗一次车厢太贵了”。</p><p>半年多前，《新京报》就曾报道“山西一危化车司机清洗槽罐时中毒身亡”，当时微博底下一条留言读来令人悚然：“危险品洗完，再装食用油，不然洗它干嘛？</p></blockquote><p>有一点黑色幽默的感觉，这下众生平等，感觉全国除了特供单位之外，所有的人都吃过煤油之类的矿物油。</p><p>看到这则消息我却比其他人要好受一点，为什么呢？</p><p>因为我家从不在超市买食用油，我家的油是外公外婆亲手种出来的。小时候在家的时候，每年春天我都能看到盛开的油菜花田，每年夏季我在街上都能闻见榨油的香味。当油菜收获的时候，油菜籽很小，像干燥的细沙一样，非常光滑细腻。</p><p><img src="1.jpg"></p><p>以前我总担忧这样榨油不如工厂批量生产的干净卫生，这下我释然了，亲手榨的油里无论如何不会有煤油存在。这也说明，至少在儿时我吃到的矿物油比别人要少。以前总觉得有机产品是智商税，这一刻我懂得了它的含金量。</p><p>我记得一件奇怪的事，在上高中时，我妈以前来学校看我，总抱怨说吃了学校周边的油肠胃不舒服。我当时老爱嘲讽她，认为她比我还矫情。肠胃不舒服的原因当然最有可能是她吃不惯，但今天我突然想到，这其中有没有煤油的作用呢。</p><p>有人借这件事说中国人人平等，但事实上是不平等的。中国很大，至少阳光和土地不会缺。</p><h1>2.Paperclip</h1><p>自从回形针PaperClip被封禁以后，我再也没有看到过比他们做的更好的中国科普视频了。</p><h2 id="回形针是什么？">回形针是什么？</h2><blockquote><p><strong>回形针PaperClip</strong>回形针PaperClip曾经是<a href="https://zh.wikipedia.org/wiki/%E4%B8%AD%E5%9B%BD%E5%A4%A7%E9%99%86">中国大陆</a>的一家<a href="https://zh.wikipedia.org/wiki/%E7%A7%91%E5%AD%A6%E6%99%AE%E5%8F%8A">科普</a>类<a href="https://zh.wikipedia.org/wiki/%E8%87%AA%E5%AA%92%E4%BD%93">自媒体</a>，于2017年成立[<a href="https://zh.wikipedia.org/wiki/%E5%9B%9E%E5%BD%A2%E9%92%88PaperClip#cite_note-:0-7">3]</a>，其节目信息密度高、动效丰富，擅长<a href="https://zh.wikipedia.org/wiki/%E5%8F%AF%E8%A7%86%E5%8C%96">可视化</a>讲解[<a href="https://zh.wikipedia.org/wiki/%E5%9B%9E%E5%BD%A2%E9%92%88PaperClip#cite_note-8">4]</a>[<a href="https://zh.wikipedia.org/wiki/%E5%9B%9E%E5%BD%A2%E9%92%88PaperClip#cite_note-9">5]</a>。回形针PaperClip于2020年爆发的<a href="https://zh.wikipedia.org/wiki/2019%E5%86%A0%E7%8A%B6%E7%97%85%E6%AF%92%E7%97%85">2019冠状病毒病</a>疫情期间发布的视频《关于<a href="https://zh.wikipedia.org/wiki/2019%E5%86%A0%E7%8A%B6%E7%97%85%E6%AF%92%E7%97%85">新冠肺炎</a>的一切》引发了强烈反响，但其因随后发布的视频《中国人的肉蛋奶消费，为什么会影响到巴西热带雨林的存亡？》、早先一些视频中的科学错误、两名前员工的去向和言论而广受争议。2021年7月14日，其<a href="https://zh.wikipedia.org/wiki/%E5%93%94%E5%93%A9%E5%93%94%E5%93%A9">哔哩哔哩</a>、<a href="https://zh.wikipedia.org/wiki/%E5%BE%AE%E5%8D%9A">微博</a>、<a href="https://zh.wikipedia.org/wiki/%E7%9F%A5%E4%B9%8E">知乎</a>、<a href="https://zh.wikipedia.org/wiki/%E5%BE%AE%E4%BF%A1">微信</a>公众号、<a href="https://zh.wikipedia.org/wiki/%E7%99%BE%E5%AE%B6%E5%8F%B7">百家号</a>等多个中国大陆网络平台账号被屏蔽，具体原因未知。其<a href="https://zh.wikipedia.org/wiki/YouTube">YouTube</a>频道亦停止更新，但仍然处于可用状态。</p></blockquote><p>今天看到一篇非常有意思的文章，讲述了回形针团队解散之后的现状</p><p>如果能够看到这里，那么看原文也没有问题</p><p>链接奉上：<a href="https://matters.town/a/a7eq6t1d3tbd">https://matters.town/a/a7eq6t1d3tbd</a></p><blockquote><p>罗枚觉得自己和回形针是挨了锤的牛吗？他不这么认为，“我觉得被锤一种世间规律，”他依旧很平淡地说。</p></blockquote><h1>1.</h1><p>网址见<a href="https://yangwenbo.com/">https://yangwenbo.com/</a></p><p>网上闲逛，原本是打算找一找可以实现自指（self-reference)的程序的一些例子,无意中进入到了某一个人的blog。一个事实是，在如今，已经没有人会用blog这种传统的方式记录生活了，腾讯等公司已经彻底包办了这一切。blog的主人从2005年创建了它，从懵懂迷茫的大一写到了而立之年。翻翻它，我看到了一个人所思所想的时间序列，实现了互联网考古。他的文章挺有意思的，从中摘录了部分。</p><hr><p><a href="http://www.answers.com/quine">quine</a> [名字源于逻辑学家 Willard van Orman Quine, via Douglas Hofstadter] ，指的是一种运行后生成自身源代码拷贝的程序，也叫self-reproducing programs(自我复制程序)。今天无意中搜到 Ken Thompson 的一篇经典演讲 <a href="http://acm.org/classics/sep95/">Reflections on Trusting Trust</a>，好奇心下就小探索了一番。</p><p><a href="http://www.answers.com/">answers.com</a> 上有一个c语言的例子：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">char</span>*f=<span class="hljs-string">&quot;char*f=%c%s%c;main()&#123;printf(f,34,f,34,10);&#125;%c&quot;</span>;<br>main()&#123;<br><span class="hljs-built_in">printf</span>(f,<span class="hljs-number">34</span>,f,<span class="hljs-number">34</span>,<span class="hljs-number">10</span>);<br>&#125;<br><br></code></pre></td></tr></table></figure><p>运行之后直觉得好奇，为什么它能把自身源代码输出啊？想着可能是某种特技，结果在Linux下，在Win下编译反编译调试比较汇编代码，折腾了半天。到最后看发现实在太繁，还是静心读一下源代码吧，才发现，原来如此的简单：</p><p>printf中的第一个参数f，就是格式化字符串，34就是双引号的&quot;ASCII码，10就是换行符的ASCII码，很显然f就是一个用它自身去格式化自身的字符串而已。技术看起来简单，但是要实现完全相同的代码输出，在编排上还真得下一番工夫。</p><p>Gtalk上碰见yutian，给他发了过去，还打赌他肯定看不出来运行结果，现在才发现自己幸亏没真赌上。:D，不过人那，还是感情的动物啊，都有一种习惯性思维，看到貌似复杂的东西自己就先限制住思路了，结果他也没看出来，哈哈。</p><p>看来，把复杂的事情搞简单，还真不是件容易的事儿。做人，还是简单点好，遇事想那么多干吗，给自己找烦恼。</p><p>PS:</p><p>谁要对 quine 还感兴趣，<a href="http://www.nyx.org/~gthompso/quine.htm">这里</a> 有几乎所有语言的一种 quine 实现，这东东好象对写恶意代码很有用啊。</p><hr><p>一个事件：2006年5月23日晚六点左右，南京大学附近一餐馆发生凶杀案，凶手为一电子系04级研究生，受害者为与其一个实验室的05级研究生。据悉，二人均为部队推荐到大学读研的强军计划的研究生，目前凶手已经交送军事法庭处理。</p><p>相当低调的南大可是碰到了多事之秋，到处是风声鹤唳，人心惶惶，浦口这面也不安全。</p><p>联想到马家爵事件，使人想到大学的教育问题。大学究竟应该教会我们什么？只是学术能力吗？</p><p>我觉得现在大学教育最缺乏的是对学生个体完整性的教育，到大学以后，离家庭远了，没有人告诉你该怎么样，不该怎么样。辅导员的角色更像一个服务者，而教授们的指责也仅在于教授课本知识。</p><p>个体完整性的形成应该是多方面的内容，而大学所教的，只是智力方面的发展。心理和其它方面的能力，只能从交往中获得，而这个获得的方式和效率就完全因人而异了。</p><p>相对来说，如果一些老师能在教课之余，给同学们谈论一些做人的道理，能给学生的生涯规划做一些指导，这样的老师就会更受欢迎。因为这样才能感觉到老师是个长者，并且很关心学生。很幸运的是我高中遇到过几位，大学里的就很少了。我最喜欢的两个老师，丁南庆和吴朝阳，就属于这种类型的老师。</p><p>韩愈说过：师者，所以传道授业解惑也。真正能理解“道”这个词的意思并身体力行的老师，能有几个呢？</p><hr><p>十月十二号十运会开幕，神州六号升空。</p><p>身在南京的我们也因此得福多放一天假。</p><p>那天早上正在自习，突然收到市委宣传部的信息，号召每个市民共同努力把十运会办成最好的运动会，真好笑，通讯方式先进了，标语宣传也鸟枪换炮了。</p><p>寝室的几个人突然对CS又有了很大的兴趣，放假了两天都在宿舍里联网打游戏。唉，真颓废。</p><p>结果，两天都没有好好的看书。早上也起不来了，今天愣是在闹钟响了一个小时以后才慢慢的回味过来。</p><p>去自习吧，又闹肚子痛，只好回来吃药。郁闷啊！</p><p>只能慨叹自己毅力太差。</p><p>十运会开了好多天，也没有去看过。现在没有什么新闻能让我感到太大的兴趣，除了IT行业的新闻，别的东西基本上处于不闻不问。</p><p>想想去年也是，印尼的海啸我是过了十几天看到捐款的号召才知道有这么一档子事。</p><p>神州六号也是在上网的时候顺便浏览到的。</p><p>逐渐的对看小说也失去兴趣，现在很少有大块的时间让自己沉浸在虚幻的空间里，顶多不时地去看看杂志。</p><p>人啊，真是，变得很快。随着年龄增加和经历的增多，以前的习惯也会慢慢地改变。</p><p>昨天买了张贺卡，今天寄出去了，一个朋友的生日。</p><p>哥们说：“这都什么年代了，还写贺卡！”</p><p>无语。</p><hr><p>我把我生命中珍贵的、易失去的东西都称做我的太阳。因为它们，我的生命充满了快乐的光芒，虽然阴霾并不是荡然无存，但是，快乐过，就足够庆幸了。<br>不可否认的是，我应该非常感激上天赐给了我很多的幸福。人生像一个找寻幸福的过程，前方完全是个未知数，也没有可以估计的期望，渐渐地由孩子而成人而老去，似乎没人有觉得自己的幸福是全世界的最大值。我也一样，人性的本质给了我一颗蒙尘的心，永远不知道满足。常常在想，我到底需要什么呢？</p><p>也许这是一个非常沉重的话题，这个月的《萌芽》上有一篇文章说，一个男孩告诉别人，他追求的是爱情，但是在有爱情之前得先打好基础。但他却是清华的学生，已经保送研究生，也不知道他指的打好基础是什么。文章说，等你准备好一切然后去追求你的女孩时，她也许已经在别人的怀抱了。这句话让我想了好久。</p><p>我曾经天真的以为我喜欢的女孩和我的想法一样，可以平平淡淡的分享一份稳定的爱情，可是事实证明，像好朋友的个性签名说的，这个世界远不像你想的那样。然后，我渐渐明白了，一个男人还应该有自己的责任，应该有一个能给得起承诺的基础，就开始吝惜自己的感情了。既然给不起别人，就不要期望可以有回报。换用我自称帅哥室友的一句话，可能极端了点，这年头，帅顶个屁用，男人要有钱。</p><p>直至现在我也不知道我到底做得对不对。大一的时候日子过得很平淡，由于对数学不怎么感兴趣，心中也有一份期待，学习以外的爱好就是运动运动，看看闲书。我的朋友就说，很羡慕你的，有那么随心的生活。等到军训后的那个暑假，受到打击之后才发现，自己什么也不是，虽然从小功利心就不是那么的强，还是被一种强烈的自卑撞击得体无完肤。就连暑假也过得不顺利，倒霉到能在马路上碰巧撞到一个篮球，而且伤口到开学才长好。大二为了让自己生活中的一块被填补上，便把自己投入到各种活动中去，把本来可以大一就应该体验到的东西尝试了一遍。时间是疗伤很好的工具，在忙碌中渐渐淡忘。虽然不可以完全无动于衷了，可是至少可以做到平静的生活，偶尔会听到一些消息，全当作一个好朋友罢默默的祝福。</p><p>整个大学时代已经没有什么好期待的了，我认为我的感情生活在大学已经成了死水一潭，没可能再有什么波澜。为了不让它那么索然无味的过去，也是受了一位学长的鼓动，就打定了决心出国，虽然成绩并不是很理想，但是还是过得去那种，可以试试，况且还有一年多时间。然后在系里做得还行，因为学生工作的缘故也认识了许多朋友，再次恢复了往日那种自信，虽然学习也没什么起色。生活也渐渐地趋于规则化，况且有学校的身处市郊，与世无争的清净，也可以说是安逸了。</p><p>无论如何是舍不得的，我也不想回避这一点。但是一切真能像我期待的那样走下去吗？我常常问自己。我不知道，不知道将来，不知道该如何去做。记得好象是柳传志说过，如果不知道下面该做什么，先把手头的事情做好。可是我发现自己居然是那么的幼稚，连现在该怎么做都不知道。在感情方面，我还只是个不谙世事的孩子，把一切看得像童话般简单，可事实把理想一个一个撞得粉碎。现在的我，依然过着原来的生活，依然渴望平平淡淡波澜不惊，只是某些时候加了一些期待，加了一些对未来的憧憬。正如志摩之言：“我将于茫茫人海中访我唯一灵魂之伴侣；得之，我幸；不得，我命，如此而已。”</p><hr><p>在百合上看到一篇文章，据说是一个退学的博士生写的。</p><p>讲他是如何对清华的教育感到失望的。</p><p>一开始我还以为是某种讽刺的文章，写来取笑清华大学的。</p><p>没想到看了之后才发现，还真是有这个人。</p><p>最巧的是这个人写的一篇叫做《完全用LINUX工作》的文章我还看过，而且还下载下来专门研究过，是不可多得的全面介绍LINUX系统下应用软件的文章。</p><p>刚才上CSDN，业界视线版大标题：“清华退学博士王垠：《完全用Linux工作》”。</p><p>真是搞不懂，这个年头，噱头太多，什么都能成明星。</p><p>王垠自己也说，自己想出名的领域出不了名，胡乱写几个字居然让自己声名雀起，真是莫大的讽刺。</p><p>说实话，我很佩服他，敢追求自己想要的。</p><p>假如给我一个清华的博士，我绝对不会像他那样毅然而决然地退学的，最起码也会熬到博士学位证。</p><p>想想我自己，当初何尝不是像他一样，小的时候对清华有着莫名的崇拜。而且也是那种动手能力很强的人，喜欢琢磨一些电路啦什么的东西。</p><p>可是大了以后，就知道学习可不是那样的，我得应付考试，得应付父母的督察。</p><p>还记得初中时候踢球，老爸给我说，只要你学习成绩在校前三十名，踢球的事情我们不管你。</p><p>学习成绩居然跟我的课余活动自由直接挂钩，现在想想，很讽刺。</p><p>其实我是很羡慕那些看起来吊儿郎当的同学的，因为从小的教育就是做一个好学生，没做过什么越轨的事情。心理分析家说人对自己没有体验过或者不能拥有的事情总是很向往，可能也是我羡慕的原因。至今我仍然觉得自己有点可悲，可以说是想象自己是一个胆小怯懦、循规蹈矩、很无能的一个人。</p><p>进入大学以后我也一直在思考我学习的意义何在，可是思考的同时我却没有注意学好眼前的东西，也许是对抽象的东西理解不怎么样吧，成绩也不怎么好！而且考试的时候觉得很不可思议，为什么我做作业的时候会做的题考试时总要做得一塌糊涂呢？</p><p>直到现在，才发现自己真有些喜欢大学的学习，喜欢数学了。可现在努力还可能有期望的结果吗？我不知道，但是如果放弃努力怕是不可能有结果的。</p><p>进一步来说大学的课程合理吗？我也不知道，我就知道我要学好它。至于它有没有用，就只能以后才晓得了。在我的专业课程以外，我学了很多东西。不能担保就有用，只是我感兴趣。不过要是拿来和王垠比的话，恐怕没有他那么深。这也是我一直很困惑的地方，除了专业课之外我确实可以学些别的东西，可却没有一个系统的学习，就注定没有一个更高层次的领悟，那么多的浅尝辄止能堆积起知识的大厦吗？</p><p>也许，我在这一两年里还可以做出来点成就，也许我有机会出国深造，但是五年的数学PhD读下来我出来又能干什么？太多的对未来的迷茫。</p><p>这也许就是中国孩子的悲哀，从小就是一个一个目标，好小学，好初中，好高中，好大学，然后硕士，博士。但是家长们没有告诉孩子们的是，最重要的是什么？人生真正的目的是什么？</p><p>我的好朋友给我说，他之所以选择考T就是因为从小一个个目标，现在却没有了，只好给自己强加上一个。我觉得我在潜意识里确实也有这样的因素，但是还有的是对中国教育的不信任，我想看看别人是怎么教育自己的孩子的。为什么电影里面美国人并不十分在乎自己的什么地位，而那么注重生活的和谐？那是编出来的还是一个社会的意识不同。</p><p>中国缺少研究的气氛，缺少自由的意识。大学教育缺乏一个有效的沟通机制，包括师生之间和学生中间。在我的学习中，有好多东西想和别人讨论，但是专业外的东西就找不到别人谈谈，而专业内的又不怎么好意思开口。我们像一台台计算机，只是要记住证明，记住定理，记住算法，而没有去想这个算法可不可能优化，还有没有别的实现方法。不是我没有考虑过，只是当想到一个问题时，你脑子里马上就会有一个成型的算法或证明，或者说你知道要从课本的哪地方找到它。这个时候，你还有没有心思再去想别的，假如再加上好多课业。</p><p>在这个环境里面，足够优秀的人还是能做些事情的，比如说这个退学的清华博士，虽然他自己看自己的成就不怎么样，但相对与别的人来说他还是出色的。我现在不可能苛求环境有多好，只想在这样的环境里面尽我的努力去获得一些自身价值的体现，尽管可能衡量标准并不那么科学。</p><p>以前可能对应用方面偏重太多，学了一些华而不实的东西，总没有那种脚踏实地的感觉。以后就要专心理论多些了，我觉得自己感兴趣的主要还是和计算机有关的一些东西，比如算法、数据结构啦一些的东西，现在懂的太肤浅了，在大学剩下的时间里，我有必要搞清楚一些。</p><p>进入大三以来学习认真许多，而且真的发现当专注于某件事情的时候，就不会有什么乱七八糟的烦心事，心情也安定许多。</p><p>也很少干浪费时间的事情了，比如打游戏，上网干吗的。现在开电脑主要就是学英语，看资料。最近就是在翻译前面贴出来的Matlab Functions，太长了，翻译起来不容易，而且专业术语很多，大多是简化的表达，很难准确地看懂。虽然有专门介绍函数的书，但是自己翻译起来才有成就感，不会了自己使用一下，看看到底是什么功能，更容易理解函数的使用，因为不是每个函数你在实际中就能用到的，顺便再学些数学术语，总之对自己是有很大好处的。</p><p>我的未来应该在我的手中。</p><hr><p>今天晚上考副修第一门，国际结算与融资。不难，有好多老师给的样卷上的题目。又想起来去年VFP的考试，所谓“样卷”，呵呵。</p><p>这两天看金融，总有一个感受，“利”字当头。真应了《史记》上的话。</p><p>尤其是结算，讲的就是国际贸易中的资金往来，主题就是怎么做到严谨地进行贸易结算和融资，预防和控制可能产生的风险。案例总是谁骗了谁，谁被谁骗。</p><p>其实纵观这个世界，不也就是一个“利”字？</p><p>世贸部长级会议，开个六天，也没说出个所以然来。场外，反对全球化的人示威游行；场内，各个利益集团之间扯来扯去。发达国家要发展中国家放弃贸易壁垒，发展中国家要发达国家提供更多援助和开放原材料市场。中国也在这场会议上第一次高调起来，但是起的作用也是有限。中国不愿意做发展中国家的领头羊，既与本身的民族意识有关，怕也与和其他发展中国家事实上处于竞争地位脱不了干系。都是以廉价劳动力市场，低附加值产品，加工型工业来挣得国际投资和出口，和中国有利益冲突的有很大一部分也是发展中国家，与竞争对手结盟，对中国也没有太大好处。</p><p>首届东亚峰会召开，都注意到了东北亚已经成为会议的核心，主角是日本和中国，小泉和温家宝。中日韩峰会因为小泉政府的不负责任行为被无限期推迟。虽然在镜头前作秀表示友善，小泉也仍然没有改变日本政府对待历史的实际态度，依然是政冷经热。虽然亚洲国家因为日本在亚洲的经济地位现在仍然难以动摇，很难放弃和日本的经济往来，但是不知道日本的强硬态度还能坚持到几时，等到它们意识到整个亚洲的反对态度时候，后悔还晚不晚？东盟眼看着10+3的3抢去了那么多风头，心中自然也是大不情愿，就拉来了印度和澳大利亚、新西兰来作为制衡，试图把东亚峰会的核心集中在东南亚。发展中的印度不能小视，今年的GDP增长速度已经达到了8%以上。俄罗斯也在试图加入。中国想成为一个世界大国，在国际上能有举足轻重的作用，任重而道远。</p><p>联想与IBM的整合第二阶段也提前开始了，据联想自称与IBM的整合并没有使它失去客户，反而营业额增长了不少，这一季度的财务报告相当漂亮，新联想正在加速浮出水面。利用奥运会的契机，不知道联想能不能站到领跑位。</p><p>民营快递公司纷纷出售，EVD的风云再起，盛大“传奇”的免费运行，国储铜的抛售风波，Google的code jam与Microsoft的code 4 bill、<a href="http://xn--Live-kb5fwftev56bet3amx1j.com">个性化主页与Live.com</a>，三九集团的危机，在现在这个年头，想找到一样东西与利无关，怕是不太容易。</p><p>但也总是有一些事情不那么让人觉得功利。尽管有些人是靠着传播感动来获得利益，总比传播谎言的好。南方周末载了一篇文章，关于代课教师的，引起了全国的震动。那些代课教师们拿着一个月40~80块的工资在培养着中国农村的未来。中国西部教育人才的缺口与东部的人才富余形成鲜明的对比。这些代课教师们能坚持在岗位上需要有多大的力量支撑啊。</p><p>上海电视台新闻频道报导里写到：</p><p>代课教师刘秉章已经32岁了，也因付不起聘金至今单身。几次相亲中，他颇受刺激，他告诉记者：“几乎每相亲一次，女方得知我是代课教师，甩头就走。还有的抛下一句话，你40元一月的工资，是你养女人还是女人养你？”他出去打工过，本来都想不再回来教书了。结果开学了，他到学校去转转，看到那些孩子，却又舍不得再走了！而记者去采访他时，他脚上的皮鞋，还是他父亲出去打工，在外面捡回来再补一补给他穿的。</p><p>北寨镇张家堡小学代课教师王政明，62岁，代课47年，至今每个月的工资是40元。因为根本没有能力养家糊口，自己的女儿都辍学在家了。而他却培养出了76个大学生。但是在他来说，教书已成为生命的一部分：“寒暑假时，不用来学校我心里就会空空的，非要来学校转几圈才踏实。”</p><p>同样20年来拿40元／月工资的会川镇本庙君安希望小学的代课教师谢毓新，生活压力比李建新更大。他的儿子正在读大学，每年的学费要四五千元，他已经连本加息借了2万元了。李迎新问，如果转不了正怎么办，他嘴唇蠕动了一阵说：“实话告诉你，我真有点坚持不住了。”</p><p>经常以为，知识分子和中产阶级是社会的中坚力量，是精英群体，是国家的支柱。他妈的那么多贪官污吏，纸醉金迷，奢侈浪费还不都是这些人干的？多少亿元拍个电影，多少亿元交了市场经济的学费，多少钱的择校费，多少钱的重修费，这群畜生。就像南大，九八五计划给了那么多钱，还是到处哭穷，光跟清华北大比，不想想还有那么多老师连孩子上学都供不起。有本事搞出来个诺贝尔奖啊？人家日本得诺贝尔的也不是东京大学的。想起来去年许靖华给我们上课时候说的，真正的科学不是钱堆起来的，搞科研要那么多钱干吗？最腐败的就是什么自然科学基金。</p><p>中国真正的脊梁在老百姓里面，虽然说有时候这种力量会被所谓的精英阶层误导，但历史的车轮迟早会轧死那些混蛋。</p>]]></content>
    
    
    
    <tags>
      
      <tag>life_record</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>math-modeling</title>
    <link href="/2024/07/12/math-modeling/"/>
    <url>/2024/07/12/math-modeling/</url>
    
    <content type="html"><![CDATA[<h1>MATLAB</h1><h2 id="MATLAB的使用">MATLAB的使用</h2><p>最近在搞数学建模的事情</p><p>建模自然就要用到Matlab了，但是Matlab自带的IDE让我说不出话来，笨重不说，而且非常难看。</p><p>竟然有IDE默认主题是<strong>白色</strong>的，而且颜色还非常难调。我看了一下午的Matlab，眼睛非常难受。</p><p>这时，我才想起来，VsCode还有MATLAB的插件。于是装上插件，顿时轻松了不少。图片本来想放的，但是hexo的插入图片的机制实在太麻烦了，以后的文章就不放图了，就放文字和代码。</p><h2 id="MATLAB的语法">MATLAB的语法</h2><p>语法非常简单，甚至比py还简单。甚至都不需要认真去学它的语法，照着相关文档写就行了，贴一段代码：</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs matlab"><br>clc, clear, close all<br>x0=[<span class="hljs-number">0</span> <span class="hljs-number">3</span> <span class="hljs-number">5</span> <span class="hljs-number">7</span> <span class="hljs-number">9</span> <span class="hljs-number">11</span> <span class="hljs-number">12</span> <span class="hljs-number">13</span> <span class="hljs-number">14</span> <span class="hljs-number">15</span>];<br>y0=[<span class="hljs-number">0</span> <span class="hljs-number">1.2</span> <span class="hljs-number">1.7</span> <span class="hljs-number">2.0</span> <span class="hljs-number">2.1</span> <span class="hljs-number">2.0</span> <span class="hljs-number">1.8</span> <span class="hljs-number">1.2</span> <span class="hljs-number">1.0</span> <span class="hljs-number">1.6</span>];<br><br>x = <span class="hljs-number">0</span>:<span class="hljs-number">0.1</span>:<span class="hljs-number">15</span>; <br><span class="hljs-comment">%拉格朗日插值</span><br>y1 = lagrange(x0,y0,x);<br><span class="hljs-comment">%一阶插值</span><br>y2 = interp1(x0,y0,x);<br><span class="hljs-comment">%三次样条插值</span><br>y3 = interp1(x0,y0,x,<span class="hljs-string">&quot;spline&quot;</span>);<br><span class="hljs-comment">%csape返回的是一个函数，fnval用于计算x在pp4的值</span><br>pp4 = csape(x0,y0);y4 = fnval(pp4,x);<br><span class="hljs-comment">%进行任意维数的插值</span><br>yx5 = griddedInterpolant(x0,y0,<span class="hljs-string">&quot;spline&quot;</span>)<br>y5 = yx5(x); <span class="hljs-comment">%griddedInterp返回的是一个数学函数</span><br><br>[y1&#x27;,y2&#x27;,y3&#x27;,y4&#x27;,y5&#x27;]<br>subplot(<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">1</span>),<span class="hljs-built_in">plot</span>(x,y1),title(<span class="hljs-string">&quot;lagrange&quot;</span>)<br>subplot(<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">2</span>),<span class="hljs-built_in">plot</span>(x,y2),title(<span class="hljs-string">&quot;分段&quot;</span>)<br>subplot(<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>),<span class="hljs-built_in">plot</span>(x,y3),title(<span class="hljs-string">&quot;cubic interp&quot;</span>)<br><br>dx = diff(x);dy = diff(y3);<br><br>dy_dx = dy ./ dx; dy_dx0 = dy_dx(<span class="hljs-number">1</span>)<br><br>ytemp = y3(<span class="hljs-number">131</span>:<span class="hljs-number">151</span>);ymin = <span class="hljs-built_in">min</span>(ytemp);<br>index = <span class="hljs-built_in">find</span>(y3 == ymin);<br>xmin = x(index);&#123;xmin,ymin&#125;<br><br></code></pre></td></tr></table></figure><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs matlab"><br><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">y</span> = <span class="hljs-title">lagrange</span><span class="hljs-params">(x0,y0,x)</span>;</span><br><br>n = <span class="hljs-built_in">length</span>(x0);<br>m = <span class="hljs-built_in">length</span>(x);<br><br><span class="hljs-keyword">for</span> <span class="hljs-built_in">i</span> = <span class="hljs-number">1</span>:m<br>    z = x(<span class="hljs-built_in">i</span>); s = <span class="hljs-number">0.0</span>;<br>    <br>    <span class="hljs-keyword">for</span> k = <span class="hljs-number">1</span>:n<br>        p = <span class="hljs-number">1.0</span>;<br><br>        <span class="hljs-keyword">for</span> <span class="hljs-built_in">j</span> = <span class="hljs-number">1</span>:n<br>            <span class="hljs-keyword">if</span> <span class="hljs-built_in">j</span> ~= k <br><br>                p = p*(z - x0(<span class="hljs-built_in">j</span>)) / (x0(k) - x0(<span class="hljs-built_in">j</span>));<br>            <span class="hljs-keyword">end</span><br>        <span class="hljs-keyword">end</span><br><br>        s = p * y0(k) + s;<br>    <span class="hljs-keyword">end</span><br>    y(<span class="hljs-built_in">i</span>) = s;<br><br><span class="hljs-keyword">end</span><br><br></code></pre></td></tr></table></figure><p>甚至还有和Py大差不差的缩进，而且定义函数都不需要声明返回值。可以说是非常简单易学了。虽然IDE不怎么样，我觉得官方甚至可以直接发布一个不带前端的版本好了。</p><h1>热传导方程</h1><blockquote><p>可能存在错误，后续将会修正，有空会将其转为latex公式显示</p></blockquote><p><img src="1.jpg"></p><p><img src="2.jpg"></p><p><img src="3.jpg"></p>]]></content>
    
    
    
    <tags>
      
      <tag>math</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>AI_Course</title>
    <link href="/2024/06/12/fuckcourse/"/>
    <url>/2024/06/12/fuckcourse/</url>
    
    <content type="html"><![CDATA[<p>我的专业培养计划中有一门人工智能必修课，名字叫人工智能与现代科技。在选课的时候我以为这门课真的会教一点人工智能的东西，但是上了一学期，这门课让我非常失望。的确，老师是专业的，备课也非常用心，从他上课用的PPT也可以看出是自己准备的（不好说，也许吧）。我还以为这门课会培养一点技能方面的东西，至少教一点基础的有关于机器学习之类的编程基础，可是上课的时候，老师就只念着他的PPT，其实念PPT也不错，声音小点就好了。</p><p>从上课的地点就可以看出，一门人工智能课程不是在机房上课，而是在和近代史，大心理等知名水课一样的大教室里上。好吧，这就有一点水课的感觉了。上课时，学生大多坐在后排位置，前面空出来，只留老师在讲台上课。这里，我就不得不佩服老师的心理素质，如果让我在这样的情况下对大家讲课，我心里一定不好受。也许老师专心科研，对他来说，有没有人听他讲根本不要紧，有没有成果或者论文才是他关心的事。</p><p>这门课与其说讲人工智能，不如说是人工智能的历史。如果是这样的话，为什么不能让学生自己读一下自己感兴趣的有关于人工智能的书呢。这样，对编程要求高的同学能够看书或者上网自学，不必在教室里浪费时间，而对编程要求没那么感兴趣的同学也能读一点相关的科普书，而不是在老师念PPT的时候扫兴。</p><p>我不知道开设这门课程对经济学专业的学生有什么意义，学校制定培养方案可能只是为了迎合当下的热点，不会考虑真正要把这门课上好到底要怎么安排。我认为把这门课放在Python这门课之后或许是合理的，有了一定的编程基础，再上这门课或许要好点。这样的水课，作业也是非常水的，学经济学的，那就交一篇人工智能和经济学的论文，若是学数学的也要学这门课的话，也这样交一篇就行了。而写论文这件事，我不认为一个大一学生真的有这个能力与想法去写出一点自己的东西，或许这样的事情有人能做到，但我自己是真的做不到。当我面对自己东拼西凑产出的东西时，我对所浪费的时间感到惋惜。一想到大家都在做犬儒，干着同样的事情，如果AI有了自我意识，能够吐槽的话，它都会说这样的事情简直是浪费它的时间。</p><p>除了这门课程之外，我在学期开始还有一门数字经济学，当我打开教材准备看看这门课到底要讲什么，教材的内容简直不像一个正常人类编写的，和词典差不多，满篇都是废话套话，估计也是在网上抄的。当然只是抄也还好，只抄是达不到查重率要求的，因此必须要一点手段降重。这样一来，文章连仅存的人味也没有了。说来惭愧，我自己也干过这样的事情，我了解教材编者也是迫不得已的，任务必须完成，考核必须达标，这样一来，除了读者，谁会在意教材的质量呢？</p><p>在课上听讲，不如高中时忙里偷闲读的几本介绍人工智能的书。至少在当时，读书的心里还真是充满对知识的渴望。记得在紧张备战高考的时候，平时丝毫不感兴趣的书都能拿来读一读，在这个时候读书真的是充满了幸福。也许是当时离大学太远，知识才能离我那么近。如今在学校里，却没有了这样的感受这样的课程，即使是真正对人工智能感兴趣的人，上了课之后，也提不起劲来。</p><p>说到书，这门人工智能也有相应的配套教材，说起教材，真的是一点用都没有。我不知道市面上有那么多优秀的书，为什么偏偏会选择这本书，开本也和其他书不一样，放在一起都显得突兀。军事理论，大心理这些课的教材放到最后还能拿来应付开卷考试，这本人工智能教材只能放在架上吃灰。估计学校也知道，如果不进行期末的开卷考试的话，这些教材还有人买吗？</p><p>总之，在这样一个财经院校，这类的课程真的没有一点价值可言。在线的Kaggle学习都可以完美替代，还不用大费周章聘请老师讲课。</p>]]></content>
    
    
    
    <tags>
      
      <tag>life_record</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>线性规划</title>
    <link href="/2024/05/20/lp/"/>
    <url>/2024/05/20/lp/</url>
    
    <content type="html"><![CDATA[<p>解决线性规划问题Lingo用的比较多，但是Lingo存在很多缺点。</p><ol><li>Lingo是收费的，这样的小体量软件，大部分学校也不会专门采购。对于学生来说，只能用盗版，安装繁琐。</li><li>Lingo只支持windows系统，对于使用linux系统的用户来说，不太方便。</li><li>Lingo的UI非常难看，比Matlab还要远古。</li><li>Lingo的语法错误提示非常诡异，有时候报错信息不太明确，甚至还有非常神奇的特性，不容易找到错误。上周听讲座时，老师写Lingo代码报错了，但是老师也不知道哪里错了。于是把代码剪下来，再重启Lingo，粘贴进去又可以运行了。在现场这让我大开眼界，而这种情况在Python和Matlab里是不会出现的，物理学在Lingo里是不存在的。</li><li>Lingo的求解速度不太理想，对于大规模问题，求解速度很慢,而且不会显示进度条，有时候无法掌握求解状态。</li><li>Lingo虽然简单，但是也要花时间学习，对于一些简单的线性规划问题，使用Lingo有点大材小用。</li></ol><p>使用熟悉的工具解决这类问题显然更好，而Python的轮子是最多的，有许多的开源求解器可以使用，比如scipy.optimize.linprog，但是这个求解器只支持简单的线性规划问题，不支持整数规划问题。有一个更强大的工具：glpk。glpk开源，可以用来求解线性规划问题。glpk支持多种语言，这里使用python调用glpk求解线性规划问题。使用pulp库可以更方便的调用glpk求解线性规划问题。<br>pulp作为单词的意思是纸浆，但是这个库的名字是Python Ultimate LP</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> pulp <span class="hljs-keyword">as</span> pl<br><span class="hljs-comment"># Define the model</span><br>lp_problem = pl.LpProblem(<span class="hljs-string">&quot;Max_z&quot;</span>, pl.LpMaximize)<br><span class="hljs-comment">#定义决策变量</span><br>x1 = pl.LpVariable(<span class="hljs-string">&#x27;x1&#x27;</span>, lowBound=<span class="hljs-number">0</span>, cat=<span class="hljs-string">&#x27;Continuous&#x27;</span>)<br>x2 = pl.LpVariable(<span class="hljs-string">&#x27;x2&#x27;</span>, lowBound=<span class="hljs-number">0</span>, cat=<span class="hljs-string">&#x27;Continuous&#x27;</span>)<br><span class="hljs-comment">#定义目标函数</span><br>lp_problem += <span class="hljs-number">3</span>*x1 + <span class="hljs-number">2</span>*x2, <span class="hljs-string">&quot;z&quot;</span><br><span class="hljs-comment">#定义约束条件</span><br>lp_problem += x1 + x2 &lt;= <span class="hljs-number">4</span><br>lp_problem += <span class="hljs-number">2</span>*x1 + x2 &lt;= <span class="hljs-number">7</span><br>lp_problem += x1 &lt;= <span class="hljs-number">3</span><br><span class="hljs-comment">#求解</span><br><span class="hljs-built_in">print</span>(lp_problem)  <span class="hljs-comment"># 打印问题</span><br><span class="hljs-built_in">print</span>(pl.LpStatus[lp_problem.status]) <span class="hljs-comment"># 打印问题状态</span><br>lp_problem.solve()  <span class="hljs-comment"># 求解问题</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;最优解为：&quot;</span>, pl.value(lp_problem.objective))<br><br></code></pre></td></tr></table></figure><pre><code class="hljs">Max_z:MAXIMIZE3*x1 + 2*x2 + 0SUBJECT TO_C1: x1 + x2 &lt;= 4_C2: 2 x1 + x2 &lt;= 7_C3: x1 &lt;= 3VARIABLESx1 Continuousx2 ContinuousNot Solved最优解为： 11.0</code></pre><p>但是后面我采用了Gurobi，是付费软件，但是在校学生有免费的许可证，非常容易申请，下面是一些题。</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>m</mi><mi>i</mi><mi>n</mi><mo stretchy="false">(</mo><mn>2</mn><mi>x</mi><mo>+</mo><mn>3</mn><mi>y</mi><mo>+</mo><mn>5</mn><mi>z</mi><mo stretchy="false">)</mo><mspace linebreak="newline"></mspace><mi>s</mi><mi mathvariant="normal">.</mi><mi>t</mi><mi mathvariant="normal">.</mi><mspace linebreak="newline"></mspace><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mi>x</mi><mo>+</mo><mn>2</mn><mi>y</mi><mo>+</mo><mn>2</mn><mi>z</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>≥</mo><mn>30</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mn>3</mn><mi>x</mi><mo>+</mo><mi>y</mi><mo>+</mo><mn>2</mn><mi>z</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>≥</mo><mn>20</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mn>2</mn><mi>x</mi><mo>+</mo><mi>y</mi><mo>+</mo><mn>10</mn><mi>z</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>≥</mo><mn>40</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mi>z</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mrow><mo fence="true">{</mo><mtable rowspacing="0.36em" columnalign="left left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>−</mo><mn>3</mn><mo separator="true">,</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mtext>if </mtext><mi>x</mi><mo>≥</mo><mn>1</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>6</mn><mo separator="true">,</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mtext>if </mtext><mi>x</mi><mo>&lt;</mo><mn>1</mn></mrow></mstyle></mtd></mtr></mtable></mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mi>x</mi><mo separator="true">,</mo><mi>y</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>≥</mo><mn>0</mn></mrow></mstyle></mtd></mtr></mtable></mrow><annotation encoding="application/x-tex">min(2x+3y+5z)\\s.t.\\\begin{align*}    x + 2y + 2z &amp;\geq 30 \\    3x + y + 2z &amp;\geq 20 \\    2x + y + 10z &amp;\geq 40 \\    z &amp;=     \begin{cases}     -3, &amp; \text{if } x \geq 1 \\    6, &amp; \text{if } x &lt; 1 \\    \end{cases} \\    x, y &amp;\geq 0\end{align*}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">min</span><span class="mopen">(</span><span class="mord">2</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em;"></span><span class="mord">3</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">5</span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="mclose">)</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="mord mathnormal">s</span><span class="mord">.</span><span class="mord mathnormal">t</span><span class="mord">.</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:9.3em;vertical-align:-4.4em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:4.9em;"><span style="top:-7.81em;"><span class="pstrut" style="height:3.75em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span></span></span><span style="top:-6.31em;"><span class="pstrut" style="height:3.75em;"></span><span class="mord"><span class="mord">3</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span></span></span><span style="top:-4.81em;"><span class="pstrut" style="height:3.75em;"></span><span class="mord"><span class="mord">2</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">10</span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span></span></span><span style="top:-2.4em;"><span class="pstrut" style="height:3.75em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.04398em;">z</span></span></span><span style="top:-0.01em;"><span class="pstrut" style="height:3.75em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:4.4em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:4.9em;"><span style="top:-7.81em;"><span class="pstrut" style="height:3.75em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">30</span></span></span><span style="top:-6.31em;"><span class="pstrut" style="height:3.75em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">20</span></span></span><span style="top:-4.81em;"><span class="pstrut" style="height:3.75em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">40</span></span></span><span style="top:-2.4em;"><span class="pstrut" style="height:3.75em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size4">{</span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord">−</span><span class="mord">3</span><span class="mpunct">,</span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord">6</span><span class="mpunct">,</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:1em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">if </span></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">1</span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">if </span></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:-0.01em;"><span class="pstrut" style="height:3.75em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:4.4em;"><span></span></span></span></span></span></span></span></span></span></span></span></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> gurobipy <br><span class="hljs-keyword">from</span> gurobipy <span class="hljs-keyword">import</span> GRB<br><br>        <br>model = gurobipy.Model(<span class="hljs-string">&#x27;q1&#x27;</span>)<br><span class="hljs-comment"># add variables</span><br>x = model.addVar(vtype=GRB.CONTINUOUS, name=<span class="hljs-string">&#x27;x&#x27;</span>)<br>y = model.addVar(vtype=GRB.CONTINUOUS, name=<span class="hljs-string">&#x27;y&#x27;</span>)<br>z = model.addVar(vtype=GRB.CONTINUOUS, name=<span class="hljs-string">&#x27;z&#x27;</span>)<br>model.update() <span class="hljs-comment"># if not update, the variables will not be added to the model</span><br><span class="hljs-comment"># set objective</span><br>model.setObjective(<span class="hljs-number">2</span>*x + <span class="hljs-number">3</span>*y + <span class="hljs-number">5</span>*z, sense=GRB.MINIMIZE)<br><span class="hljs-comment"># add constraints</span><br>model.addConstr(x + <span class="hljs-number">2</span>*y + <span class="hljs-number">2</span>*z &gt;= <span class="hljs-number">30</span>)<br>model.addConstr(<span class="hljs-number">3</span>*x + y +<span class="hljs-number">2</span>*z &gt;= <span class="hljs-number">20</span>)<br>model.addConstr(<span class="hljs-number">2</span>*x + y + <span class="hljs-number">10</span>*z &lt;=<span class="hljs-number">50</span>)<br>model.addConstr(<span class="hljs-number">2</span>*x + y + <span class="hljs-number">10</span>*z &gt;= <span class="hljs-number">40</span>)<br>model.addConstrs((i&gt;=<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> [x,y,z]), <span class="hljs-string">&#x27;nonneg&#x27;</span>) <span class="hljs-comment"># non-negative constraints，但是没有必要，因为默认就是非负的</span><br><span class="hljs-comment"># solve</span><br>model.optimize()<br><span class="hljs-comment"># print solution</span><br><br><span class="hljs-built_in">print</span>(model.getVars()) <span class="hljs-comment"># get all variables,return a list of variables</span><br><br><span class="hljs-comment"># use a function to display the output</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">display_out</span>(<span class="hljs-params">model</span>):<br>    <span class="hljs-keyword">if</span> model.status == gurobipy.GRB.OPTIMAL:<br>        <span class="hljs-keyword">for</span> var <span class="hljs-keyword">in</span> model.getVars():<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&#x27;<span class="hljs-subst">&#123;var.varName&#125;</span> = <span class="hljs-subst">&#123;var.x&#125;</span>&#x27;</span>)<br>        <span class="hljs-comment"># 输出目标值</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">f&#x27;Objective value: <span class="hljs-subst">&#123;model.ObjVal&#125;</span>&#x27;</span>)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;No optimal solution found.&quot;</span>)<br><br>display_out(model)<br></code></pre></td></tr></table></figure><pre><code class="hljs">Gurobi Optimizer version 11.0.2 build v11.0.2rc0 (win64 - Windows 11+.0 (26100.2))CPU model: 11th Gen Intel(R) Core(TM) i5-1135G7 @ 2.40GHz, instruction set [SSE2|AVX|AVX2|AVX512]Thread count: 4 physical cores, 8 logical processors, using up to 8 threadsOptimize a model with 7 rows, 3 columns and 15 nonzerosModel fingerprint: 0xb2aec4d2Coefficient statistics:  Matrix range     [1e+00, 1e+01]  Objective range  [2e+00, 5e+00]  Bounds range     [0e+00, 0e+00]  RHS range        [2e+01, 5e+01]Presolve removed 4 rows and 0 columnsPresolve time: 0.01sPresolved: 3 rows, 4 columns, 10 nonzerosIteration    Objective       Primal Inf.    Dual Inf.      Time       0    0.0000000e+00   8.750000e+00   0.000000e+00      0s       3    5.0714286e+01   0.000000e+00   0.000000e+00      0sSolved in 3 iterations and 0.01 seconds (0.00 work units)Optimal objective  5.071428571e+01[&lt;gurobi.Var x (value 0.9523809523809523)&gt;, &lt;gurobi.Var y (value 11.904761904761903)&gt;, &lt;gurobi.Var z (value 2.619047619047619)&gt;]x = 0.9523809523809523y = 11.904761904761903z = 2.619047619047619Objective value: 50.71428571428571</code></pre><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>m</mi><mi>i</mi><mi>n</mi><mo stretchy="false">(</mo><mn>2</mn><mi>x</mi><mo>+</mo><mn>3</mn><mi>y</mi><mo>+</mo><mn>5</mn><mi>z</mi><mo stretchy="false">)</mo><mspace linebreak="newline"></mspace><mi>s</mi><mi mathvariant="normal">.</mi><mi>t</mi><mi mathvariant="normal">.</mi><mspace linebreak="newline"></mspace><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mi>x</mi><mo>+</mo><mn>2</mn><mi>y</mi><mo>+</mo><mn>2</mn><mi>z</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>≥</mo><mn>30</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mn>3</mn><mi>x</mi><mo>+</mo><mi>y</mi><mo>+</mo><mn>2</mn><mi>z</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>≥</mo><mn>20</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mn>2</mn><mi>x</mi><mo>+</mo><mi>y</mi><mo>+</mo><mn>10</mn><mi>z</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>≥</mo><mn>40</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mi>z</mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mrow><mo fence="true">{</mo><mtable rowspacing="0.36em" columnalign="left left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>−</mo><mn>3</mn><mo separator="true">,</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mtext>if </mtext><mi>x</mi><mo>≥</mo><mn>1</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>6</mn><mo separator="true">,</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mtext>if </mtext><mi>x</mi><mo>&lt;</mo><mn>1</mn></mrow></mstyle></mtd></mtr></mtable></mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mi>x</mi><mo separator="true">,</mo><mi>y</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>≥</mo><mn>0</mn></mrow></mstyle></mtd></mtr></mtable></mrow><annotation encoding="application/x-tex">min(2x+3y+5z)\\s.t.\\\begin{align*}x + 2y + 2z &amp; \geq 30 \\3x + y + 2z &amp; \geq 20 \\2x + y + 10z &amp; \geq 40 \\z &amp; = \begin{cases} -3, &amp; \text{if } x \geq 1 \\6, &amp; \text{if } x &lt; 1 \\\end{cases} \\x, y &amp; \geq 0\end{align*}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">min</span><span class="mopen">(</span><span class="mord">2</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em;"></span><span class="mord">3</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">5</span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="mclose">)</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="mord mathnormal">s</span><span class="mord">.</span><span class="mord mathnormal">t</span><span class="mord">.</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:9.3em;vertical-align:-4.4em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:4.9em;"><span style="top:-7.81em;"><span class="pstrut" style="height:3.75em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span></span></span><span style="top:-6.31em;"><span class="pstrut" style="height:3.75em;"></span><span class="mord"><span class="mord">3</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span></span></span><span style="top:-4.81em;"><span class="pstrut" style="height:3.75em;"></span><span class="mord"><span class="mord">2</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">10</span><span class="mord mathnormal" style="margin-right:0.04398em;">z</span></span></span><span style="top:-2.4em;"><span class="pstrut" style="height:3.75em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.04398em;">z</span></span></span><span style="top:-0.01em;"><span class="pstrut" style="height:3.75em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:4.4em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:4.9em;"><span style="top:-7.81em;"><span class="pstrut" style="height:3.75em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">30</span></span></span><span style="top:-6.31em;"><span class="pstrut" style="height:3.75em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">20</span></span></span><span style="top:-4.81em;"><span class="pstrut" style="height:3.75em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">40</span></span></span><span style="top:-2.4em;"><span class="pstrut" style="height:3.75em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size4">{</span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord">−</span><span class="mord">3</span><span class="mpunct">,</span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord">6</span><span class="mpunct">,</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:1em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">if </span></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">1</span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord text"><span class="mord">if </span></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:-0.01em;"><span class="pstrut" style="height:3.75em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:4.4em;"><span></span></span></span></span></span></span></span></span></span></span></span></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> gurobipy <span class="hljs-keyword">as</span> gp<br><span class="hljs-keyword">from</span> gurobipy <span class="hljs-keyword">import</span> GRB<br><br>model2 = gurobipy.Model(<span class="hljs-string">&#x27;q2&#x27;</span>)<br><span class="hljs-comment"># add variables</span><br>x = model2.addVar(vtype=GRB.CONTINUOUS,lb=<span class="hljs-number">0</span>, name=<span class="hljs-string">&#x27;x&#x27;</span>)<br>y = model2.addVar(vtype=GRB.CONTINUOUS,lb=<span class="hljs-number">0</span>,name=<span class="hljs-string">&#x27;y&#x27;</span>)<br>z = model2.addVar(vtype=GRB.CONTINUOUS, name=<span class="hljs-string">&#x27;z&#x27;</span>)<br>b1 = model2.addVar(vtype=GRB.BINARY, name=<span class="hljs-string">&#x27;b1&#x27;</span>) <span class="hljs-comment">#add binary variable</span><br>model2.update() <span class="hljs-comment">#用了addConstraint之后，需要update一下，否则会报错</span><br><span class="hljs-comment">#target function</span><br>model2.setObjective(<span class="hljs-number">2</span>*x + <span class="hljs-number">3</span>*y + <span class="hljs-number">5</span>*z, sense=GRB.MINIMIZE)<br><span class="hljs-comment"># add constraints</span><br>model2.addConstr(x +<span class="hljs-number">2</span>*y + <span class="hljs-number">2</span>*z &gt;= <span class="hljs-number">30</span>)<br>model2.addConstr(<span class="hljs-number">3</span>*x + y + <span class="hljs-number">2</span>*z &gt;= <span class="hljs-number">20</span>)<br>model2.addConstr(<span class="hljs-number">2</span>*x + y + <span class="hljs-number">10</span>*z &gt;= <span class="hljs-number">40</span>)<br><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">可以省去这种写法，直接在addVar的时候就加上约束条件  </span><br><span class="hljs-string">model2.addConstrs((i&gt;=0 for i in [x,y]))</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><br><span class="hljs-comment"># 这里采用gurobipy的方法来添加条件约束,后面需要用到大M法，以后再说</span><br>model2.addGenConstrIndicator(b1,<span class="hljs-literal">True</span>,x&gt;=<span class="hljs-number">1</span>,name=<span class="hljs-string">&#x27;x_cond&#x27;</span>)<br>model2.addGenConstrIndicator(b1,<span class="hljs-literal">True</span>,z == -<span class="hljs-number">3</span>,name=<span class="hljs-string">&#x27;x_cond1&#x27;</span>)<br>model2.addGenConstrIndicator(b1,<span class="hljs-literal">False</span>,z == <span class="hljs-number">6</span>,name=<span class="hljs-string">&#x27;x_cond2&#x27;</span>)<br><span class="hljs-comment">#optimize</span><br>model2.optimize()<br>display_out(model2)<br></code></pre></td></tr></table></figure><pre><code class="hljs">Gurobi Optimizer version 11.0.2 build v11.0.2rc0 (win64 - Windows 11+.0 (26100.2))CPU model: 11th Gen Intel(R) Core(TM) i5-1135G7 @ 2.40GHz, instruction set [SSE2|AVX|AVX2|AVX512]Thread count: 4 physical cores, 8 logical processors, using up to 8 threadsOptimize a model with 3 rows, 4 columns and 9 nonzerosModel fingerprint: 0x74cceb2cModel has 3 general constraintsVariable types: 3 continuous, 1 integer (1 binary)Coefficient statistics:  Matrix range     [1e+00, 1e+01]  Objective range  [2e+00, 5e+00]  Bounds range     [1e+00, 1e+00]  RHS range        [2e+01, 4e+01]  GenCon rhs range [1e+00, 6e+00]  GenCon coe range [1e+00, 1e+00]Presolve removed 3 rows and 4 columnsPresolve time: 0.01sPresolve: All rows and columns removedExplored 0 nodes (0 simplex iterations) in 0.03 seconds (0.00 work units)Thread count was 1 (of 8 available processors)Solution count 1: 57 Optimal solution found (tolerance 1.00e-04)Best objective 5.700000000000e+01, best bound 5.700000000000e+01, gap 0.0000%x = -0.0y = 9.0z = 6.0b1 = 0.0Objective value: 57.0</code></pre><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>m</mi><mi>a</mi><mi>x</mi><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mn>10</mn></munderover><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mn>5</mn></munderover><msub><mi>a</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo stretchy="false">(</mo><msub><mi>x</mi><mi>i</mi></msub><mo>+</mo><msub><mi>y</mi><mi>j</mi></msub><mo stretchy="false">)</mo><mspace linebreak="newline"></mspace><mo stretchy="false">(</mo><msub><mi>a</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo stretchy="false">)</mo><mo>=</mo><mrow><mo fence="true">(</mo><mtable rowspacing="0.16em" columnalign="center center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mo lspace="0em" rspace="0em">⋯</mo></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>5</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>6</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>7</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mo lspace="0em" rspace="0em">⋯</mo></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>10</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mi><mi mathvariant="normal">⋮</mi><mpadded height="0em" voffset="0em"><mspace mathbackground="black" width="0em" height="1.5em"></mspace></mpadded></mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi><mi mathvariant="normal">⋮</mi><mpadded height="0em" voffset="0em"><mspace mathbackground="black" width="0em" height="1.5em"></mspace></mpadded></mi></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mo lspace="0em" rspace="0em">⋱</mo></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mi><mi mathvariant="normal">⋮</mi><mpadded height="0em" voffset="0em"><mspace mathbackground="black" width="0em" height="1.5em"></mspace></mpadded></mi></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>46</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>47</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mo lspace="0em" rspace="0em">⋯</mo></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>50</mn></mstyle></mtd></mtr></mtable><mo fence="true">)</mo></mrow><mspace linebreak="newline"></mspace><mtext>约束条件</mtext><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mn>10</mn></munderover><msub><mi>x</mi><mi>i</mi></msub></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>≤</mo><mn>100</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mn>5</mn></munderover><msub><mi>y</mi><mi>j</mi></msub></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>≤</mo><mn>200</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mn>5</mn></munderover><mo stretchy="false">(</mo><msub><mi>x</mi><mi>i</mi></msub><mo>+</mo><msub><mi>y</mi><mi>j</mi></msub><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>≥</mo><mn>150</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><msub><mi>x</mi><mi>i</mi></msub><mo separator="true">,</mo><msub><mi>y</mi><mi>j</mi></msub></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>≥</mo><mn>0</mn></mrow></mstyle></mtd></mtr></mtable></mrow><annotation encoding="application/x-tex">max \sum_{i=1}^{10}\sum_{j=1}^{5} a_{ij}(x_i+y_j) \\(a_{ij}) =\begin{pmatrix} 1 &amp; 2 &amp; \cdots &amp; 5 \\6 &amp; 7 &amp; \cdots &amp; 10 \\\vdots &amp; \vdots &amp; \ddots &amp; \vdots \\46 &amp; 47 &amp; \cdots &amp; 50 \\\end{pmatrix}      \\约束条件 \begin{align*}\sum_{i=1}^{10} x_i &amp; \leq 100 \\\sum_{j=1}^{5} y_j &amp; \leq 200 \\\sum_{i=1}^{5} (x_i+y_j) &amp; \geq 150 \\x_i, y_j &amp; \geq 0\end{align*}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3.2149em;vertical-align:-1.4138em;"></span><span class="mord mathnormal">ma</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8011em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">10</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8011em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">5</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.4138em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:5.46em;vertical-align:-2.48em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.95em;"><span style="top:-4.95em;"><span class="pstrut" style="height:7.4em;"></span><span style="width:0.875em;height:5.400em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.875em" height="5.400em" viewbox="0 0 875 5400"><path d="M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,-36,557 l0,1884c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189l0,-1892c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.45em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.98em;"><span style="top:-5.8275em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-4.6275em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord">6</span></span></span><span style="top:-2.7675em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord">⋮</span><span class="mord rule" style="border-right-width:0em;border-top-width:1.5em;bottom:0em;"></span></span></span></span><span style="top:-1.5675em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord">46</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.48em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.98em;"><span style="top:-5.8275em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-4.6275em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord">7</span></span></span><span style="top:-2.7675em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord">⋮</span><span class="mord rule" style="border-right-width:0em;border-top-width:1.5em;bottom:0em;"></span></span></span></span><span style="top:-1.5675em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord">47</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.48em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.98em;"><span style="top:-5.64em;"><span class="pstrut" style="height:3.5em;"></span><span class="mord"><span class="minner">⋯</span></span></span><span style="top:-4.44em;"><span class="pstrut" style="height:3.5em;"></span><span class="mord"><span class="minner">⋯</span></span></span><span style="top:-2.58em;"><span class="pstrut" style="height:3.5em;"></span><span class="mord"><span class="minner">⋱</span></span></span><span style="top:-1.38em;"><span class="pstrut" style="height:3.5em;"></span><span class="mord"><span class="minner">⋯</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.48em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.98em;"><span style="top:-5.8275em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord">5</span></span></span><span style="top:-4.6275em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord">10</span></span></span><span style="top:-2.7675em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord"><span class="mord">⋮</span><span class="mord rule" style="border-right-width:0em;border-top-width:1.5em;bottom:0em;"></span></span></span></span><span style="top:-1.5675em;"><span class="pstrut" style="height:3.6875em;"></span><span class="mord"><span class="mord">50</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.48em;"><span></span></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.95em;"><span style="top:-4.95em;"><span class="pstrut" style="height:7.4em;"></span><span style="width:0.875em;height:5.400em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.875em" height="5.400em" viewbox="0 0 875 5400"><path d="M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,1809c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558l0,-1944c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.45em;"><span></span></span></span></span></span></span></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:11.7725em;vertical-align:-5.6362em;"></span><span class="mord cjk_fallback">约束条件</span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:6.1362em;"><span style="top:-8.1362em;"><span class="pstrut" style="height:3.8011em;"></span><span class="mord"><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8011em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">10</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-4.7574em;"><span class="pstrut" style="height:3.8011em;"></span><span class="mord"><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8011em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">5</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.4138em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span><span style="top:-1.2426em;"><span class="pstrut" style="height:3.8011em;"></span><span class="mord"><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.8011em;"><span style="top:-1.8723em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.05em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.3em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">5</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2777em;"><span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span><span style="top:1.1751em;"><span class="pstrut" style="height:3.8011em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:5.6362em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:6.1362em;"><span style="top:-8.1362em;"><span class="pstrut" style="height:3.8011em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">100</span></span></span><span style="top:-4.7574em;"><span class="pstrut" style="height:3.8011em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">200</span></span></span><span style="top:-1.2426em;"><span class="pstrut" style="height:3.8011em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">150</span></span></span><span style="top:1.1751em;"><span class="pstrut" style="height:3.8011em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:5.6362em;"><span></span></span></span></span></span></span></span></span></span></span></span></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> gurobipy <span class="hljs-keyword">as</span> gp<br><span class="hljs-keyword">from</span> gurobipy <span class="hljs-keyword">import</span> GRB<br><br>model3 = gp.Model(<span class="hljs-string">&#x27;q3&#x27;</span>)<br><span class="hljs-comment"># add variables</span><br>x = model3.addVars(<span class="hljs-number">10</span>,lb=<span class="hljs-number">0</span>,name=<span class="hljs-string">&#x27;x&#x27;</span>)<br>y = model3.addVars(<span class="hljs-number">5</span>,lb=<span class="hljs-number">0</span>,name=<span class="hljs-string">&#x27;y&#x27;</span>)<br>a = [[<span class="hljs-number">1</span>+<span class="hljs-number">5</span>*i +j <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>)] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>)]<br><span class="hljs-comment">#add target function</span><br>model3.setObjective(gurobipy.quicksum(a[i][j] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>)), sense=GRB.MAXIMIZE)<br><span class="hljs-comment">#add constraints</span><br>model3.addConstr(gp.quicksum(x[i] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>)) &lt;= <span class="hljs-number">100</span>)<br>model3.addConstr(gp.quicksum(y[j] <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>)) &lt;= <span class="hljs-number">200</span>)<br>model3.addConstr(gp.quicksum(x[i] + y[j] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>)) &gt;= <span class="hljs-number">150</span>)<br><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">可选，添加非负约束，但是之前在addVars的时候已经添加了</span><br><span class="hljs-string">model3.addConstrs((x[i] &gt;= 0 for i in range(10)), &#x27;nonneg&#x27;)</span><br><span class="hljs-string">model3.addConstrs((y[j] &gt;= 0 for j in range(5)), &#x27;nonneg&#x27;)</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><br><span class="hljs-comment">#optimize</span><br>model3.optimize()<br>display_out(model3)<br></code></pre></td></tr></table></figure><pre><code class="hljs">Gurobi Optimizer version 11.0.2 build v11.0.2rc0 (win64 - Windows 11+.0 (26100.2))CPU model: 11th Gen Intel(R) Core(TM) i5-1135G7 @ 2.40GHz, instruction set [SSE2|AVX|AVX2|AVX512]Thread count: 4 physical cores, 8 logical processors, using up to 8 threadsOptimize a model with 3 rows, 15 columns and 30 nonzerosModel fingerprint: 0x53991e8cCoefficient statistics:  Matrix range     [1e+00, 1e+01]  Objective range  [0e+00, 0e+00]  Bounds range     [0e+00, 0e+00]  RHS range        [1e+02, 2e+02]Presolve removed 3 rows and 15 columnsPresolve time: 0.04sPresolve: All rows and columns removedIteration    Objective       Primal Inf.    Dual Inf.      Time       0    1.2750000e+03   0.000000e+00   0.000000e+00      0sSolved in 0 iterations and 0.05 seconds (0.00 work units)Optimal objective  1.275000000e+03x[0] = 0.0x[1] = 100.0x[2] = 0.0x[3] = 0.0x[4] = 0.0x[5] = 0.0x[6] = 0.0x[7] = 0.0x[8] = 0.0x[9] = 0.0y[0] = 0.0y[1] = 0.0y[2] = 0.0y[3] = 0.0y[4] = 200.0Objective value: 1275.0</code></pre><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>找满足下式的整数解</mtext><mspace linebreak="newline"></mspace><mi>m</mi><mi>i</mi><mi>n</mi><mi>f</mi><mo>=</mo><mo stretchy="false">(</mo><msup><mi>x</mi><mn>2</mn></msup><mo>−</mo><mn>4</mn><mi>y</mi><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo>+</mo><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mn>2</mn><mi>x</mi><msup><mo stretchy="false">)</mo><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">找满足下式的整数解 \\min f = (x^2-4y)^2+(1-2x)^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">找满足下式的整数解</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">min</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.1141em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.1141em;vertical-align:-0.25em;"></span><span class="mord">4</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.1141em;vertical-align:-0.25em;"></span><span class="mord">2</span><span class="mord mathnormal">x</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> gurobipy <span class="hljs-keyword">as</span> gp   <br><span class="hljs-keyword">from</span> gurobipy <span class="hljs-keyword">import</span> GRB    <br><span class="hljs-comment">#</span><br>model4 = gp.Model(<span class="hljs-string">&#x27;q4&#x27;</span>)<br><span class="hljs-comment"># add variables</span><br>x = model4.addVar(vtype=GRB.INTEGER,lb = -GRB.INFINITY ,name=<span class="hljs-string">&#x27;x&#x27;</span>)<br>y = model4.addVar(vtype=GRB.INTEGER,lb= -GRB.INFINITY,name=<span class="hljs-string">&#x27;y&#x27;</span>)<br>t1 = model4.addVar(vtype=GRB.CONTINUOUS, name=<span class="hljs-string">&#x27;t1&#x27;</span>)<br>t2 = model4.addVar(vtype=GRB.CONTINUOUS, name=<span class="hljs-string">&#x27;t2&#x27;</span>)<br><span class="hljs-comment"># 添加非线性约束,这里需要特殊的转化，将非线性约束转化为线性约束</span><br>model4.addConstr(t1 == x*x - <span class="hljs-number">4</span>*y, name=<span class="hljs-string">&quot;t1_constraint&quot;</span>)<br>model4.addConstr(t2 == <span class="hljs-number">1</span> - <span class="hljs-number">2</span>*x, name=<span class="hljs-string">&quot;t2_constraint&quot;</span>)<br><span class="hljs-comment"># 设置目标函数</span><br>model4.setObjective(t1**<span class="hljs-number">2</span> + t2**<span class="hljs-number">2</span>, GRB.MINIMIZE)<br><span class="hljs-comment">#solve</span><br>model4.optimize()<br>display_out(model4)<br></code></pre></td></tr></table></figure><pre><code class="hljs">Gurobi Optimizer version 11.0.2 build v11.0.2rc0 (win64 - Windows 11+.0 (26100.2))CPU model: 11th Gen Intel(R) Core(TM) i5-1135G7 @ 2.40GHz, instruction set [SSE2|AVX|AVX2|AVX512]Thread count: 4 physical cores, 8 logical processors, using up to 8 threadsOptimize a model with 1 rows, 4 columns and 2 nonzerosModel fingerprint: 0x422167faModel has 2 quadratic objective termsModel has 1 quadratic constraintVariable types: 2 continuous, 2 integer (0 binary)Coefficient statistics:  Matrix range     [1e+00, 2e+00]  QMatrix range    [1e+00, 1e+00]  QLMatrix range   [1e+00, 4e+00]  Objective range  [0e+00, 0e+00]  QObjective range [2e+00, 2e+00]  Bounds range     [0e+00, 0e+00]  RHS range        [1e+00, 1e+00]Presolve time: 0.00sPresolved: 4 rows, 5 columns, 10 nonzerosPresolved model has 2 quadratic objective termsPresolved model has 1 bilinear constraint(s)Warning: Model contains variables with very large bounds participating         in product terms.         Presolve was not able to compute smaller bounds for these variables.         Consider bounding these variables or reformulating the model.</code></pre><p>​<br>​    Solving non-convex MIQCP<br>​<br>​    Variable types: 2 continuous, 3 integer (0 binary)<br>​<br>Root relaxation: objective 1.000000e+00, 0 iterations, 0.00 seconds (0.00 work units)</p><pre><code class="hljs">    Nodes    |    Current Node    |     Objective Bounds      |     Work Expl Unexpl |  Obj  Depth IntInf | Incumbent    BestBd   Gap | It/Node Time*    0     0               0       1.0000000    1.00000  0.00%     -    0sExplored 1 nodes (0 simplex iterations) in 0.05 seconds (0.00 work units)Thread count was 8 (of 8 available processors)Solution count 1: 1 Optimal solution found (tolerance 1.00e-04)Best objective 1.000000000000e+00, best bound 1.000000000000e+00, gap 0.0000%x = 0.0y = 0.0t1 = 0.0t2 = 1.0Objective value: 1.0</code></pre>]]></content>
    
    
    
    <tags>
      
      <tag>math</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>N_Queen 与柳湖</title>
    <link href="/2024/03/29/N-Queen/"/>
    <url>/2024/03/29/N-Queen/</url>
    
    <content type="html"><![CDATA[<h2 id="柳湖">柳湖</h2><p>问题从一个小组的招新传单中得来，写的很有趣，校鹅也非常的可爱，如下</p><p>柳湖的校鹅在某个时空中有了更强的领地意识，即在柳湖湖面中，它的周围不能有其他校鹅。假设栅格化的柳湖是一个由25个12米大小的正方形组成的大正方形，每个校鹅占据一个小正方形，它周围的直线和对角线的正方形内不能有其他校鹅。请问，我们的五只校鹅可以有多少种领地占据的可能？</p><p>问题翻译过来就是在一个二维数组中某一个元素周围的直线和对角线上不能有其他的元素存在，否则他们要打架，这和国际象棋中的皇后是一样的</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs markdown">0, 0, 0, 0 ,01, x, x, x ,x<br>0 ,0 ,0 ,0 ,0x, x, 0, 0 ,0<br>0 ,0 ,0 ,0 ,0  让一只鹅皇后在[0,0]的位置--&gt; x, 0, x, 0 ,0   那么我写x的地方就不能有其它的鹅了<br>0 ,0 ,0 ,0 ,0x, 0, 0, x ,0<br>0 ,0 ,0 ,0 ,0x, 0, 0, 0 ,x<br><br></code></pre></td></tr></table></figure><p>问的是有多少种校鹅的排列方式。</p><h2 id="校鹅">校鹅</h2><p>这里我采用编程的办法解决 (我写到最后，发现用时比手算多了不知道多少倍:-(</p><p>首先，要生成一个5X5的矩阵的所有元素的索引</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#初始位置索引</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">func</span>()-&gt;<span class="hljs-built_in">list</span> :<br>    available_index = [] <br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>,<span class="hljs-number">5</span>):<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>,<span class="hljs-number">5</span>):          <br>            available_index.append([i,j]) <br>    <span class="hljs-keyword">return</span> available_index<br><br></code></pre></td></tr></table></figure><p>然后根据规则，找出一个元素占据了某一个位置时要排除的位置</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#生成位置排除列表 </span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">position_deduct</span>(<span class="hljs-params">arr</span>)-&gt;<span class="hljs-built_in">list</span>:<br>    row_index = arr[<span class="hljs-number">0</span>]<br>    column_index = arr[<span class="hljs-number">1</span>]<br>    deducted_list = []   <br>    i = row_index; j = column_index<br>    <br>    <span class="hljs-comment">#计算直线上的不可用位置</span><br>    <span class="hljs-keyword">for</span> m <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(-<span class="hljs-number">10</span>,<span class="hljs-number">10</span>):  <span class="hljs-comment">#偏移量，随便取值</span><br>        <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(-<span class="hljs-number">10</span>,<span class="hljs-number">10</span>): <span class="hljs-comment">#列</span><br>            <span class="hljs-keyword">if</span> -i &lt;= m &lt;= <span class="hljs-number">4</span>-i :  <br>                deducted_position = [i+m,j]<br>                deducted_list.append(deducted_position)<br>            <span class="hljs-keyword">else</span>:<span class="hljs-keyword">pass</span><br>            <span class="hljs-keyword">if</span> -j &lt;= k &lt;= <span class="hljs-number">4</span>-j:  <span class="hljs-comment">#行</span><br>                deducted_position = [i,j+k]<br>                deducted_list.append(deducted_position) <br>    <span class="hljs-comment">#计算对角线上的不可用位置 ok</span><br>    <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(-<span class="hljs-number">10</span>,<span class="hljs-number">10</span>):<span class="hljs-comment">#主对角线</span><br>        <span class="hljs-keyword">if</span> -i &lt;= k &lt;= <span class="hljs-number">4</span>-i <span class="hljs-keyword">and</span> -j &lt;= k &lt;= <span class="hljs-number">4</span>-j:<br>            p = k<br>            deducted_position = [i+p,j+p]<br>            deducted_list.append(deducted_position)<br>    <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(-<span class="hljs-number">10</span>,<span class="hljs-number">10</span>):<span class="hljs-comment">#副对角线</span><br>        <span class="hljs-keyword">if</span> i-<span class="hljs-number">4</span> &lt;= k &lt;= i <span class="hljs-keyword">and</span> -j &lt;= k &lt;= <span class="hljs-number">4</span>-j:<br>            p = k<br>            deducted_position = [i-p,j+p]<br>            deducted_list.append(deducted_position)<br>    <span class="hljs-comment">#这里对生成的列表进行去重</span><br>    temp = []<br>    <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> deducted_list:<br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> item <span class="hljs-keyword">in</span> temp:<br>            temp.append(item)<br>       <br>    deducted_list = temp<br>    <span class="hljs-keyword">return</span> deducted_list<br></code></pre></td></tr></table></figure><p>有了不可以使用的位置，还需要根据它找出可用的位置</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#可用位置计算 </span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">available_position</span>(<span class="hljs-params">position_pool,position_deduct_list</span>):<br>    new_position_pool = [item <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> position_pool <span class="hljs-keyword">if</span> item <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> position_deduct_list]<br>    position_pool = new_position_pool<br>    <span class="hljs-keyword">return</span> position_pool<br></code></pre></td></tr></table></figure><p>好了，工具准备齐了，开始写主程序。问题有点复杂，我写的也很复杂，这种代码拿到网上要被痛批的</p><p>我用了五层的for循环，只为遍历每一种情况，最后生成的列表包含大量重复的子列表，还需要进一步处理，为什么会有重复呢，这是遍历不能避免的问题。这里很有改进的空间，用递归或许可以。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#主程序</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>(<span class="hljs-params">first_list</span>):<br>    result_list = []<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> first_list:<br>        <br>        x_1 = <span class="hljs-number">0</span>;x_2 = <span class="hljs-number">0</span>;x_3= <span class="hljs-number">0</span>;x_4 = <span class="hljs-number">0</span>;x_5=<span class="hljs-number">0</span><br>        <br>        x_1 = i<br>        position_deduct_1 = position_deduct(i)<br>        second_list = available_position(first_list,position_deduct_1)<br>            <br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> second_list:<br>               <br>            x_2 = j                   <br>            position_deduct_2 = position_deduct(j)                    <br>            third_list = available_position(second_list,position_deduct_2)<br>                <br>            <span class="hljs-keyword">for</span> a <span class="hljs-keyword">in</span> third_list:<br>                        <br>                x_3 = a<br>                position_deduct_3 = position_deduct(a)          <br>                fourth_list = available_position(third_list,position_deduct_3)<br>                <span class="hljs-keyword">for</span> b <span class="hljs-keyword">in</span> fourth_list:<br>                                <br>                    x_4 = b<br>                    position_deduct_4 = position_deduct(b)<br>                                    <br>                    fifth_list = available_position(fourth_list,position_deduct_4)<br>                    <span class="hljs-keyword">for</span> c <span class="hljs-keyword">in</span> fifth_list:<br>                        x_5 = c<br>                        result_list.append([x_1,x_2,x_3,x_4,x_5])<br>    <span class="hljs-comment">#print(result_list)                                  </span><br>    <span class="hljs-keyword">return</span> result_list  <br><br></code></pre></td></tr></table></figure><p>生成了如下的列表：</p><p>[[[0, 0], [1, 2], [2, 4], [3, 1], [4, 3]], [[0, 0], [1, 2], [2, 4], [4, 3], [3, 1]], [[0, 0], [1, 2], [3, 1], [2, 4], [4, 3]], [[0, 0], [1, 2], [3, 1], [4, 3], [2, 4]],…]</p><p>可以看到有很多重复的地方，重复的子列表表示的是重复的一个矩阵</p><p>那么先让它变成一个包含大量矩阵的列表</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">arraylist_convert</span>(<span class="hljs-params">t</span>):<br>    result = []<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> t:   <br>        arr = np.zeros([<span class="hljs-number">5</span>,<span class="hljs-number">5</span>],<span class="hljs-built_in">int</span>)  <br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> i:<br>            arr[j[<span class="hljs-number">0</span>]][j[<span class="hljs-number">1</span>]] = <span class="hljs-number">1</span> <span class="hljs-comment">#按照行标和列标赋值即可</span><br><br>        result.append(arr)<br>    <span class="hljs-keyword">return</span> result<br><br></code></pre></td></tr></table></figure><p>有了这样一个列表，去重即可。去重的部分是由AI写的，最后对最终所得列表进行计数即可。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">remove_duplicate_arrays</span>(<span class="hljs-params">arrays_list</span>):<br>    unique_arrays = <span class="hljs-built_in">set</span>()<br>    result = []<br><br>    <span class="hljs-keyword">for</span> array <span class="hljs-keyword">in</span> arrays_list:<br>        array_tuple = <span class="hljs-built_in">tuple</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">tuple</span>, array))  <span class="hljs-comment"># 将二维数组转换为元组</span><br>        <span class="hljs-keyword">if</span> array_tuple <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> unique_arrays:<br>            unique_arrays.add(array_tuple)<br>            result.append(array)<br>    <span class="hljs-keyword">return</span> result<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">count_num</span>(<span class="hljs-params">arr</span>):<br>    n = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> arr:<br>        n += <span class="hljs-number">1</span> <br>    <span class="hljs-keyword">return</span> n<br><br><br></code></pre></td></tr></table></figure><p>好了，写完了。完整代码如下</p><h2 id="Code">Code</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#初始位置索引选择 ok</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">func</span>()-&gt;<span class="hljs-built_in">list</span> :<br>    available_index = [] <br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>,<span class="hljs-number">5</span>):<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>,<span class="hljs-number">5</span>):          <br>            available_index.append([i,j]) <br>    <span class="hljs-keyword">return</span> available_index<br><br><span class="hljs-comment">#可用位置计算 ok</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">available_position</span>(<span class="hljs-params">position_pool,position_deduct_list</span>):<br>    new_position_pool = [item <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> position_pool <span class="hljs-keyword">if</span> item <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> position_deduct_list]<br>    position_pool = new_position_pool<br>    <span class="hljs-keyword">return</span> position_pool<br><br><span class="hljs-comment">#生成位置排除列表 ok</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">position_deduct</span>(<span class="hljs-params">arr</span>)-&gt;<span class="hljs-built_in">list</span>:<br>    row_index = arr[<span class="hljs-number">0</span>]<br>    column_index = arr[<span class="hljs-number">1</span>]<br>    deducted_list = []   <br>    i = row_index; j = column_index<br>    <br>    <span class="hljs-comment">#计算直线上的不可用位置</span><br>    <span class="hljs-keyword">for</span> m <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(-<span class="hljs-number">10</span>,<span class="hljs-number">10</span>):  <span class="hljs-comment">#偏移量，随便取值</span><br>        <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(-<span class="hljs-number">10</span>,<span class="hljs-number">10</span>): <span class="hljs-comment">#列</span><br>            <span class="hljs-keyword">if</span> -i &lt;= m &lt;= <span class="hljs-number">4</span>-i :  <br>                deducted_position = [i+m,j]<br>                deducted_list.append(deducted_position)<br>            <span class="hljs-keyword">else</span>:<span class="hljs-keyword">pass</span><br>            <span class="hljs-keyword">if</span> -j &lt;= k &lt;= <span class="hljs-number">4</span>-j:  <span class="hljs-comment">#行</span><br>                deducted_position = [i,j+k]<br>                deducted_list.append(deducted_position) <br>    <span class="hljs-comment">#计算对角线上的不可用位置 ok</span><br>    <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(-<span class="hljs-number">10</span>,<span class="hljs-number">10</span>):<span class="hljs-comment">#主对角线</span><br>        <span class="hljs-keyword">if</span> -i &lt;= k &lt;= <span class="hljs-number">4</span>-i <span class="hljs-keyword">and</span> -j &lt;= k &lt;= <span class="hljs-number">4</span>-j:<br>            p = k<br>            deducted_position = [i+p,j+p]<br>            deducted_list.append(deducted_position)<br>    <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(-<span class="hljs-number">10</span>,<span class="hljs-number">10</span>):<span class="hljs-comment">#副对角线</span><br>        <span class="hljs-keyword">if</span> i-<span class="hljs-number">4</span> &lt;= k &lt;= i <span class="hljs-keyword">and</span> -j &lt;= k &lt;= <span class="hljs-number">4</span>-j:<br>            p = k<br>            deducted_position = [i-p,j+p]<br>            deducted_list.append(deducted_position)<br>    <span class="hljs-comment">#去重</span><br>    temp = []<br>    <span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> deducted_list:<br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> item <span class="hljs-keyword">in</span> temp:<br>            temp.append(item)<br>       <br>    deducted_list = temp<br>    <span class="hljs-keyword">return</span> deducted_list<br><br><span class="hljs-comment">#主程序</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>(<span class="hljs-params">first_list</span>):<br>    result_list = []<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> first_list:<br>        <br>        x_1 = <span class="hljs-number">0</span>;x_2 = <span class="hljs-number">0</span>;x_3= <span class="hljs-number">0</span>;x_4 = <span class="hljs-number">0</span>;x_5=<span class="hljs-number">0</span><br>        <br>        x_1 = i<br>        position_deduct_1 = position_deduct(i)<br>        second_list = available_position(first_list,position_deduct_1)<br>            <br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> second_list:<br>               <br>            x_2 = j                   <br>            position_deduct_2 = position_deduct(j)                    <br>            third_list = available_position(second_list,position_deduct_2)<br>                <br>            <span class="hljs-keyword">for</span> a <span class="hljs-keyword">in</span> third_list:<br>                        <br>                x_3 = a<br>                position_deduct_3 = position_deduct(a)          <br>                fourth_list = available_position(third_list,position_deduct_3)<br>                <span class="hljs-keyword">for</span> b <span class="hljs-keyword">in</span> fourth_list:<br>                                <br>                    x_4 = b<br>                    position_deduct_4 = position_deduct(b)<br>                                    <br>                    fifth_list = available_position(fourth_list,position_deduct_4)<br>                    <span class="hljs-keyword">for</span> c <span class="hljs-keyword">in</span> fifth_list:<br>                        x_5 = c<br>                        result_list.append([x_1,x_2,x_3,x_4,x_5])<br>    <span class="hljs-built_in">print</span>(result_list)                                  <br>    <span class="hljs-keyword">return</span> result_list                                <br><br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">def</span> <span class="hljs-title function_">arraylist_convert</span>(<span class="hljs-params">t</span>):<br>    result = []<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> t:   <br>        arr = np.zeros([<span class="hljs-number">5</span>,<span class="hljs-number">5</span>],<span class="hljs-built_in">int</span>)  <br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> i:<br>            arr[j[<span class="hljs-number">0</span>]][j[<span class="hljs-number">1</span>]] = <span class="hljs-number">1</span><br><br>        result.append(arr)<br>    <span class="hljs-keyword">return</span> result<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">remove_duplicate_arrays</span>(<span class="hljs-params">arrays_list</span>):<br>    unique_arrays = <span class="hljs-built_in">set</span>()<br>    result = []<br><br>    <span class="hljs-keyword">for</span> array <span class="hljs-keyword">in</span> arrays_list:<br>        array_tuple = <span class="hljs-built_in">tuple</span>(<span class="hljs-built_in">map</span>(<span class="hljs-built_in">tuple</span>, array))  <span class="hljs-comment"># 将二维数组转换为元组</span><br>        <span class="hljs-keyword">if</span> array_tuple <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> unique_arrays:<br>            unique_arrays.add(array_tuple)<br>            result.append(array)<br>    <span class="hljs-keyword">return</span> result<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">count_num</span>(<span class="hljs-params">arr</span>):<br>    n = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> arr:<br>        n += <span class="hljs-number">1</span> <br>    <span class="hljs-keyword">return</span> n<br><br><br><span class="hljs-comment">#调用</span><br>init_list = func()<br>original_list = main(init_list)<br>r = arraylist_convert(original_list)<br>unique_arrays = remove_duplicate_arrays(r)<br>solve = count_num(unique_arrays)<br><span class="hljs-built_in">print</span>(solve)<br></code></pre></td></tr></table></figure><h2 id="一点想法">一点想法</h2><p>使用随机算法或许会简单一些</p><p>我觉得可以随机生成很多个矩阵，再判断他们到底符不符合要求，最后把符合要求的矩阵数除以总的生成矩阵的数量，得到概率，而题目所有矩阵的数量根据组合数可轻松算出来，乘以概率即可得到结果，这不比一个一个找简单多了。</p>]]></content>
    
    
    
    <tags>
      
      <tag>code_learning</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Log</title>
    <link href="/2024/03/11/about/"/>
    <url>/2024/03/11/about/</url>
    
    <content type="html"><![CDATA[<h2 id="2025-4">2025.4</h2><p>迁移完毕</p><h2 id="2024-6">2024.6</h2><p>更换了封面，符合当下的季节</p><h2 id="2024-4">2024.4</h2><p>添加了子站点<a href="https://silenzio111.github.io/A-Vitepress-Site/">https://silenzio111.github.io/A-Vitepress-Site/</a></p><h2 id="2024-3">2024.3</h2><p>建议使用暗色模式浏览，因为在暗色模式下代码的浏览效果要好一些。</p><h2 id="2023-11-27-改进了显示错误">2023.11.27  改进了显示错误</h2><p>突然发现导航栏是德语标题，在配置文件修改为中文。</p>]]></content>
    
    
    
    <tags>
      
      <tag>log</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>数据提取</title>
    <link href="/2024/01/05/pdfextract/"/>
    <url>/2024/01/05/pdfextract/</url>
    
    <content type="html"><![CDATA[<h1>从人写的文章中提取数据</h1><p>这是一篇文章</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><code class="hljs markdown">1 <br> 证券代码： 000001               证券简称：平安银行              公告编号： 2023-014 <br>优先股代码： 140002                                         优先股简称：平银优 01 <br> <br>平安银行股份 有限公司 拟续聘会计师事务所的公告  <br> <br>本公司及董事会全体成员保证信息披露的内容真实、准确、完整，没有虚假记载、误导<br>性陈述或重大遗漏。  <br> <br>特别提示：  <br>1、拟续聘的会计师事务所名称：安永华明会计师事务所 （特殊普通合伙 ）。 <br>2、本公司董事会及董事会审计委员会、独立董事对拟续聘会计师事务所不<br>存在异议。  <br>3、本次续聘会计师事务所事项 须提交本公司股东大会审议。  <br> <br>平安银行股份有限公司（以下简称 “本行”）于 2023年3月8日召开第 十<br>二届董事会第 六次会议，审议并通过了《 平安银行股份有限公司关于 聘请2023<br>年度会计师事务所的议案》 ，拟续聘安永华明会计师事务所 （特殊普通合伙 ）（以<br>下简称“安永华明 ”）担任本行 2023年度中国会计准则审计师 。上述议案 须提<br>交本行股东大会审议 。现将有关情况公告如下：  <br>一、拟续聘会计师事务所的基本情况  <br>（一）机构信息  <br>1、基本信息  <br>安永华明会计师事务所（特殊普通合伙）于 1992年9月成立， 2012年8月<br>完成本土化转制， 从一家中外合作的有限责任制事务所转制为特殊普通合伙制事<br>务所。安永华明总部设在北京，注册地址为北京市东城区东长安街 1号东方广场<br>安永大楼 17层01-12室。截至 2022年末，拥有合伙人 229人，首席合伙人为毛<br>鞍宁先生。  <br>截至 2022年末，安永华明拥有执业注册会计师 1,818人，其中拥有证券相<br>关业务服务经验的执业注册会计师超过 1,500人，注册会计师中签署过证券服务<br>业务审计报告的注册会计师超过 400人。  2 <br> 安永华明 2021年度业务总收入人民币 54.90亿元，其中审计业务收入人民<br>币52.82亿元，与证券业务 相关的收入为人民币 22.7亿元。 2021年度 A股上市<br>公司年报审计客户共计 116家，收费总额人民币 7.63亿元。安永华明 所提供服<br>务的上市公司主要 涉及制造业、金融业、批发和零售业、信息传输、软件和信息<br>技术服务业、房地产业等 行业，其中金融业 上市公司审计客户 20家。  <br>2、投资者保护能力  <br>安永华明具有良好的投资者保护能力， 已按照相关法律法规要求计提职业风<br>险基金和购买职业保险，保险涵盖北京总所和全部分所。已计提的职业风险基金<br>和已购买的职业保险累计赔偿限额之和超过人民币 2亿元。 安永华明近三年不存<br>在任何因与执业行为相关的民事诉讼而需承担民事责任的情况。  <br>3、诚信记录  <br>安永华明及从业人员近三年没有因执业行为受到任何刑事处罚、行政处罚，<br>以及证券交易所、行业协会等自律组织的自律监管措施和纪律处分。曾两次收到<br>证券监督管理机构出具警示函措施的决定，涉及从业人员十 三人。前述出具警示<br>函的决定属监督管理措施，并非行政处罚。根据相关法律法规的规定，该监督管<br>理措施不影响安永华明继续承接或执行证券服务业务和其他业务。  <br>（二）项目信息  <br>1、基本信息  <br>项目合伙人及签字注册会计师： 昌华女士， 于2006年成为注册会计师， 2001<br>年开始从事上市公司审计， 2001年开始在安永华明执业， 2021年开始为本 行提<br>供审计服务；近三年签署 或复核 5家上市公司审计报告 。 <br>项目质量控制复核合伙人： 田志勇先生，于 2013年成为注册会计师， 2007<br>年开始从事上市公司审计， 2015年开始在安永华明执业， 2022年开始为本行提<br>供审计服务；近三年签署或复核 4家上市公司审计报告。  <br>签字注册会计师：王阳燕女士， 于2017年成为注册会计师， 2012年开始从<br>事上市公司审计， 2012年开始在安永华明执业， 2021年开始为本 行提供审计服<br>务；近三年签署 或复核 1家上市公司审计报告 。 <br>  3 <br> 2、诚信记录  <br>项目合伙人、签字注册会计师、项目质量控制复核人近三年不存在因执业行<br>为受到刑事处罚，或受到证监会及其派出机构、行业主管部门的行政处罚、监督<br>管理措施，或受到证券交易场所、行业协会等自律组织的自律监管措施、纪律处<br>分的情况。  <br>3、独立性  <br>安永华明及上述项目合伙人、签字注册会计师、项目质量控制复核人等不存<br>在违反《中国注册会计师职业道德守则》对独立性要求的情形。  <br>4、审计收费  <br>平安银行股份有限公司 2023年度的审计费用拟定为 合计人民币 1,020万元，<br>较上年审计费用相比变化不大， 其中财务审计费用拟定为 人民币 870万元（包含<br>增值税及代垫费用） ，内部控制审计费用拟定为 人民币 150万元（包含增值税及<br>代垫费用） 。本次审计费用按照市场公允合理的定价原则，综合考虑业务规模、<br>审计工作量等因素后与安永华明协商确定。  <br>二、拟续聘会计师事务所履行的程序  <br>（一）审计委员会履职情况  <br>本行董事会审计委员会委员查阅了安永华明关于专业胜任能力、 投资者保护<br>能力、诚信状况和独立性 等相关资料，认为其能够满足为本行提供审计服务的要<br>求。本行第十二届董事会审计委员会第 四次会议审议通过了《平安银行股份有限<br>公司关于 聘请2023年度会计师事务所的议案》 ，并同意将该议案提交董事会审<br>议。  <br>（二）独立董事的事前认可情况和独立意见  <br>本行独立董事对 续聘会计师事务所的相关事项进行了事前认可并发表独立<br>意见：安永华明在专业胜任能 力、投资者保护能力、 诚信状况和独立性 等方面符<br>合监管规定。 续聘安永华明担任 本行 2023年度中国会计准则审计师的相关决策<br>程序符合 《公司法》 、 《证券法》 、 《深圳证券交易所股票上市规则》 及 《公司章程》<br>等有关规定。 独立董事同意本议案，并同意将本议案提交 本行股东大会审议。  <br>  4 <br> （三）董事会对议案审议和表决情况  <br>本行于 2023年3月8日召开第 十二届董事会第 六次会议，审议通过了《 平<br>安银行股份有限公司关于 聘请2023年度会计师事务所的议案》 。 本议案 须提交本<br>行股东大会审议。  <br>（四）生效日期  <br>本次续聘会计师事务所事项 须提交本行股东大会审议， 并自 本行股东大会审<br>议通过之日起生效。  <br>三、备查文件  <br>1、董事会决议；  <br>2、审计委员会履职证明文件；  <br>3、独立董事事前认可和独立意见；  <br>4、安永华明 基本情况说明 。 <br>特此公告。  <br> <br> <br>平安银行股份有限公司董事会  <br>2023年3月9日 <br></code></pre></td></tr></table></figure><p>要在这篇公告里提取出有关注册会计师的信息。有人会说这不是很简单吗，但是这样的文档有10000篇</p><p>那自然要用程序提取了</p><p>浅浅吐槽一下，这用常规方法（正则表达式）几乎不可能做到，这是人能做到的事吗？但看看日历，今夕是何年？</p><p>如今有了各种各样的大模型，这样的任务还是能办到的</p><h2 id="代码说明">代码说明</h2><p>准备工作，需要安装这些库</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs markdown">pandas<br>google.generativeai<br>PyPDF2<br></code></pre></td></tr></table></figure><p>代码主要分为两个部分，分为爬取文件和提取数据两大模块，先后执行</p><p>爬取完文件之后，进行数据提取</p><p>由于文件内容复杂，这里让AI来填充预先设定好的格式，格式为json的二维数组,为之后转化为excel格式做好准备</p><h2 id="提示词">提示词</h2><p>提示词至关重要，不同的提示词虽然在单个请求中表现几乎相同，但在大量请求中就会表现出差异</p><p>举个例子”提取到的项目合伙人开始从事上市公司审计的年份“，可能大家觉得就是开始审计的那一年，但在大量请求中，AI会理解为审计了多少年。因此不妨改成”提取到的项目合伙人开始从事上市公司审计的那一年“，这样就会更精确。</p><p>以下是AI提示词中的json数组格式部分</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs json"><br><span class="hljs-punctuation">&#123;</span><br><span class="hljs-attr">&quot;证券代码&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;提取到的证券代码&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;证券简称&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;提取到的证券简称&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;日期&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;提取到的日期按照yyyy-mm-dd的格式&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;审计承做的会计师事务所&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;提取到的审计承做的会计师事务所全称加合伙类型&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;项目合伙人&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;提取到的项目合伙人姓名&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;项目合伙人成为中国注册会计师的年份&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;提取到的项目合伙人成为中国注册会计师的年份&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;项目合伙人开始从事上市公司审计的年份&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;提取到的项目合伙人开始从事上市公司审计的年份&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;项目合伙人在本所工作的年份&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;提取到的项目合伙人在本所工作的年份&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;项目合伙人最近 3 年签署上市公司审计报告家数&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;提取到的项目合伙人最近 3 年签署上市公司审计报告家数&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;项目合伙人近 3 年是否受到刑事处罚、行政处罚、行政监管措施和自律处分&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;提取到的项目合伙人近 3 年是否受到刑事处罚、行政处罚、行政监管措施和自律处分（回答是否）&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;签字注册会计师&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;提取到的不同于项目合伙人的签字注册会计师姓名&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;签字注册会计师成为中国注册会计师的年份&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;提取到的签字注册会计师成为中国注册会计师的年份&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;签字注册会计师开始从事上市公司审计的年份&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;提取到的签字注册会计师开始从事上市公司审计的年份&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;签字注册会计师在本所工作的年份&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;提取到的签字注册会计师在本所工作的年份&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;签字注册会计师最近 3 年签署上市公司审计报告家数&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;提取到的签字注册会计师最近 3 年签署上市公司审计报告家数&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;签字注册会计师近 3 年是否受到刑事处罚、行政处罚、行政监管措施和自律处分&quot;</span><span class="hljs-punctuation">:</span><span class="hljs-string">&quot;根据提取到的签字注册会计师近 3 年是否受到刑事处罚、行政处罚、行政监管措施和自律处分回答是或者否&quot;</span><br><span class="hljs-punctuation">&#125;</span><br><br><br></code></pre></td></tr></table></figure><p>先运行Main，再执行error_retry</p><p>最后会得到一个data.txt</p><p>更改为json格式后使用vscode对json进行检查</p><p>确认json格式正确后即可转化为excel工作表。</p><h2 id="AI接口">AI接口</h2><p>这里使用的是Gemini，需要特殊的网络条件。不同的模型会用不同的请求方式，参考官方的说明文档</p><p>在实际使用中，Gemini表现并不能让人满意，若要更换模型，重写api_1方法即可。</p><p>以下是代码部分</p><h2 id="爬取文件的代码">爬取文件的代码</h2><p>这里爬取文件网上有现成的。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br></pre></td><td class="code"><pre><code class="hljs python"><br><span class="hljs-comment">## Step1：自定义参数</span><br><br><span class="hljs-comment"># 1、定义股票代码列表 和 爬取结果输出地址(最好指定一个空的文件夹)———必选项</span><br><br>Codelist_path = <span class="hljs-string">r&quot;&quot;</span><br>Output_path = <span class="hljs-string">r&quot;&quot;</span><br><br><br><span class="hljs-comment"># 此路径是Step4中的stock_list文件输出地址，若不执行Step4则无需修改</span><br>Stocklist_path = <span class="hljs-string">r&quot;&quot;</span><br><br><span class="hljs-comment"># 2、定义要爬取的报表类型（若同时爬取多项中间用;连接）———必选项</span><br><br><span class="hljs-comment"># 公司年度报告：category_ndbg_szsh</span><br><span class="hljs-comment"># 公司治理报告：category_gszl_szsh</span><br><br>Category_All = <span class="hljs-string">&quot;category_ndbg_szsh;category_sjdbg_szsh;category_dshgg_szsh;category_rcjy_szsh;category_sf_szsh;category_pg_szsh;category_kzzq_szsh;category_bcgz_szsh;category_tbclts_szsh;category_tszlq_szsh;category_cqdq_szsh;category_qtrz_szsh;category_jj_szsh;category_zf_szsh;category_gszl_szsh;category_jshgg_szsh;category_yjygjxz_szsh;category_bndbg_szsh;category_yjdbg_szsh;category_qyfpxzcs_szsh;category_gddh_szsh;category_zj_szsh;category_gqjl_szsh;category_gszq_szsh;category_gqbd_szsh;category_fxts_szsh;&quot;</span><br><br><span class="hljs-comment"># Category_A = Category_All</span><br><br><span class="hljs-comment"># Category_A = &quot;category_ndbg_szsh;&quot;</span><br><br>Category_A = <span class="hljs-string">&quot;category_rcjy_szsh&quot;</span><br><br><br><span class="hljs-comment"># **Category参数含义说明：**</span><br><br><span class="hljs-comment"># | category              | 含义       | category               | 含义     | category           | 含义     | category           | 含义     | category             | 含义           |</span><br><span class="hljs-comment"># | --------------------- | ---------- | ---------------------- | -------- | ------------------ | -------- | ------------------ | -------- | -------------------- | -------------- |</span><br><span class="hljs-comment"># | category_ndbg_szsh    | 年报       | category_qyfpxzcs_szsh | 权益分派 | category_gszl_szsh | 公司治理 | category_pg_szsh   | 配股     | category_gqbd_szsh   | 股权变动       |</span><br><span class="hljs-comment"># | category_bndbg_szsh   | 半年报     | category_dshgg_szsh    | 董事会   | category_zj_szsh   | 中介报告 | category_jj_szsh   | 解禁     | category_bcgz_szsh   | 补充更正       |</span><br><span class="hljs-comment"># | category_yjdbg_szsh   | 一季报     | category_jshgg_szsh    | 监事会   | category_sf_szsh   | 首发     | category_gszq_szsh | 公司债   | category_cqdq_szsh   | 澄清致歉       |</span><br><span class="hljs-comment"># | category_sjdbg_szsh   | 三季报     | category_gddh_szsh     | 股东大会 | category_zf_szsh   | 增发     | category_kzzq_szsh | 可转债   | category_fxts_szsh   | 风险提示       |</span><br><span class="hljs-comment"># | category_yjygjxz_szsh | 业绩预告   | category_rcjy_szsh     | 日常经营 | category_gqjl_szsh | 股权激励 | category_qtrz_szsh | 其他融资 | category_tbclts_szsh | 特别处理和退市 |</span><br><span class="hljs-comment"># | category_tszlq_szsh   | 退市整理期 |                        |          |                    |          |                    |          |                      |                |</span><br><br><br><span class="hljs-comment"># 3、定义要爬取的时间段———必选项</span><br><br>SeDate_A = <span class="hljs-string">&#x27;2019-01-01~2023-01-01&#x27;</span><br><br><span class="hljs-comment"># 4、定义爬取指定报告的关键词（若不指定则保持为空即可）———可选项</span><br><br>Search_key = <span class="hljs-string">&#x27;会计师事务所&#x27;</span><br><br><span class="hljs-comment"># ---------------------------------------------------使用说明：以下代码非必要请勿修改！-------------------------------------------------------</span><br><br><span class="hljs-comment">## Step2：导入工具包</span><br><br><span class="hljs-keyword">import</span> requests<br><span class="hljs-comment"># 用于获取网页内容</span><br><span class="hljs-keyword">from</span> urllib.request <span class="hljs-keyword">import</span> urlretrieve<br><span class="hljs-comment"># 用于下载网络文件到本地</span><br><span class="hljs-keyword">import</span> re<br><span class="hljs-comment"># 用于正则匹配</span><br><span class="hljs-keyword">import</span> math<br><span class="hljs-comment"># 用于调用数学函数</span><br><span class="hljs-keyword">import</span> json<br><span class="hljs-comment"># 用于解析json</span><br><span class="hljs-keyword">import</span> xlwt<br><span class="hljs-comment"># 用于写入excel</span><br><span class="hljs-keyword">import</span> xlrd<br><span class="hljs-comment"># 用于读取excel</span><br><span class="hljs-keyword">import</span> os<br><span class="hljs-comment"># 用于实现系统功能</span><br><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd<br><span class="hljs-comment"># 导入pandas工具库</span><br><br><br><span class="hljs-comment">## Step3：获取巨潮资讯的数据源格式信息</span><br><br><span class="hljs-comment"># 从以下url中提取所需要的上市企业数据源信息（该url包括了巨潮资讯网上目前所有上市企业的stockList信息，我们的目的是从中获取到不同股票的orgId，以便接下来通过orgId去爬取不同企业的指定报告）</span><br>url = <span class="hljs-string">&quot;http://www.cninfo.com.cn/new/data/szse_stock.json&quot;</span><br>ret = requests.get(url=url)<br>ret = ret.content<br>stock_list = json.loads(ret)[<span class="hljs-string">&quot;stockList&quot;</span>]<br><br><span class="hljs-comment"># 查看巨潮资讯网一共收录了多少家企业数据</span><br><span class="hljs-built_in">len</span>(stock_list)<br><br><span class="hljs-comment"># 输出stock_list中的前两项，查看一下列表中的具体数据形式</span><br><span class="hljs-built_in">print</span>(stock_list[:<span class="hljs-number">2</span>])<br><br><span class="hljs-comment">## Step4：用pandas把stock_list信息导出为本地Excel文件以便日后备用（可选）</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">export_excel</span>(<span class="hljs-params">export</span>):<br>    <span class="hljs-comment"># 将字典列表转换为DataFrame</span><br>    pf = pd.DataFrame(export)<br>    <span class="hljs-comment"># 指定字段顺序</span><br>    order = [<span class="hljs-string">&#x27;orgId&#x27;</span>, <span class="hljs-string">&#x27;category&#x27;</span>, <span class="hljs-string">&#x27;code&#x27;</span>, <span class="hljs-string">&#x27;pinyin&#x27;</span>, <span class="hljs-string">&#x27;zwjc&#x27;</span>]<br>    pf = pf[order]<br>    <span class="hljs-comment"># 将列名替换为中文</span><br>    columns_map = &#123;<br>        <span class="hljs-string">&#x27;orgId&#x27;</span>: <span class="hljs-string">&#x27;orgId（原始ID）&#x27;</span>,<br>        <span class="hljs-string">&#x27;category&#x27;</span>: <span class="hljs-string">&#x27;category（股市类型）&#x27;</span>,<br>        <span class="hljs-string">&#x27;code&#x27;</span>: <span class="hljs-string">&#x27;code（代码）&#x27;</span>,<br>        <span class="hljs-string">&#x27;pinyin&#x27;</span>: <span class="hljs-string">&#x27;pinyin（拼音）&#x27;</span>,<br>        <span class="hljs-string">&#x27;zwjc&#x27;</span>: <span class="hljs-string">&#x27;zwjc（）&#x27;</span><br>    &#125;<br>    pf.rename(columns=columns_map, inplace=<span class="hljs-literal">True</span>)<br>    <span class="hljs-comment"># 指定stock_list的存储路径（此处可自行更改）</span><br>    file_path = pd.ExcelWriter(Stocklist_path)<br>    <span class="hljs-comment"># 替换空单元格</span><br>    pf.fillna(<span class="hljs-string">&#x27; &#x27;</span>, inplace=<span class="hljs-literal">True</span>)<br>    <span class="hljs-comment"># 输出</span><br>    pf.to_excel(file_path, encoding=<span class="hljs-string">&#x27;utf-8&#x27;</span>, index=<span class="hljs-literal">False</span>)<br>    <span class="hljs-comment"># 保存表格</span><br>    file_path.save()<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    <span class="hljs-comment"># 将分析完成的列表导出为excel表格</span><br>    export_excel(stock_list)<br><br><span class="hljs-comment">## Step5：从stock_list中提取code与orgId建立“code-orgId”匹配清单</span><br><br><span class="hljs-comment"># 提取stock_list中的code与orgId，遍历生成独立字典</span><br>code_dic = &#123;(it[<span class="hljs-string">&#x27;code&#x27;</span>]): it[<span class="hljs-string">&#x27;orgId&#x27;</span>] <span class="hljs-keyword">for</span> it <span class="hljs-keyword">in</span> stock_list&#125;<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\n正在进行服务器数据库检索，共找到 &#123;&#125; 家上市公司！\n\n --------------------------------服务器数据比对工作完成，即将开始载入数据进行匹配！--------------------------------\n&quot;</span>.<span class="hljs-built_in">format</span>(<span class="hljs-built_in">len</span>(code_dic)))<br><br><span class="hljs-comment"># 若要输出查看具体“code-orgId”匹配内容请取消注释此行</span><br><span class="hljs-comment"># print(code_dic)</span><br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\n --------------------------数据匹配完成，共生成 &#123;&#125; 家上市公司的“code-orgId”匹配数据！--------------------------\n&quot;</span>.<span class="hljs-built_in">format</span>(<span class="hljs-built_in">len</span>(code_dic)))<br><br><br><br><span class="hljs-comment">## Step6：从Excel文件读取待爬取的股票清单并生成列表code_list</span><br><br><span class="hljs-comment"># 定义一个读取xls文件数据并转为列表的类</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">excel_read</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, excel_path=Codelist_path, encoding=<span class="hljs-string">&#x27;utf-8&#x27;</span>, index=<span class="hljs-number">0</span></span>):  <span class="hljs-comment"># 待爬取企业清单路径</span><br>        <span class="hljs-comment">#       获取文本对象</span><br>        self.data = xlrd.open_workbook(excel_path)<br><span class="hljs-comment">#       根据index获取某个sheet</span><br>        self.table = self.data.sheets()[index]<br><span class="hljs-comment">#       获取当前sheet页面的总行数,把每一行数据作为list放到 list</span><br>        self.rows = self.table.nrows<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_data</span>(<span class="hljs-params">self</span>):<br>        result = []<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(self.rows):<br>            <span class="hljs-comment">#           获取每一行的数据</span><br>            col = self.table.row_values(i)<br>            <span class="hljs-comment"># print(col)</span><br>            result.append(col)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;待爬取企业已从xls文件中加载完毕，结果如下：\n &#123;&#125;\n&quot;</span>.<span class="hljs-built_in">format</span>(result))<br>        <span class="hljs-keyword">return</span> result<br><br><br><span class="hljs-comment"># 运用函数生成待爬取企业的code_list</span><br>code_list = []<br>code_list.extend(excel_read().get_data())<br><br><span class="hljs-comment"># Part2：正式工作</span><br><br><span class="hljs-comment">## Step1：定义爬取函数</span><br><br><span class="hljs-comment"># 1、对单个页面进行请求，并返回数据信息——通过data自定义特定企业</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_and_download_pdf_flie</span>(<span class="hljs-params">pageNum, stock, searchkey=<span class="hljs-string">&#x27;&#x27;</span>, category=<span class="hljs-string">&#x27;&#x27;</span>, seDate=<span class="hljs-string">&#x27;&#x27;</span></span>):<br>    url = <span class="hljs-string">&#x27;http://www.cninfo.com.cn/new/hisAnnouncement/query&#x27;</span><br>    pageNum = <span class="hljs-built_in">int</span>(pageNum)<br><span class="hljs-comment">#   定义表单数据</span><br>    data = &#123;<span class="hljs-string">&#x27;pageNum&#x27;</span>: pageNum,<br>            <span class="hljs-string">&#x27;pageSize&#x27;</span>: <span class="hljs-number">30</span>,<br>            <span class="hljs-string">&#x27;column&#x27;</span>: <span class="hljs-string">&#x27;&#x27;</span>,<br>            <span class="hljs-string">&#x27;tabName&#x27;</span>: <span class="hljs-string">&#x27;fulltext&#x27;</span>,<br>            <span class="hljs-string">&#x27;plate&#x27;</span>: <span class="hljs-string">&#x27;&#x27;</span>,<br>            <span class="hljs-string">&#x27;stock&#x27;</span>: stock,<br>            <span class="hljs-string">&#x27;searchkey&#x27;</span>: searchkey,<br>            <span class="hljs-string">&#x27;secid&#x27;</span>: <span class="hljs-string">&#x27;&#x27;</span>,<br>            <span class="hljs-string">&#x27;category&#x27;</span>: category,<br>            <span class="hljs-string">&#x27;trade&#x27;</span>: <span class="hljs-string">&#x27;&#x27;</span>,<br>            <span class="hljs-string">&#x27;seDate&#x27;</span>: seDate,<br>            <span class="hljs-string">&#x27;sortName&#x27;</span>: <span class="hljs-string">&#x27;&#x27;</span>,<br>            <span class="hljs-string">&#x27;sortType&#x27;</span>: <span class="hljs-string">&#x27;&#x27;</span>,<br>            <span class="hljs-string">&#x27;isHLtitle&#x27;</span>: <span class="hljs-string">&#x27;true&#x27;</span>&#125;<br><br><span class="hljs-comment">#   定义请求头</span><br>    headers = &#123;<span class="hljs-string">&#x27;Accept&#x27;</span>: <span class="hljs-string">&#x27;*/*&#x27;</span>,<br>               <span class="hljs-string">&#x27;Accept-Encoding&#x27;</span>: <span class="hljs-string">&#x27;gzip, deflate&#x27;</span>,<br>               <span class="hljs-string">&#x27;Accept-Language&#x27;</span>: <span class="hljs-string">&#x27;zh-CN,zh;q=0.9&#x27;</span>,<br>               <span class="hljs-string">&#x27;Connection&#x27;</span>: <span class="hljs-string">&#x27;keep-alive&#x27;</span>,<br>               <span class="hljs-string">&#x27;Content-Length&#x27;</span>: <span class="hljs-string">&#x27;181&#x27;</span>,<br>               <span class="hljs-string">&#x27;Content-Type&#x27;</span>: <span class="hljs-string">&#x27;application/x-www-form-urlencoded; charset=UTF-8&#x27;</span>,<br>               <span class="hljs-string">&#x27;Host&#x27;</span>: <span class="hljs-string">&#x27;www.cninfo.com.cn&#x27;</span>,<br>               <span class="hljs-string">&#x27;Origin&#x27;</span>: <span class="hljs-string">&#x27;http://www.cninfo.com.cn&#x27;</span>,<br>               <span class="hljs-string">&#x27;Referer&#x27;</span>: <span class="hljs-string">&#x27;http://www.cninfo.com.cn/new/commonUrl/pageOfSearch?url=disclosure/list/search&#x27;</span>,<br>               <span class="hljs-string">&#x27;User-Agent&#x27;</span>: <span class="hljs-string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/93.0.4577.82 Safari/537.36&#x27;</span>,<br>               <span class="hljs-string">&#x27;X-Requested-With&#x27;</span>: <span class="hljs-string">&#x27;XMLHttpRequest&#x27;</span>&#125;<br><br><span class="hljs-comment">#   提交请求</span><br>    r = requests.post(url, data=data, headers=headers)<br><br><span class="hljs-comment">#   获取单页年报的数据，数据格式为json，解析并获取json中的年报信息</span><br>    result = r.json()[<span class="hljs-string">&#x27;announcements&#x27;</span>]<br><br><br><span class="hljs-comment"># 2.对数据信息进行提取</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> result:<br>        <span class="hljs-comment">#         避免下载一些年报摘要等不需要的文件</span><br>        <span class="hljs-keyword">if</span> re.search(<span class="hljs-string">&#x27;摘要&#x27;</span>, i[<span class="hljs-string">&#x27;announcementTitle&#x27;</span>]):<br>            <span class="hljs-keyword">pass</span><br>        <span class="hljs-keyword">else</span>:<br>            title = i[<span class="hljs-string">&#x27;announcementTitle&#x27;</span>]<br><br><span class="hljs-comment">#           获取公告文件名</span><br>            secName = i[<span class="hljs-string">&#x27;secName&#x27;</span>]<br><br><span class="hljs-comment">#           获取公司股票代码</span><br>            secCode = i[<span class="hljs-string">&#x27;secCode&#x27;</span>]<br><br><span class="hljs-comment">#           获取adjunctUrl，并组合生成pdf文件下载地址（分析得知巨潮资讯数据库pdf下载地址格式：http://static.cninfo.com.cn/+adjunctUrl）</span><br>            adjunctUrl = i[<span class="hljs-string">&#x27;adjunctUrl&#x27;</span>]<br>            down_url = <span class="hljs-string">&#x27;http://static.cninfo.com.cn/&#x27;</span>+adjunctUrl<br><br><span class="hljs-comment">#           定义下载之后需要保存到本地的文件名</span><br>            filename = <span class="hljs-string">f&#x27;<span class="hljs-subst">&#123;secCode&#125;</span><span class="hljs-subst">&#123;secName&#125;</span><span class="hljs-subst">&#123;title&#125;</span>.pdf&#x27;</span><br>    <br><span class="hljs-comment">#           用正则表达式将公告文件名中的特殊符号去掉，因为保存文件时命名规则不能带有某些特殊符号（比如*号），否则会导致程序报错</span><br>            filename = re.sub(<span class="hljs-string">r&#x27;[(*)(&lt;)(#)(\\)(|)(\&quot;)(?)(:)(/)(&lt;em#)(&lt;/em#)]&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>, filename)<br><br><span class="hljs-comment">#           定义文件存放地址</span><br>            filepath = saving_path+<span class="hljs-string">&#x27;\\&#x27;</span>+filename<br><br><span class="hljs-comment">#           提交下载请求</span><br>            r = requests.get(down_url)<br><br><span class="hljs-comment">#           用response.content来写入文件信息</span><br>            <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(filepath, <span class="hljs-string">&#x27;wb&#x27;</span>) <span class="hljs-keyword">as</span> f:<br>                f.write(r.content)<br><br><span class="hljs-comment">#           设置进度条</span><br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">f&#x27;<span class="hljs-subst">&#123;filename&#125;</span>下载完毕&#x27;</span>)<br><br><span class="hljs-comment">## Step2：自定义保存路径及确定待爬企业数量</span><br><br><span class="hljs-comment"># 设置存储年报文件的具体路劲</span><br>saving_path = Output_path<br><br><span class="hljs-comment"># 根据code_list计算待爬企业数量</span><br>Num = <span class="hljs-built_in">len</span>(code_list)<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;待爬取企业总数量为：&#123;&#125;\n\n ------------------------------------已加载待爬取企业匹配信息，即将开始爬取数据！------------------------------------\n&quot;</span>.<span class="hljs-built_in">format</span>(Num))<br><br><span class="hljs-comment">## Step3：设定参数进行遍历爬取</span><br><br><span class="hljs-comment"># 从code_list中根据待爬企业数量遍历提取code与orgIdS</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, Num):<br>    code = code_list[i][<span class="hljs-number">0</span>]<br>    orgId = code_dic[code]<br><span class="hljs-comment">#     定义stock</span><br>    stock = <span class="hljs-string">&#x27;&#123;&#125;,&#123;&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(code, orgId)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;\n即将爬取 &#123;&#125; ：&quot;</span>.<span class="hljs-built_in">format</span>(stock))<br><span class="hljs-comment">#     定义searchkey</span><br>    searchkey_A = Search_key<br><span class="hljs-comment">#     定义category</span><br>    category = Category_A<br><span class="hljs-comment">#     定义seDate</span><br>    seDate = SeDate_A<br><br><span class="hljs-comment">#     定义pageNum（需要通过观测，确保pageNum能够涵盖每一次遍历请求的结果页数，此处定为2页即可）</span><br>    <span class="hljs-keyword">for</span> pageNum <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>):<br>        <span class="hljs-keyword">try</span>:<br>            get_and_download_pdf_flie(<br>                pageNum, stock, searchkey_A, category, seDate,)<br>        <span class="hljs-keyword">except</span>:<br>            <span class="hljs-comment">#        超出页数后会报错，需要跳过异常以便于继续遍历执行</span><br>            <span class="hljs-keyword">pass</span><br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;-------------------------------------------------程序执行完成！-------------------------------------------------&quot;</span>)<br></code></pre></td></tr></table></figure><h2 id="从PDF提取文字">从PDF提取文字</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> PyPDF2 <br><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">from</span> PyPDF2 <span class="hljs-keyword">import</span> PdfReader<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">extract</span>(<span class="hljs-params">file_path</span>) -&gt; <span class="hljs-built_in">str</span>:<br>    reader = PdfReader(file_path)<br><br>    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;info.txxt&quot;</span>,mode=<span class="hljs-string">&quot;w&quot;</span>,encoding=<span class="hljs-string">&quot;utf-8&quot;</span>) <span class="hljs-keyword">as</span> f:<br>        <br><br>        <span class="hljs-comment">#逐页把提取出的数据保存到文件中</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>,<span class="hljs-built_in">len</span>(reader.pages)):<br>            page = reader.pages[i]<br>            text = page.extract_text()<br>            <br>            f.write(text)<br>            <span class="hljs-comment">#print(text)</span><br>    <br>    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;info.txxt&quot;</span>,mode=<span class="hljs-string">&quot;r&quot;</span>,encoding=<span class="hljs-string">&quot;utf-8&quot;</span>) <span class="hljs-keyword">as</span> g:<br>        <br>        content = g.read()        <br>        <span class="hljs-keyword">return</span> content        <br>    <br>    <br>                <br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    extract()<br></code></pre></td></tr></table></figure><h2 id="AI-api">AI api</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> google.generativeai <span class="hljs-keyword">as</span> genai<br><br><span class="hljs-comment"># 这里存放着Gemini的密钥</span><br>genai.configure(api_key=<span class="hljs-string">&quot;密钥&quot;</span>,transport=<span class="hljs-string">&#x27;rest&#x27;</span>)<br>model = genai.GenerativeModel(model_name = <span class="hljs-string">&quot;gemini-pro&quot;</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">api_1</span>(<span class="hljs-params">request</span>) -&gt; <span class="hljs-built_in">str</span>:<br>   <br>    request_RawContent = <span class="hljs-built_in">str</span>(request)<br>    <br>    prompt = <span class="hljs-string">&quot;提示词部分&quot;</span><br>    response = model.generate_content(prompt+request_RawContent)<br>    <br>    <span class="hljs-keyword">return</span> response.text<br>        <br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    api_1()<br></code></pre></td></tr></table></figure><h2 id="主程序">主程序</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> PdfExtract <span class="hljs-keyword">import</span> *<br><span class="hljs-keyword">from</span> GeminiApi1 <span class="hljs-keyword">import</span> *<br><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> time<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_info_1</span>(<span class="hljs-params">file_path</span>) -&gt; <span class="hljs-built_in">str</span>:<br>    <br>    content = extract(file_path)<br>    <br>    info = api_1(content)<br>    <br>    <span class="hljs-built_in">print</span>(info)<br>    <br>    <span class="hljs-keyword">return</span> info<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    path = <span class="hljs-string">&quot;./全部文档/&quot;</span><br>    file_list = os.listdir(path)<br>    num = <span class="hljs-built_in">len</span>(file_list)<br><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>,num):<br>        file_path = path + file_list[i]<br>        <span class="hljs-built_in">print</span>(file_path + <span class="hljs-string">f&quot;<span class="hljs-subst">&#123;i&#125;</span>/<span class="hljs-subst">&#123;num&#125;</span>&quot;</span>)<br><br>        <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;data.txt&quot;</span>,mode=<span class="hljs-string">&quot;a&quot;</span>,encoding=<span class="hljs-string">&quot;utf-8&quot;</span>) <span class="hljs-keyword">as</span> data:<br>            <span class="hljs-keyword">try</span>:<br>                content = get_info_1(file_path)<br>                data.writelines(content + <span class="hljs-string">&quot;,&quot;</span> + <span class="hljs-string">&quot;\n&quot;</span>)<br>            <span class="hljs-keyword">except</span>:<br>                <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;error.txt&quot;</span>,mode=<span class="hljs-string">&quot;a&quot;</span>,encoding=<span class="hljs-string">&quot;utf-8&quot;</span>) <span class="hljs-keyword">as</span> error:<br>                    error.writelines(file_path + <span class="hljs-string">&quot;\n&quot;</span> )<br>                time.sleep(<span class="hljs-number">30</span>)<br>                <span class="hljs-keyword">continue</span><br>                <br>    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;error.txt&quot;</span>,mode=<span class="hljs-string">&quot;r&quot;</span>,encoding=<span class="hljs-string">&quot;utf-8&quot;</span>) <span class="hljs-keyword">as</span> error :<br>    <br>        lines = error.read().splitlines()<br>        <span class="hljs-keyword">for</span> line <span class="hljs-keyword">in</span> lines:<br><br>            file_path = line<br>            <span class="hljs-built_in">print</span>(file_path)<br>            <span class="hljs-keyword">try</span>:<br>                <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;data.txt&quot;</span>,mode=<span class="hljs-string">&#x27;a&#x27;</span>,encoding=<span class="hljs-string">&quot;utf-8&quot;</span>) <span class="hljs-keyword">as</span> data:<br>                    content = get_info_1(file_path)<br>                    data.writelines(content + <span class="hljs-string">&quot;,&quot;</span> + <span class="hljs-string">&quot;\n&quot;</span>)<br>            <span class="hljs-keyword">except</span>:<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;error&quot;</span>)<br>                time.sleep(<span class="hljs-number">5</span>)<br>                <span class="hljs-keyword">continue</span><br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>code_learning</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>小玩意儿</title>
    <link href="/2023/12/18/device/"/>
    <url>/2023/12/18/device/</url>
    
    <content type="html"><![CDATA[<h1>Chromebook</h1><h2 id="我的Chromebook">我的Chromebook</h2><p>买前生产力,买后桌面摆件</p><p><img src="desk.jpg"></p><p>显示效果很不错</p><p><img src="main.jpg"></p><h2 id="关于它">关于它</h2><p>是从一位北大佬手里收的,四舍五入我也是北大的了:)</p><p><img src="screen.jpg"></p><p>处理器是mt8183,性能拿来当摆件非常够用,还能拿来上课</p>]]></content>
    
    
    
    <tags>
      
      <tag>life_record</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>whisper &amp; Gemini</title>
    <link href="/2023/12/13/ai/"/>
    <url>/2023/12/13/ai/</url>
    
    <content type="html"><![CDATA[<h2 id="Gemini">Gemini</h2><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> google.generativeai <span class="hljs-keyword">as</span> genai<br><br><br>genai.configure(api_key=<span class="hljs-string">&quot;这里填密钥&quot;</span>,transport=<span class="hljs-string">&#x27;rest&#x27;</span>)<br><br><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">------list models,you can switch------</span><br><span class="hljs-string">gemini-pro</span><br><span class="hljs-string">gemini-pro-vision</span><br><span class="hljs-string">--------------------------------------</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span>  <br><br>model = genai.GenerativeModel(model_name = <span class="hljs-string">&quot;gemini-pro&quot;</span>)<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">gemini_chat</span>(<span class="hljs-params">model</span>):<br>    chat = model.start_chat(history=[])<br>    <br>    <br>    condition = <span class="hljs-literal">True</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;prompt：press \&quot;n\&quot; to start a new conversion,and \&quot;q\&quot;to exit&quot;</span>)<br>    <span class="hljs-keyword">while</span> condition:<br>        input_content = <span class="hljs-built_in">str</span>(<span class="hljs-built_in">input</span>(<span class="hljs-string">&quot;you: &quot;</span>))<br>        <br>        <span class="hljs-keyword">if</span> input_content == <span class="hljs-string">&quot;n&quot;</span>:<br>            condition = <span class="hljs-literal">False</span><br>            gemini_chat(model)<br>        <span class="hljs-keyword">elif</span> input_content == <span class="hljs-string">&quot;q&quot;</span>:<br>            condition = <span class="hljs-literal">False</span><br>        <span class="hljs-keyword">else</span>: <br>            <span class="hljs-keyword">try</span>:  <br>                 <br>                response = chat.send_message(input_content)<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;--------------------------------------------&quot;</span>)<br>                <br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;gemini:<span class="hljs-subst">&#123;response.text&#125;</span>&quot;</span>)<br>                <br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;--------------------------------------------&quot;</span>)<br>                <br>            <span class="hljs-keyword">except</span>:<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;prompt：error in your input&quot;</span>)<br>                <span class="hljs-keyword">continue</span> <br>            <br>        <br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    gemini_chat(model)<br></code></pre></td></tr></table></figure><h2 id="OpenAI-的言语模型">OpenAI 的言语模型</h2><p>最近发现了<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>g</mi><mi>g</mi><mi>m</mi><mi>l</mi></mrow><annotation encoding="application/x-tex">ggml</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">gg</span><span class="mord mathnormal">m</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span></span></span></span>这个基于<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi><mi>r</mi><mi>a</mi><mi>n</mi><mi>s</mi><mi>f</mi><mi>o</mi><mi>r</mi><mi>m</mi><mi>e</mi><mi>r</mi></mrow><annotation encoding="application/x-tex">transformer</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">t</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal">an</span><span class="mord mathnormal">s</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal" style="margin-right:0.02778em;">or</span><span class="mord mathnormal">m</span><span class="mord mathnormal" style="margin-right:0.02778em;">er</span></span></span></span>的语音模型,它是ChatGPT的亲兄弟,知名度却没有ChatGPT那么高</p><p>它非常强大,可以根据音频生成字幕,准确度非常高.</p><p>模型<a href="https://huggingface.co/spaces/openai/whisper">地址</a></p><p>不仅支持多国语言还能实时翻译.</p><p>whisper是官方的命令行工具,有一个开源项目给它制作了GUI</p><h3 id="使用">使用</h3><p>在安装软件之前,需要先下载训练好的语音模型,<a href="https://huggingface.co/ggerganov/whisper.cpp/tree/main">模型下载</a></p><p><img src="屏幕截图 2023-12-13 161201.png" srcset="/img/loading.gif" lazyload alt></p>  <p>选择<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>g</mi><mi>g</mi><mi>m</mi><mi>l</mi><mo>−</mo><mi>m</mi><mi>e</mi><mi>d</mi><mi>i</mi><mi>u</mi><mi>m</mi><mi mathvariant="normal">.</mi><mi>b</mi><mi>i</mi><mi>n</mi></mrow><annotation encoding="application/x-tex">ggml-medium.bin</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">gg</span><span class="mord mathnormal">m</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">m</span><span class="mord mathnormal">e</span><span class="mord mathnormal">d</span><span class="mord mathnormal">i</span><span class="mord mathnormal">u</span><span class="mord mathnormal">m</span><span class="mord">.</span><span class="mord mathnormal">bin</span></span></span></span> 并下载</p><h2 id="GUI">GUI</h2><p>下载<a href="https://github.com/Const-me/Whisper">whisper_desktop</a></p><p>打开后选择已经下好的模型并调整GPU配置就可以使用了.</p><p>注意文件得是mpeg格式</p><h3 id="实测">实测</h3><p>以<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>&lt;</mo><mo>&lt;</mo><mtext>小森林</mtext><mo>&gt;</mo><mo>&gt;</mo><mtext>夏秋篇</mtext></mrow><annotation encoding="application/x-tex">&lt;&lt;小森林&gt;&gt;夏秋篇</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mrel">&lt;&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7224em;vertical-align:-0.0391em;"></span><span class="mord cjk_fallback">小森林</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">夏秋篇</span></span></span></span>为例</p><p><img src="屏幕截图 2023-12-13 162236.png" srcset="/img/loading.gif" lazyload alt> </p><p>处理完成后便得到了带时间轴的字幕,已经被翻译好了</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs mark">[00:01:02.000 --&gt; 00:01:08.000]  Komori is a small village in a village in the Tohoku region.<br>[00:01:08.000 --&gt; 00:01:14.000]  There are no shops, and if you go shopping, you can get to the center of the village with a place to stay.<br>[00:01:14.000 --&gt; 00:01:18.000]  There are several small supermarkets and shops in the village.<br>[00:01:18.000 --&gt; 00:01:24.000]  The train is almost down, so it takes about 30 minutes by bicycle.<br>[00:01:24.000 --&gt; 00:01:26.000]  How long will it take to get home?<br>[00:01:26.000 --&gt; 00:01:30.000]  Winter is a time for snow.<br>[00:01:30.000 --&gt; 00:01:34.000]  It takes about an hour and a half to get there.<br>[00:01:34.000 --&gt; 00:01:40.000]  Most people go shopping to the big supermarkets in the neighborhood.<br>[00:01:40.000 --&gt; 00:01:46.000]  If I go there, it will take almost a day.<br></code></pre></td></tr></table></figure><p>再试一首歌,是milet的bliss,这次不翻译</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs mark">[00:00:00.000 --&gt; 00:00:06.500]  (♪~ 音楽)<br>[00:00:06.500 --&gt; 00:00:13.340]  私を守るこの名前を<br>[00:00:13.340 --&gt; 00:00:20.680]  優しく呼んだその声が<br>[00:00:20.680 --&gt; 00:00:27.920]  一人寂しく目を閉じるよ<br>[00:00:27.920 --&gt; 00:00:35.100]  あなたを包んで<br>[00:00:35.100 --&gt; 00:00:42.300]  柔らかなその手<br>[00:00:42.300 --&gt; 00:00:51.880]  忘れるよ 無数の夜を越えて<br>[00:00:51.880 --&gt; 00:01:02.680]  離れに散って あなたのもとへ帰るでしょう<br>[00:01:02.680 --&gt; 00:01:10.320]  夢に押さえて 闇を解いて<br>[00:01:10.320 --&gt; 00:01:18.500]  夢の中は 色立ち<br>[00:01:18.500 --&gt; 00:01:25.480]  青く続く道を<br>[00:01:27.480 --&gt; 00:01:32.480]  (♪~ 音楽)<br><br></code></pre></td></tr></table></figure><p>效果很不错</p><p>上面两个用的是中等大小的模型,实测小模型效果也不错</p>]]></content>
    
    
    
    <tags>
      
      <tag>tools</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>数分笔记</title>
    <link href="/2023/12/01/notes/notes/"/>
    <url>/2023/12/01/notes/notes/</url>
    
    <content type="html"><![CDATA[<blockquote><p>主要是为了练习敲LaTex而已。</p></blockquote><h2 id="一些题">一些题</h2><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.25em" columnalign="right left right" columnspacing="0em 1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mtext>设函数</mtext><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mtext>在</mtext><mo stretchy="false">[</mo><mn>0</mn><mo separator="true">,</mo><mn>1</mn><mo stretchy="false">]</mo><mtext>上</mtext><msup><mi>f</mi><mrow><mo mathvariant="normal">′</mo><mo mathvariant="normal">′</mo><mo mathvariant="normal">′</mo></mrow></msup><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mtext>存在</mtext><mo separator="true">,</mo><mi>f</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo><mo>=</mo><mn>0</mn><mo separator="true">,</mo><mtext>而</mtext><mi>F</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><msup><mi>x</mi><mn>3</mn></msup><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mtext>证明</mtext><mi mathvariant="normal">∃</mi><mi>ξ</mi><mo lspace="0em" rspace="0em">∈</mo><mrow><mo stretchy="false">(</mo><mn>0</mn><mo separator="true">,</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><mo separator="true">,</mo><mtext>使得</mtext><msup><mi>F</mi><msup><mrow></mrow><mrow><mo mathvariant="normal">′</mo><mo mathvariant="normal">′</mo><mo mathvariant="normal">′</mo></mrow></msup></msup><mrow><mo stretchy="false">(</mo><mi>ξ</mi><mo stretchy="false">)</mo></mrow><mo>=</mo><mn>0</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mtext>证明</mtext><mo>:</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mi>F</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><msup><mi>x</mi><mn>3</mn></msup><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mtext>在</mtext><mo stretchy="false">(</mo><mn>0</mn><mo separator="true">,</mo><mn>1</mn><mo stretchy="false">)</mo><mtext>上连续可导，且</mtext><mi>F</mi><mo stretchy="false">(</mo><mn>0</mn><mo stretchy="false">)</mo><mo>=</mo><mn>0</mn><mi>f</mi><mo stretchy="false">(</mo><mn>0</mn><mo stretchy="false">)</mo><mo>=</mo><mn>0</mn><mo separator="true">,</mo><mi>F</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo><mo>=</mo><mn>1</mn><mi>f</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo><mo>=</mo><mn>0</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><msup><mi>F</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo stretchy="false">(</mo><mn>0</mn><mo stretchy="false">)</mo><mo>=</mo><mn>3</mn><mi>f</mi><mo stretchy="false">(</mo><mn>0</mn><mo stretchy="false">)</mo><mo>+</mo><mn>0</mn><mo>=</mo><mn>0</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mtext>又</mtext><msup><mi>F</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo stretchy="false">(</mo><msub><mi>ξ</mi><mn>1</mn></msub><mo stretchy="false">)</mo><mo>=</mo><mn>0</mn><mo separator="true">,</mo><mtext>故</mtext><mi mathvariant="normal">∃</mi><msub><mi>ξ</mi><mn>2</mn></msub><mo lspace="0em" rspace="0em">∈</mo><mrow><mo stretchy="false">(</mo><mn>0</mn><mo separator="true">,</mo><msub><mi>ξ</mi><mn>1</mn></msub><mo stretchy="false">)</mo></mrow><mo separator="true">,</mo><mtext>使得</mtext><msup><mi>F</mi><mrow><mo mathvariant="normal">′</mo><mo mathvariant="normal">′</mo></mrow></msup><mo stretchy="false">(</mo><msub><mi>ξ</mi><mn>2</mn></msub><mo stretchy="false">)</mo><mo>=</mo><mn>0</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><msup><mi>F</mi><mrow><mo mathvariant="normal">′</mo><mo mathvariant="normal">′</mo></mrow></msup><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mn>6</mn><msup><mi>x</mi><mn>2</mn></msup><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>+</mo><mn>6</mn><msup><mi>x</mi><mn>2</mn></msup><msup><mi>f</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>+</mo><msup><mi>x</mi><mn>3</mn></msup><msup><mi>f</mi><mrow><mo mathvariant="normal">′</mo><mo mathvariant="normal">′</mo></mrow></msup><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><msup><mi>F</mi><mrow><mo mathvariant="normal">′</mo><mo mathvariant="normal">′</mo></mrow></msup><mo stretchy="false">(</mo><mn>0</mn><mo stretchy="false">)</mo><mo>=</mo><mn>0</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mtext>故</mtext><msup><mi>F</mi><mrow><mo mathvariant="normal">′</mo><mo mathvariant="normal">′</mo></mrow></msup><mo stretchy="false">(</mo><msub><mi>ξ</mi><mn>2</mn></msub><mo stretchy="false">)</mo><mo>=</mo><mn>0</mn><mo separator="true">,</mo><mtext>故</mtext><mi mathvariant="normal">∃</mi><mi>ξ</mi><mo>∈</mo><mo stretchy="false">(</mo><mn>0</mn><mo separator="true">,</mo><msub><mi>ξ</mi><mn>2</mn></msub><mo stretchy="false">)</mo><mo separator="true">,</mo><mtext>有</mtext><msup><mi>F</mi><mrow><mo mathvariant="normal">′</mo><mo mathvariant="normal">′</mo><mo mathvariant="normal">′</mo></mrow></msup><mo stretchy="false">(</mo><mi>ξ</mi><mo stretchy="false">)</mo><mo>=</mo><mn>0</mn><mspace width="1em"><mi mathvariant="normal">□</mi></mspace></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo stretchy="false">(</mo><mn>2</mn><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mtext>设</mtext><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mtext>在</mtext><mrow><mo stretchy="false">[</mo><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo stretchy="false">]</mo></mrow><mtext>上连续</mtext><mo separator="true">,</mo><mtext>在</mtext><mo stretchy="false">(</mo><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo stretchy="false">)</mo><mtext>上可导</mtext><mo separator="true">,</mo><mi>f</mi><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">)</mo><mo>=</mo><mi>f</mi><mo stretchy="false">(</mo><mi>b</mi><mo stretchy="false">)</mo><mo>=</mo><mn>0</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mtext>证明</mtext><mi mathvariant="normal">∃</mi><mi>ξ</mi><mo>∈</mo><mo stretchy="false">(</mo><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mtext>使得</mtext><msup><mi>f</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo stretchy="false">(</mo><mi>ξ</mi><mo stretchy="false">)</mo><mo>=</mo><mo>−</mo><mi>f</mi><mo stretchy="false">(</mo><mi>ξ</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mtext>证明</mtext><mo>:</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mtext>设</mtext><mi>F</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><msup><mi>e</mi><mi>x</mi></msup><mo separator="true">,</mo><mtext>则</mtext><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mtext>在</mtext><mo stretchy="false">[</mo><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo stretchy="false">]</mo><mtext>上连续</mtext><mo separator="true">,</mo><mtext>在</mtext><mo stretchy="false">(</mo><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo stretchy="false">)</mo><mtext>上可导</mtext></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mi>F</mi><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">)</mo><mo>=</mo><mi>f</mi><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">)</mo><msup><mi>e</mi><mi>a</mi></msup><mo>=</mo><mn>0</mn><mo separator="true">,</mo><mi>F</mi><mo stretchy="false">(</mo><mi>b</mi><mo stretchy="false">)</mo><mo>=</mo><mi>f</mi><mo stretchy="false">(</mo><mi>b</mi><mo stretchy="false">)</mo><msup><mi>e</mi><mi>b</mi></msup><mo>=</mo><mn>0</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mtext>由罗尔定理</mtext><mi mathvariant="normal">∃</mi><mi>ξ</mi><mo>∈</mo><mo stretchy="false">(</mo><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo stretchy="false">)</mo><mtext>使得</mtext><msup><mi>F</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo stretchy="false">(</mo><mi>ξ</mi><mo stretchy="false">)</mo><mo>=</mo><mn>0</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mtext>而</mtext><msup><mi>F</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mo stretchy="false">(</mo><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>+</mo><msup><mi>f</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo><msup><mi>e</mi><mi>x</mi></msup></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><msup><mi>F</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo stretchy="false">(</mo><mi>ξ</mi><mo stretchy="false">)</mo><mo>=</mo><mo stretchy="false">(</mo><mi>f</mi><mo stretchy="false">(</mo><mi>ξ</mi><mo stretchy="false">)</mo><mo>+</mo><msup><mi>f</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo stretchy="false">(</mo><mi>ξ</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo><msup><mi>e</mi><mi>ξ</mi></msup><mo>=</mo><mn>0</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mtext>可得</mtext><mi>f</mi><mo stretchy="false">(</mo><mi>ξ</mi><mo stretchy="false">)</mo><mo>=</mo><mo>−</mo><msup><mi>f</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo stretchy="false">(</mo><mi>ξ</mi><mo stretchy="false">)</mo><mspace width="1em"><mi mathvariant="normal">□</mi></mspace></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo stretchy="false">(</mo><mn>3</mn><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mtext>设</mtext><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mtext>和</mtext><mi>g</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mtext>在</mtext><mo stretchy="false">[</mo><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo stretchy="false">]</mo><mtext>上连续</mtext><mo separator="true">,</mo><mtext>在</mtext><mo stretchy="false">(</mo><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo stretchy="false">)</mo><mtext>上可导</mtext><mo separator="true">,</mo><mtext>且</mtext><mi>f</mi><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">)</mo><mo>=</mo><mi>f</mi><mo stretchy="false">(</mo><mi>b</mi><mo stretchy="false">)</mo><mo>=</mo><mn>0</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mtext>证明</mtext><mi mathvariant="normal">∃</mi><mi>ξ</mi><mo>∈</mo><mo stretchy="false">(</mo><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mtext>使得</mtext><msup><mi>f</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo stretchy="false">(</mo><mi>ξ</mi><mo stretchy="false">)</mo><mo>+</mo><mi>f</mi><mo stretchy="false">(</mo><mi>ξ</mi><mo stretchy="false">)</mo><msup><mi>g</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo stretchy="false">(</mo><mi>ξ</mi><mo stretchy="false">)</mo><mo>=</mo><mn>0</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mtext>证明</mtext></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mi>F</mi><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">)</mo><mo>=</mo><mi>f</mi><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">)</mo><msup><mi>e</mi><mi>g</mi></msup><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">)</mo><mo>=</mo><mn>0</mn><mo separator="true">,</mo><mi>F</mi><mo stretchy="false">(</mo><mi>b</mi><mo stretchy="false">)</mo><mo>=</mo><mi>f</mi><mo stretchy="false">(</mo><mi>b</mi><mo stretchy="false">)</mo><msup><mi>e</mi><mi>g</mi></msup><mo stretchy="false">(</mo><mi>b</mi><mo stretchy="false">)</mo><mo>=</mo><mn>0</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mtext>故由罗尔定理</mtext><mi mathvariant="normal">∃</mi><mi>ξ</mi><mo>∈</mo><mo stretchy="false">(</mo><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo stretchy="false">)</mo><mtext>使得</mtext><msup><mi>F</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo stretchy="false">(</mo><mi>ξ</mi><mo stretchy="false">)</mo><mo>=</mo><mn>0</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><msup><mi>F</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><msup><mi>f</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><msup><mi>e</mi><mrow><mi>g</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></msup><mo>+</mo><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><msup><mi>e</mi><mrow><mi>g</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></msup><msup><mi>g</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mspace width="1em"><mspace width="1em"><mspace width="1em"><mo>=</mo><msup><mi>e</mi><mrow><mi>g</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow></msup><mo stretchy="false">[</mo><msup><mi>f</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>+</mo><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><msup><mi>g</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo stretchy="false">]</mo></mspace></mspace></mspace></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mtext>即</mtext><msup><mi>e</mi><mrow><mi>g</mi><mo stretchy="false">(</mo><mi>ξ</mi><mo stretchy="false">)</mo></mrow></msup><mo stretchy="false">[</mo><msup><mi>f</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo stretchy="false">(</mo><mi>ξ</mi><mo stretchy="false">)</mo><mo>+</mo><mi>f</mi><mo stretchy="false">(</mo><mi>ξ</mi><mo stretchy="false">)</mo><msup><mi>g</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo stretchy="false">(</mo><mi>ξ</mi><mo stretchy="false">)</mo><mo stretchy="false">]</mo><mo>=</mo><mn>0</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mtext>有</mtext><msup><mi>f</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo stretchy="false">(</mo><mi>ξ</mi><mo stretchy="false">)</mo><mo>+</mo><mi>f</mi><mo stretchy="false">(</mo><mi>ξ</mi><mo stretchy="false">)</mo><msup><mi>g</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo stretchy="false">(</mo><mi>ξ</mi><mo stretchy="false">)</mo><mo>=</mo><mn>0</mn><mspace width="1em"><mi mathvariant="normal">□</mi></mspace></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin {align*} &amp;(1)\\&amp;设函数 f(x)在[0,1] 上f&#x27;&#x27;&#x27;(x)  存在 , f(1)=0 , 而F(x)= x^3f(x) \\&amp;证明\exists {\xi}{\in}{(0,1)},使得 {F^{&#x27;&#x27;&#x27;}}{(\xi)}= 0 \\\\\\\\&amp;证明:\\&amp;F(x)= x^3f(x)在(0,1)上连续可导，且F(0)=0f(0)=0,F(1)= 1f(1)= 0 \\\\&amp;F&#x27;(0)= 3f(0)+0 = 0\\\\&amp;又F&#x27;({\xi_1})= 0 , 故  \exists {\xi_2}{\in} {(0,{\xi_1})}, 使得F&#x27;&#x27;(\xi_2)= 0\\\\&amp;F&#x27;&#x27;(x)= 6x^2f(x)+ 6x^2 f&#x27;(x)+ x^3f&#x27;&#x27;(x) , F&#x27;&#x27;(0) = 0 \\ \\&amp;故F&#x27;&#x27;(\xi_2)= 0 ,  故\exists \xi \in (0,\xi_2) ,  有F&#x27;&#x27;&#x27;(\xi) = 0 \quad \Box\\\\\\&amp;(2)&amp;\\&amp;设f(x)在{[a,b]}上连续,在(a,b)上可导,f(a)= f(b) = 0 \\\\&amp;证明\exists \xi \in ( a, b),  使得 f&#x27;(\xi) = - f(\xi)\\\\\\&amp;证明:\\&amp;设F(x)= f(x)e^{x}, 则 f(x)在 [a,b]上连续,在(a,b)上可导\\\\&amp;F(a)= f(a)e^a = 0 , F(b) = f(b)e^b = 0\\\\&amp;由罗尔定理 \exists \xi \in ( a,b) 使得 F&#x27; (\xi) = 0\\\\&amp;而F&#x27;(x)= (f(x)+ f&#x27;(x))e^x \\\\&amp;F&#x27;(\xi)= (f(\xi) +f&#x27;(\xi ))e^ \xi = 0    \\\\&amp;可得 f(\xi) = -f&#x27;(\xi) \quad \Box\\\\\\&amp;(3)&amp;\\&amp;设 f(x)和g (x)在[a,b]上连续,在(a,b)上可导,且 f(a)=f(b)= 0 \\\\&amp;证明 \exists \xi \in (a,b),使得 f&#x27; (\xi)+ f(\xi)g&#x27;(\xi) = 0\\\\\\&amp;证明\\&amp;F(a) = f(a)e^g(a)= 0 ,F(b) = f(b)e^g(b)= 0 \\\\&amp;故由罗尔定理 \exists \xi \in (a,b)使得F&#x27;(\xi) = 0\\\\&amp;F&#x27;(x) = f&#x27;(x)e^{g(x)} + f(x)e^{g(x)}g&#x27;(x)\\\\&amp;\quad\quad\quad= e^{g(x)}[f&#x27;(x)+ f(x)g&#x27;(x)]\\ \\&amp;即e^{g(\xi)}[f&#x27;(\xi) + f(\xi)g&#x27;(\xi)] = 0 \\ \\&amp; 有f&#x27;(\xi)+ f(\xi)g&#x27;(\xi) = 0 \quad \Box\end{align*}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:84.637em;vertical-align:-42.0685em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:42.5685em;"><span style="top:-44.721em;"><span class="pstrut" style="height:2.9925em;"></span><span class="mord"></span></span><span style="top:-43.1969em;"><span class="pstrut" style="height:2.9925em;"></span><span class="mord"></span></span><span style="top:-41.5444em;"><span class="pstrut" style="height:2.9925em;"></span><span class="mord"></span></span><span style="top:-40.0444em;"><span class="pstrut" style="height:2.9925em;"></span><span class="mord"></span></span><span style="top:-38.5444em;"><span class="pstrut" style="height:2.9925em;"></span><span class="mord"></span></span><span style="top:-37.0444em;"><span class="pstrut" style="height:2.9925em;"></span><span class="mord"></span></span><span style="top:-35.5444em;"><span class="pstrut" style="height:2.9925em;"></span><span class="mord"></span></span><span style="top:-34.0203em;"><span class="pstrut" style="height:2.9925em;"></span><span class="mord"></span></span><span style="top:-32.5203em;"><span class="pstrut" style="height:2.9925em;"></span><span class="mord"></span></span><span style="top:-31.0203em;"><span class="pstrut" style="height:2.9925em;"></span><span class="mord"></span></span><span style="top:-29.5203em;"><span class="pstrut" style="height:2.9925em;"></span><span class="mord"></span></span><span style="top:-28.0203em;"><span class="pstrut" style="height:2.9925em;"></span><span class="mord"></span></span><span style="top:-26.5203em;"><span class="pstrut" style="height:2.9925em;"></span><span class="mord"></span></span><span style="top:-24.9962em;"><span class="pstrut" style="height:2.9925em;"></span><span class="mord"></span></span><span style="top:-23.4962em;"><span class="pstrut" style="height:2.9925em;"></span><span class="mord"></span></span><span style="top:-21.9962em;"><span class="pstrut" style="height:2.9925em;"></span><span class="mord"></span></span><span style="top:-20.4962em;"><span class="pstrut" style="height:2.9925em;"></span><span class="mord"></span></span><span style="top:-18.9962em;"><span class="pstrut" style="height:2.9925em;"></span><span class="mord"></span></span><span style="top:-17.4962em;"><span class="pstrut" style="height:2.9925em;"></span><span class="mord"></span></span><span style="top:-15.9962em;"><span class="pstrut" style="height:2.9925em;"></span><span class="mord"></span></span><span style="top:-14.4962em;"><span class="pstrut" style="height:2.9925em;"></span><span class="mord"></span></span><span style="top:-12.9962em;"><span class="pstrut" style="height:2.9925em;"></span><span class="mord"></span></span><span style="top:-11.4962em;"><span class="pstrut" style="height:2.9925em;"></span><span class="mord"></span></span><span style="top:-9.9962em;"><span class="pstrut" style="height:2.9925em;"></span><span class="mord"></span></span><span style="top:-8.4962em;"><span class="pstrut" style="height:2.9925em;"></span><span class="mord"></span></span><span style="top:-6.9962em;"><span class="pstrut" style="height:2.9925em;"></span><span class="mord"></span></span><span style="top:-5.4962em;"><span class="pstrut" style="height:2.9925em;"></span><span class="mord"></span></span><span style="top:-3.9371em;"><span class="pstrut" style="height:2.9925em;"></span><span class="mord"></span></span><span style="top:-2.4371em;"><span class="pstrut" style="height:2.9925em;"></span><span class="mord"></span></span><span style="top:-0.9371em;"><span class="pstrut" style="height:2.9925em;"></span><span class="mord"></span></span><span style="top:0.5629em;"><span class="pstrut" style="height:2.9925em;"></span><span class="mord"></span></span><span style="top:2.0629em;"><span class="pstrut" style="height:2.9925em;"></span><span class="mord"></span></span><span style="top:3.5629em;"><span class="pstrut" style="height:2.9925em;"></span><span class="mord"></span></span><span style="top:5.122em;"><span class="pstrut" style="height:2.9925em;"></span><span class="mord"></span></span><span style="top:6.622em;"><span class="pstrut" style="height:2.9925em;"></span><span class="mord"></span></span><span style="top:8.122em;"><span class="pstrut" style="height:2.9925em;"></span><span class="mord"></span></span><span style="top:9.622em;"><span class="pstrut" style="height:2.9925em;"></span><span class="mord"></span></span><span style="top:11.122em;"><span class="pstrut" style="height:2.9925em;"></span><span class="mord"></span></span><span style="top:12.622em;"><span class="pstrut" style="height:2.9925em;"></span><span class="mord"></span></span><span style="top:14.122em;"><span class="pstrut" style="height:2.9925em;"></span><span class="mord"></span></span><span style="top:15.622em;"><span class="pstrut" style="height:2.9925em;"></span><span class="mord"></span></span><span style="top:17.122em;"><span class="pstrut" style="height:2.9925em;"></span><span class="mord"></span></span><span style="top:18.622em;"><span class="pstrut" style="height:2.9925em;"></span><span class="mord"></span></span><span style="top:20.122em;"><span class="pstrut" style="height:2.9925em;"></span><span class="mord"></span></span><span style="top:21.622em;"><span class="pstrut" style="height:2.9925em;"></span><span class="mord"></span></span><span style="top:23.122em;"><span class="pstrut" style="height:2.9925em;"></span><span class="mord"></span></span><span style="top:24.622em;"><span class="pstrut" style="height:2.9925em;"></span><span class="mord"></span></span><span style="top:26.122em;"><span class="pstrut" style="height:2.9925em;"></span><span class="mord"></span></span><span style="top:27.622em;"><span class="pstrut" style="height:2.9925em;"></span><span class="mord"></span></span><span style="top:29.22em;"><span class="pstrut" style="height:2.9925em;"></span><span class="mord"></span></span><span style="top:30.72em;"><span class="pstrut" style="height:2.9925em;"></span><span class="mord"></span></span><span style="top:32.318em;"><span class="pstrut" style="height:2.9925em;"></span><span class="mord"></span></span><span style="top:33.818em;"><span class="pstrut" style="height:2.9925em;"></span><span class="mord"></span></span><span style="top:35.416em;"><span class="pstrut" style="height:2.9925em;"></span><span class="mord"></span></span><span style="top:36.916em;"><span class="pstrut" style="height:2.9925em;"></span><span class="mord"></span></span><span style="top:38.416em;"><span class="pstrut" style="height:2.9925em;"></span><span class="mord"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:42.0685em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:42.5685em;"><span style="top:-44.7285em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span><span style="top:-43.2044em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mord cjk_fallback">设函数</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord cjk_fallback">在</span><span class="mopen">[</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mclose">]</span><span class="mord cjk_fallback">上</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′′′</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord cjk_fallback">存在</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord cjk_fallback">而</span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span><span style="top:-41.5519em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mord cjk_fallback">证明</span><span class="mord">∃</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.04601em;">ξ</span></span><span class="mord"><span class="mrel">∈</span></span><span class="mord"><span class="mopen">(</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mclose">)</span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord cjk_fallback">使得</span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9925em;"><span style="top:-2.9925em;margin-right:0.05em;"><span class="pstrut" style="height:2.5795em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8278em;"><span style="top:-2.931em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′′′</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mord"><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04601em;">ξ</span><span class="mclose">)</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">0</span></span></span><span style="top:-35.5519em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mord cjk_fallback">证明</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span></span></span><span style="top:-34.0278em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord cjk_fallback">在</span><span class="mopen">(</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mord cjk_fallback">上连续可导，且</span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord">0</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">0</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord">0</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">1</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">0</span></span></span><span style="top:-31.0278em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord">0</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">3</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord">0</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">0</span></span></span><span style="top:-28.0278em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mord cjk_fallback">又</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.04601em;">ξ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.046em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord cjk_fallback">故</span><span class="mord">∃</span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.04601em;">ξ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.046em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span><span class="mord"><span class="mrel">∈</span></span><span class="mord"><span class="mopen">(</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.04601em;">ξ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.046em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span><span class="mclose">)</span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord cjk_fallback">使得</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′′</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.04601em;">ξ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.046em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">0</span></span></span><span style="top:-25.0037em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′′</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">6</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">6</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′′</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′′</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord">0</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">0</span></span></span><span style="top:-22.0037em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mord cjk_fallback">故</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′′</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.04601em;">ξ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.046em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord cjk_fallback">故</span><span class="mord">∃</span><span class="mord mathnormal" style="margin-right:0.04601em;">ξ</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mopen">(</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.04601em;">ξ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.046em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord cjk_fallback">有</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′′′</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04601em;">ξ</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:1em;"></span><span class="mord amsrm">□</span></span></span><span style="top:-17.5037em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mopen">(</span><span class="mord">2</span><span class="mclose">)</span></span></span><span style="top:-16.0037em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mord cjk_fallback">设</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord cjk_fallback">在</span><span class="mord"><span class="mopen">[</span><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">b</span><span class="mclose">]</span></span><span class="mord cjk_fallback">上连续</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord cjk_fallback">在</span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">b</span><span class="mclose">)</span><span class="mord cjk_fallback">上可导</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">b</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">0</span></span></span><span style="top:-13.0037em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mord cjk_fallback">证明</span><span class="mord">∃</span><span class="mord mathnormal" style="margin-right:0.04601em;">ξ</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">b</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord cjk_fallback">使得</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04601em;">ξ</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">−</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04601em;">ξ</span><span class="mclose">)</span></span></span><span style="top:-8.5037em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mord cjk_fallback">证明</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span></span></span><span style="top:-7.0037em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mord cjk_fallback">设</span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7144em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">x</span></span></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord cjk_fallback">则</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord cjk_fallback">在</span><span class="mopen">[</span><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">b</span><span class="mclose">]</span><span class="mord cjk_fallback">上连续</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord cjk_fallback">在</span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">b</span><span class="mclose">)</span><span class="mord cjk_fallback">上可导</span></span></span><span style="top:-3.9446em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mclose">)</span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7144em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">a</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord mathnormal">b</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">b</span><span class="mclose">)</span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8991em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">b</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">0</span></span></span><span style="top:-0.9446em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mord cjk_fallback">由罗尔定理</span><span class="mord">∃</span><span class="mord mathnormal" style="margin-right:0.04601em;">ξ</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">b</span><span class="mclose">)</span><span class="mord cjk_fallback">使得</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04601em;">ξ</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">0</span></span></span><span style="top:2.0554em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mord cjk_fallback">而</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">))</span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7144em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span></span></span></span></span></span></span><span style="top:5.1145em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04601em;">ξ</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04601em;">ξ</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04601em;">ξ</span><span class="mclose">))</span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8991em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.04601em;">ξ</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">0</span></span></span><span style="top:8.1145em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mord cjk_fallback">可得</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04601em;">ξ</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">−</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04601em;">ξ</span><span class="mclose">)</span><span class="mspace" style="margin-right:1em;"></span><span class="mord amsrm">□</span></span></span><span style="top:12.6145em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mopen">(</span><span class="mord">3</span><span class="mclose">)</span></span></span><span style="top:14.1145em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mord cjk_fallback">设</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord cjk_fallback">和</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord cjk_fallback">在</span><span class="mopen">[</span><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">b</span><span class="mclose">]</span><span class="mord cjk_fallback">上连续</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord cjk_fallback">在</span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">b</span><span class="mclose">)</span><span class="mord cjk_fallback">上可导</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord cjk_fallback">且</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">b</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">0</span></span></span><span style="top:17.1145em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mord cjk_fallback">证明</span><span class="mord">∃</span><span class="mord mathnormal" style="margin-right:0.04601em;">ξ</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">b</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord cjk_fallback">使得</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04601em;">ξ</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04601em;">ξ</span><span class="mclose">)</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04601em;">ξ</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">0</span></span></span><span style="top:21.6145em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mord cjk_fallback">证明</span></span></span><span style="top:23.1145em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mclose">)</span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7144em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">g</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="mopen">(</span><span class="mord mathnormal">b</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">b</span><span class="mclose">)</span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7144em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">g</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">b</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">0</span></span></span><span style="top:26.1145em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mord cjk_fallback">故由罗尔定理</span><span class="mord">∃</span><span class="mord mathnormal" style="margin-right:0.04601em;">ξ</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">b</span><span class="mclose">)</span><span class="mord cjk_fallback">使得</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04601em;">ξ</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">0</span></span></span><span style="top:29.2125em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.938em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">g</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">x</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.938em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">g</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">x</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span><span style="top:32.3105em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:1em;"></span><span class="mspace" style="margin-right:1em;"></span><span class="mspace" style="margin-right:1em;"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.938em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">g</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">x</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span><span class="mopen">[</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)]</span></span></span><span style="top:35.4085em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mord cjk_fallback">即</span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.938em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">g</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight" style="margin-right:0.04601em;">ξ</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span><span class="mopen">[</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04601em;">ξ</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04601em;">ξ</span><span class="mclose">)</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04601em;">ξ</span><span class="mclose">)]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">0</span></span></span><span style="top:38.4085em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mord cjk_fallback">有</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04601em;">ξ</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04601em;">ξ</span><span class="mclose">)</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8019em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.04601em;">ξ</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:1em;"></span><span class="mord amsrm">□</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:42.0685em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:1em;"></span><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:15.3437em;"><span style="top:-17.3437em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span><span style="top:12.7745em;"><span class="pstrut" style="height:2.84em;"></span><span class="mord"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:16.2745em;"><span></span></span></span></span></span></span></span></span></span></span></span></p><h2 id="更新记录">更新记录</h2><p>修改了部分错误,优化了排版</p>]]></content>
    
    
    
    <tags>
      
      <tag>math</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>latex插入公式&amp;排版</title>
    <link href="/2023/11/27/latex/"/>
    <url>/2023/11/27/latex/</url>
    
    <content type="html"><![CDATA[<h2 id="为blog添加latex支持">为blog添加latex支持</h2><p>Hexo 默认的 Markdown 渲染器不支持复杂公式，所以需要更换渲染器。</p><p>首先要在主题的配置文件中启用math,设置其值为true,然后更换渲染器为katex</p><p>katex的渲染速度要快一些,并且在移动设备上有更好的兼容性</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">post:</span><br>  <span class="hljs-attr">math:</span><br>    <span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span><br>    <span class="hljs-attr">specific:</span> <span class="hljs-literal">false</span><br>    <span class="hljs-attr">engine:</span> <span class="hljs-string">katex</span><br></code></pre></td></tr></table></figure><p>若设置speicfic为 true,则需要在文章开头添加math: true</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs markdown">title: latex<span class="hljs-emphasis">_support</span><br><span class="hljs-emphasis">date: 2023-11-27 22:08:39</span><br><span class="hljs-emphasis">tags: math</span><br><span class="hljs-emphasis">math: true</span><br></code></pre></td></tr></table></figure><p>安装katex渲染器</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm uninstall hexo-renderer-marked --save<br>npm install hexo-renderer-markdown-it --save<br>npm install @traptitech/markdown-it-katex --save<br></code></pre></td></tr></table></figure><p>完成后在站点配置中添加：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">markdown:</span><br>  <span class="hljs-attr">plugins:</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">&quot;@traptitech/markdown-it-katex&quot;</span><br></code></pre></td></tr></table></figure><p><a href="https://fluid-dev.github.io/hexo-fluid-docs/guide/#latex-%E6%95%B0%E5%AD%A6%E5%85%AC%E5%BC%8F">参考fluid的配置说明</a></p><h2 id="latex的排版">latex的排版</h2><figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs latex"><span class="hljs-keyword">\begin</span>&#123;align*&#125; <span class="hljs-params">##</span>align表示对齐,不带*会自动标注公式序号,falign可以进行左对齐,一般还是align<br><span class="hljs-built_in">&amp;</span><span class="hljs-keyword">\\</span> <span class="hljs-params">##</span>进行对齐,<span class="hljs-built_in">&amp;</span>为对齐操作符<br><span class="hljs-built_in">&amp;</span>content1 <span class="hljs-keyword">\tag</span>&#123;1&#125; <span class="hljs-keyword">\\</span>  <span class="hljs-params">##</span>tag&#123;1&#125;可以标注序号1<br><span class="hljs-keyword">\\</span>  <span class="hljs-params">##</span>&quot;<span class="hljs-keyword">\\</span>&quot;可以换行<br><span class="hljs-built_in">&amp;</span> <span class="hljs-keyword">\quad</span> content2   <span class="hljs-params">##</span>quad 可以缩进<br><span class="hljs-keyword">\\</span><br><span class="hljs-built_in">&amp;</span> <span class="hljs-keyword">\boxed</span> &#123;f(x) = e<span class="hljs-built_in">^</span>g(x)&#125;  <span class="hljs-keyword">\\</span> <span class="hljs-params">##</span> <span class="hljs-keyword">\boxed</span> 命令可以表示公式框<br><br><span class="hljs-keyword">\end</span>&#123;align*&#125;<span class="hljs-params">##</span>结尾同样要用相同的操作符<br></code></pre></td></tr></table></figure><p>值得注意的是,写latex格式的时候建议仔细检查错误,避免出现一个&quot;}&quot;没了找半天错的尴尬情况</p>]]></content>
    
    
    
    <tags>
      
      <tag>math</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>code</title>
    <link href="/2023/11/23/code/"/>
    <url>/2023/11/23/code/</url>
    
    <content type="html"><![CDATA[<h2 id="七选五的C-Sharp版本">七选五的C-Sharp版本</h2><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><code class="hljs c#"><span class="hljs-keyword">using</span> RandomList.Core;<br><br><span class="hljs-keyword">namespace</span> <span class="hljs-title">learn</span><br>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Constants</span><br>    &#123;<br><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> List&lt;<span class="hljs-built_in">int</span>&gt; right = <span class="hljs-keyword">new</span> List&lt;<span class="hljs-built_in">int</span>&gt; &#123; <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span> &#125;;<br>        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> RandomList&lt;<span class="hljs-built_in">int</span>&gt; <span class="hljs-title">generate</span>()</span><br>        &#123;<br>            <span class="hljs-keyword">var</span> randomList = <span class="hljs-keyword">new</span> RandomList&lt;<span class="hljs-built_in">int</span>&gt; &#123; <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span> &#125;;<br>            randomList.Randomize();<br><br>            <span class="hljs-keyword">return</span> randomList;<br>        &#125;<br><br>        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> List&lt;<span class="hljs-built_in">int</span>&gt; <span class="hljs-title">RandomList_processed</span>()</span><br>        &#123;<br><br>            <span class="hljs-keyword">var</span> temp = generate();<br>            <span class="hljs-keyword">var</span> sample = <span class="hljs-keyword">new</span> List&lt;<span class="hljs-built_in">int</span>&gt;();<br><br>            <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++)<br>            &#123;<br>                <span class="hljs-built_in">int</span> element = temp[i];<br>                sample.Add(element);<br>            &#125;<br>            <span class="hljs-keyword">return</span> sample;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Compute</span><br>    &#123;<br><br><br>        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main_compute</span>()</span><br><br>        &#123;<br>            <span class="hljs-built_in">long</span> n = <span class="hljs-number">10000000</span>;<br>            <span class="hljs-built_in">int</span> b = <span class="hljs-number">0</span>;<br><br>            <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++)<br>            &#123;<br><br>                <span class="hljs-built_in">int</span> a = <span class="hljs-number">0</span>;<br><br>                <span class="hljs-keyword">var</span> standard = Constants.right;<br><br>                List&lt;<span class="hljs-built_in">int</span>&gt; random_sample = Constants.RandomList_processed();<br><br>                <span class="hljs-keyword">for</span> (<span class="hljs-built_in">int</span> j = <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">5</span>; j++)<br>                &#123;<br>                    <span class="hljs-built_in">int</span> right = standard[j];<br>                    <span class="hljs-built_in">int</span> test = random_sample[j];<br><br>                    <span class="hljs-keyword">if</span> (right  ==  test)<br>                    &#123;<br>                        a++;<br>                    &#125;<br><br>                &#125;<br>                <span class="hljs-keyword">if</span> (a == <span class="hljs-number">0</span>) &#123; b++; Console.WriteLine(b); &#125;<br>            &#125;<br><br>                <span class="hljs-built_in">double</span> resuslt = (<span class="hljs-built_in">double</span>)b / n;<br>                Console.WriteLine(resuslt);<br><br>            &#125;<br>        &#125;<br>    &#125;<br><br><br></code></pre></td></tr></table></figure><p>基础逻辑与之前的python版本没变，就翻译了一下。</p><p>学了一阵C#，最大的感受是C#很优雅，对数据的类型有严格的要求。各种编程语言的本质都一样，就是对数据的操作罢了。</p><h2 id="numpy-2048">numpy &amp; 2048</h2><p>numpy是python的一个用于数组操作的库</p><p>数组和矩阵差不多,或者是说矩阵就是一个数组</p><p>在numpy中,创建一个数组</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br>array_zero = np.zeros([<span class="hljs-number">4</span>,<span class="hljs-number">4</span>])<span class="hljs-comment"># 创建一个4*4的零数组</span><br><span class="hljs-built_in">print</span>(array)<br>显示   [ [<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>]<br>     [<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>]<br>     [<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>]<br>     [<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>]]<br>array_one = np.eye(<span class="hljs-number">4</span>) <span class="hljs-comment">#创建一个4维的单位矩阵</span><br><span class="hljs-built_in">print</span>(array_one)<br>显示   [ [<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>]<br>      [<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>]<br>[<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">0</span>]<br>       [<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>]]<br>new_arr = np.array([[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>],[<span class="hljs-number">2</span>,<span class="hljs-number">4</span>]]) <span class="hljs-comment">#也可以自己输入一个数组</span><br><span class="hljs-built_in">print</span>(new_arr)<br>显示   [[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>]<br>     [<span class="hljs-number">2</span>,<span class="hljs-number">4</span>]]<br><br></code></pre></td></tr></table></figure><p>有了数组,我们可以对它进行修改</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python">array_one[row][column] = value <span class="hljs-comment">#修改数组某行某列的值</span><br><br>array_one[:,column] = array_input <span class="hljs-comment">#修改一列的的值</span><br><br>array_one[row,:] = array_input1 <span class="hljs-comment">#修改某一列的值</span><br><br>harray = np.hsplit(array_one,<span class="hljs-number">4</span>) <span class="hljs-comment">#将array_one水平分割为4个数组</span><br><br>varray = np.vsplit(array_one,<span class="hljs-number">4</span>) <span class="hljs-comment">#垂直分割为4块</span><br><br>integrated_arr = np.concatenate(one_arr,another_arr) <span class="hljs-comment">#合并两个数组</span><br><br></code></pre></td></tr></table></figure><p>还可以读取数组中指定的元素,或者对元素进行操作</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python">arr = array_one[row][column] <span class="hljs-comment">#指定行和列</span><br><br>zero_elements = arr[arr == <span class="hljs-number">0</span>].flatten() <span class="hljs-comment">#将数组展平后读取为零的元素,也可以指定条件</span><br><br>iter_array = arr.flatten() <span class="hljs-comment">#展平数组,这样就可以对获得一维数组中的元素进行迭代</span><br><br>sorted_array = np.sort(iter_array) <span class="hljs-comment">#排序,这里有多个参数可填,参考官方的说明 </span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">(function) def sort(</span><br><span class="hljs-string">    a: _ArrayLike[_SCT@sort],</span><br><span class="hljs-string">    axis: SupportsIndex | None = ...,</span><br><span class="hljs-string">    kind: _SortKind | None = ...,</span><br><span class="hljs-string">    order: str | Sequence[str] | None = ...</span><br><span class="hljs-string">) -&gt; NDArray[_SCT@sort]</span><br><span class="hljs-string">Return a sorted copy of an array.</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br></code></pre></td></tr></table></figure><p>一些其他的操作</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">array  = np.rot90(arr, -<span class="hljs-number">1</span>) <span class="hljs-comment">#-1为逆时针旋转90度,-2就是180度了</span><br>array = np.rot90(arr, <span class="hljs-number">1</span>) <span class="hljs-comment">#1 为反方向转,这样就转回来了</span><br></code></pre></td></tr></table></figure><p>有了这些,就可以用numpy打造一个简单的2048了</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">import</span> random <span class="hljs-keyword">as</span> rd<br><span class="hljs-keyword">import</span> keyboard<br><span class="hljs-keyword">import</span> warnings<br><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">from</span> time <span class="hljs-keyword">import</span> sleep<br>warnings.filterwarnings(<span class="hljs-string">&#x27;ignore&#x27;</span>) <span class="hljs-comment"># 忽略numpy的警告</span><br><br><br><span class="hljs-keyword">global</span> game_array     <br>game_array = np.zeros([<span class="hljs-number">4</span>,<span class="hljs-number">4</span>])<br>fixed_number = [<span class="hljs-number">2</span>,<span class="hljs-number">4</span>]<br>random_list = [<span class="hljs-number">0</span>,<span class="hljs-number">1</span>]<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">basic_operate</span>(<span class="hljs-params">array</span>):    <span class="hljs-comment"># 默认向下</span><br>    <span class="hljs-comment">#获取按列分割的数组,并进行迭代</span><br>    process_array = np.hsplit(array,<span class="hljs-number">4</span>)<br>    collapse = np.zeros([<span class="hljs-number">4</span>,<span class="hljs-number">4</span>])<br>    <span class="hljs-comment">#print(process_array)    # OK</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> [<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>]:  <span class="hljs-comment"># i 为列标号</span><br>        <span class="hljs-comment">#进行零元排序,把0都放在左边</span><br>        arr = process_array[i]<br>        <span class="hljs-comment"># 将非零元素和零元素分别提取并排序</span><br>        non_zero_elements = arr[arr != <span class="hljs-number">0</span>].flatten()<br>        zero_elements = arr[arr == <span class="hljs-number">0</span>].flatten()<br><br>        <span class="hljs-comment"># 合并排序后的非零元素和零元素</span><br>        sorted_arr = np.concatenate((zero_elements, non_zero_elements))<br><br>        <span class="hljs-comment"># 将结果重新整形成原始数组的形状</span><br>        sorted_arr = sorted_arr.reshape(arr.shape)<br>        <br>        <br>        sub = sorted_arr<br>        a = sub[<span class="hljs-number">0</span>] == sub[<span class="hljs-number">1</span>]<br>        b = sub[<span class="hljs-number">1</span>] == sub[<span class="hljs-number">2</span>]<br>        c = sub[<span class="hljs-number">2</span>] == sub[<span class="hljs-number">3</span>]<br>        d = sub[<span class="hljs-number">0</span>] != sub[<span class="hljs-number">1</span>] <span class="hljs-keyword">and</span> sub[<span class="hljs-number">1</span>] != sub[<span class="hljs-number">2</span>] <span class="hljs-keyword">and</span> sub[<span class="hljs-number">2</span>] != sub [<span class="hljs-number">3</span>]<br>         <span class="hljs-comment"># 这里很有优化空间,我用的方法是枚举,更好的办法是从后往前迭代,从前往后赋值,这里懒得改了  </span><br>         <span class="hljs-comment"># 好的方法千篇一律,这里的也算创新吧</span><br>        <span class="hljs-keyword">if</span> a :<br>                <span class="hljs-keyword">if</span> a <span class="hljs-keyword">and</span> b <span class="hljs-keyword">and</span> c :  <span class="hljs-comment">#[2,2,2,2] -&gt; [0,0,4,4]</span><br>                    collapse[<span class="hljs-number">0</span>][i] = <span class="hljs-number">0</span><br>                    collapse[<span class="hljs-number">1</span>][i] = <span class="hljs-number">0</span><br>                    collapse[<span class="hljs-number">2</span>][i] = sub[<span class="hljs-number">0</span>] *<span class="hljs-number">2</span><br>                    collapse[<span class="hljs-number">3</span>][i] = sub[<span class="hljs-number">2</span>] *<span class="hljs-number">2</span><br>                    <br>                <span class="hljs-keyword">elif</span> a <span class="hljs-keyword">and</span> b :      <span class="hljs-comment">#[2,2,2,4] -&gt; [0,2,4,4]</span><br>                    collapse[<span class="hljs-number">0</span>][i] = <span class="hljs-number">0</span><br>                    collapse[<span class="hljs-number">1</span>][i] = sub[<span class="hljs-number">0</span>]<br>                    collapse[<span class="hljs-number">2</span>][i] = sub[<span class="hljs-number">1</span>] + sub[<span class="hljs-number">2</span>]<br>                    collapse[<span class="hljs-number">3</span>][i] = sub[<span class="hljs-number">3</span>]<br>    <br>                <span class="hljs-keyword">elif</span> a <span class="hljs-keyword">and</span> c :      <span class="hljs-comment">#[2,2,4,4] -&gt; [0,0,4,8]</span><br>                    collapse[<span class="hljs-number">0</span>][i] = <span class="hljs-number">0</span><br>                    collapse[<span class="hljs-number">1</span>][i] = <span class="hljs-number">0</span><br>                    collapse[<span class="hljs-number">2</span>][i] = sub[<span class="hljs-number">0</span>] + sub[<span class="hljs-number">1</span>]<br>                    collapse[<span class="hljs-number">3</span>][i] = sub[<span class="hljs-number">2</span>] + sub[<span class="hljs-number">3</span>]<br>                    <br>                <span class="hljs-keyword">else</span>:               <span class="hljs-comment">#[2,2,4,2] -&gt; [0,4,4,2]</span><br>                    collapse[<span class="hljs-number">0</span>][i] = <span class="hljs-number">0</span><br>                    collapse[<span class="hljs-number">1</span>][i] = sub[<span class="hljs-number">0</span>] *<span class="hljs-number">2</span><br>                    collapse[<span class="hljs-number">2</span>][i] = sub[<span class="hljs-number">2</span>]<br>                    collapse[<span class="hljs-number">3</span>][i] = sub[<span class="hljs-number">3</span>]<br>        <span class="hljs-keyword">if</span>  b :<br>                <br>                <span class="hljs-keyword">if</span> b <span class="hljs-keyword">and</span> c :        <span class="hljs-comment"># [4,2,2,2] -&gt; [0,4,2,4]</span><br>                    collapse[<span class="hljs-number">0</span>][i] = <span class="hljs-number">0</span><br>                    collapse[<span class="hljs-number">1</span>][i] = sub[<span class="hljs-number">0</span>]<br>                    collapse[<span class="hljs-number">2</span>][i] = sub[<span class="hljs-number">1</span>]<br>                    collapse[<span class="hljs-number">3</span>][i] = sub[<span class="hljs-number">2</span>] *<span class="hljs-number">2</span><br>                <br>                <span class="hljs-keyword">else</span>:               <span class="hljs-comment"># [4,2,2,4] -&gt; [0,4,4,4]</span><br>                    collapse[<span class="hljs-number">0</span>][i] = <span class="hljs-number">0</span><br>                    collapse[<span class="hljs-number">1</span>][i] = sub[<span class="hljs-number">0</span>]<br>                    collapse[<span class="hljs-number">2</span>][i] = sub[<span class="hljs-number">1</span>] *<span class="hljs-number">2</span><br>                    collapse[<span class="hljs-number">3</span>][i] = sub[<span class="hljs-number">3</span>]        <br>        <span class="hljs-keyword">if</span> c :                      <span class="hljs-comment">#[2,4,2,2] -&gt; [0,2,4,4]</span><br>                collapse[<span class="hljs-number">0</span>][i] = <span class="hljs-number">0</span><br>                collapse[<span class="hljs-number">1</span>][i] = sub[<span class="hljs-number">0</span>]<br>                collapse[<span class="hljs-number">2</span>][i] = sub[<span class="hljs-number">1</span>]<br>                collapse[<span class="hljs-number">3</span>][i] = sub[<span class="hljs-number">2</span>] *<span class="hljs-number">2</span><br>        <br>        <span class="hljs-keyword">if</span> d: <br>                collapse[<span class="hljs-number">0</span>][i] = sub[<span class="hljs-number">0</span>]<br>                collapse[<span class="hljs-number">1</span>][i] = sub[<span class="hljs-number">1</span>]<br>                collapse[<span class="hljs-number">2</span>][i] = sub[<span class="hljs-number">2</span>]<br>                collapse[<span class="hljs-number">3</span>][i] = sub[<span class="hljs-number">3</span>] <br>        <br>    display_array = collapse.astype(<span class="hljs-built_in">int</span>)    <span class="hljs-comment"># 转换为整型数组            # OK</span><br>    <span class="hljs-keyword">return</span> display_array<br>   <br><span class="hljs-keyword">def</span> <span class="hljs-title function_">down_operate</span>(<span class="hljs-params">arr</span>):<br>        display_array = basic_operate(arr)<br>        <span class="hljs-keyword">return</span> display_array<br><span class="hljs-comment"># 用旋转数组的方法,实现其他三个方向的操作                                               </span><br><span class="hljs-keyword">def</span>  <span class="hljs-title function_">right_operate</span>(<span class="hljs-params">arr</span>):<br>        array  = np.rot90(arr, -<span class="hljs-number">1</span>)<br>        a = basic_operate(array)<br>        display_array = np.rot90(a,<span class="hljs-number">1</span>)<br>        <span class="hljs-keyword">return</span> display_array                       <br>    <br><span class="hljs-keyword">def</span> <span class="hljs-title function_">up_operate</span>(<span class="hljs-params">arr</span>):<br>        array  = np.rot90(arr, -<span class="hljs-number">2</span>)<br>        a = basic_operate(array)<br>        display_array = np.rot90(a,<span class="hljs-number">2</span>)<br>        <span class="hljs-keyword">return</span> display_array<br>        <br><span class="hljs-keyword">def</span> <span class="hljs-title function_">left_operate</span>(<span class="hljs-params">arr</span>):<br>        array  = np.rot90(arr, -<span class="hljs-number">3</span>)<br>        a = basic_operate(array)<br>        display_array = np.rot90(a,<span class="hljs-number">3</span>)<br>        <span class="hljs-keyword">return</span> display_array<br>                     <br><span class="hljs-keyword">def</span> <span class="hljs-title function_">array_operate</span>(<span class="hljs-params">n</span>):<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>        postions_row = rd.randint(<span class="hljs-number">0</span>,<span class="hljs-number">3</span>)<br>        postions_column = rd.randint(<span class="hljs-number">0</span>,<span class="hljs-number">3</span>)<br>        <br>        value = rd.choice(fixed_number)<br>        game_array[postions_row][postions_column] = value<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">check_avilable_position</span>():<br>   <br>    <span class="hljs-keyword">global</span> avilable_positions_array<br>    avilable_positions_array = np.zeros([<span class="hljs-number">4</span>,<span class="hljs-number">4</span>]) <br>    avilable_positions_array = np.argwhere(game_array==<span class="hljs-number">0</span>)<br>    <br><span class="hljs-keyword">def</span> <span class="hljs-title function_">from_available_position_generate</span>():<br>    check_avilable_position()<br>    <span class="hljs-comment">##</span><br>    <span class="hljs-keyword">global</span> position<br>    shape = np.shape(avilable_positions_array)<br>    row_number = shape[<span class="hljs-number">0</span>] - <span class="hljs-number">1</span><br>    <span class="hljs-keyword">try</span>:<br>            <br>        position = rd.randint(<span class="hljs-number">0</span>,row_number)<br>        random_position_array = avilable_positions_array[position,:]<br>        value = rd.choice(fixed_number)<br>        game_array[random_position_array[<span class="hljs-number">0</span>]][random_position_array[<span class="hljs-number">1</span>]] = value<br><br>        v = <span class="hljs-literal">False</span><br>        <span class="hljs-keyword">return</span> v    <span class="hljs-comment">#简单检查游戏状态</span><br>          <br>    <span class="hljs-keyword">except</span> ValueError <span class="hljs-keyword">or</span> IndexError:<br>        <br>        v = <span class="hljs-literal">True</span><br>        <span class="hljs-keyword">return</span> v<br> <br> <span class="hljs-comment"># 这里是显示部分,GUI没做,用终端显示</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">clear_terminal</span>():<br>    os.system(<span class="hljs-string">&#x27;cls&#x27;</span> <span class="hljs-keyword">if</span> os.name == <span class="hljs-string">&#x27;nt&#x27;</span> <span class="hljs-keyword">else</span> <span class="hljs-string">&#x27;clear&#x27;</span>)<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">update_terminal</span>(<span class="hljs-params">v</span>):<br>    clear_terminal()<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;----------------&quot;</span>)<br>    <span class="hljs-keyword">for</span> i, row <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(game_array):<br>        <span class="hljs-comment"># 打印每一行的内容</span><br>        <span class="hljs-keyword">for</span> j, value <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(row):<br>            <span class="hljs-keyword">if</span> j &lt; <span class="hljs-built_in">len</span>(row) - <span class="hljs-number">1</span>:<br>                <span class="hljs-comment"># 打印数字，除了最后一列</span><br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot; <span class="hljs-subst">&#123;get_colored_char(value)&#125;</span> &quot;</span>, end=<span class="hljs-string">&quot;&quot;</span>)<br>            <span class="hljs-keyword">else</span>:<br><br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot; <span class="hljs-subst">&#123;get_colored_char(value)&#125;</span>&quot;</span>)<br>    <br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;----------------&quot;</span>)<br>    <span class="hljs-keyword">if</span> v : <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;no space warning ! maybe you have died,press q to exit &quot;</span>)<br>    <span class="hljs-keyword">else</span>: <span class="hljs-keyword">pass</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_colored_char</span>(<span class="hljs-params">value</span>):<br>    color = get_color(value)<br>    <span class="hljs-keyword">if</span> value != <span class="hljs-number">0</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">f&quot;\033[38;5;<span class="hljs-subst">&#123;color&#125;</span>m<span class="hljs-subst">&#123;value:<span class="hljs-number">2</span>&#125;</span>\033[0m&quot;</span><br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;  &quot;</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_color</span>(<span class="hljs-params">value</span>):<br>    <span class="hljs-comment"># 根据不同的数字返回不同的颜色代码</span><br>    <span class="hljs-keyword">if</span> value == <span class="hljs-number">2</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">214</span><br>    <span class="hljs-keyword">elif</span> value == <span class="hljs-number">4</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">220</span><br>    <span class="hljs-keyword">elif</span> value == <span class="hljs-number">8</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">226</span><br>    <span class="hljs-keyword">elif</span> value == <span class="hljs-number">16</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">202</span><br>    <span class="hljs-keyword">elif</span> value == <span class="hljs-number">32</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">196</span><br>    <span class="hljs-keyword">elif</span> value == <span class="hljs-number">64</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">160</span><br>    <span class="hljs-keyword">elif</span> value == <span class="hljs-number">128</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">126</span><br>    <span class="hljs-keyword">elif</span> value == <span class="hljs-number">256</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">82</span><br>    <span class="hljs-keyword">elif</span> value == <span class="hljs-number">512</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">46</span><br>    <span class="hljs-keyword">elif</span> value == <span class="hljs-number">1024</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">27</span><br>    <span class="hljs-keyword">elif</span> value == <span class="hljs-number">2048</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">21</span><br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">15</span>  <span class="hljs-comment"># 默认白色     玩到了4096再挑个颜色</span><br><br>    <br><span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():<br>    array_operate(<span class="hljs-number">2</span>)<br>    <span class="hljs-keyword">global</span> game_array<br>    t = <span class="hljs-literal">False</span><br>    update_terminal(t)<br>    condition = <span class="hljs-literal">True</span><br>    <span class="hljs-keyword">while</span> condition:<br><br>            <span class="hljs-keyword">if</span> keyboard.is_pressed(<span class="hljs-string">&quot;down&quot;</span>):   <span class="hljs-comment">#这里重复的函数太多,可以写一个函数再装一下</span><br>                game_array = down_operate(game_array)<br>                v = from_available_position_generate()<br>                update_terminal(v)<br>                sleep(<span class="hljs-number">0.43</span>)<br><br>            <span class="hljs-keyword">elif</span> keyboard.is_pressed(<span class="hljs-string">&quot;up&quot;</span>):<br>                game_array = up_operate(game_array)<br>                v = from_available_position_generate()<br>                update_terminal(v)<br>                sleep(<span class="hljs-number">0.43</span>)<br>            <span class="hljs-keyword">elif</span> keyboard.is_pressed(<span class="hljs-string">&quot;left&quot;</span>):<br>                game_array = left_operate(game_array)<br>                v = from_available_position_generate()<br>                update_terminal(v)    <br>                sleep(<span class="hljs-number">0.43</span>)<br>            <span class="hljs-keyword">elif</span> keyboard.is_pressed(<span class="hljs-string">&quot;right&quot;</span>):<br>                game_array = right_operate(game_array)<br>                v = from_available_position_generate()<br>                update_terminal(v)   <br>                sleep(<span class="hljs-number">0.43</span>)<br>            <span class="hljs-keyword">elif</span> keyboard.is_pressed(<span class="hljs-string">&quot;q&quot;</span>):<br>                <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Good game！&#x27;</span>)<br>                condition = <span class="hljs-literal">False</span><br><br>main()<br><br><br></code></pre></td></tr></table></figure><p>游戏的实现写的很粗糙,但终归还是能跑</p><h2 id="七选五全错的概率">七选五全错的概率</h2><p>七选五要求在7个备选答案中选出5个。</p><p>如果一个人随机选择,那么他一个都没撞对的概率是多少？</p><p>这是一个错位排列的问题，用数学方法计算十分繁琐，要求要对排列组合有很深的理解</p><p>用随机模拟的方法解决要简单一些</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> random <br><span class="hljs-comment"># 设置正确答案的值,随便设置一个列表</span><br>right_answer = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>]<br><span class="hljs-comment">#模拟次数</span><br>n = <span class="hljs-number">100000</span><br><span class="hljs-comment">#初始化全错的样本数</span><br>b = <span class="hljs-number">0</span> <br><span class="hljs-comment">#模拟n次</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>):<br>    <span class="hljs-comment">#生成随机选择答案的列表</span><br>    random_list = random.sample(<span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>,<span class="hljs-number">8</span>),<span class="hljs-number">5</span>)<br>    <span class="hljs-built_in">print</span>(i/n)<span class="hljs-comment">#显示模拟进度</span><br>    <span class="hljs-comment">## 开始判断答案是否为全错,逐个判断对应位置的答案是否正确</span><br>    a = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">for</span> t <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>,<span class="hljs-number">5</span>):<br>        <span class="hljs-keyword">if</span> random_list[t] == right_answer[t]:<br>            a += <span class="hljs-number">1</span><br>        <span class="hljs-keyword">else</span>: <span class="hljs-keyword">pass</span><br>    <span class="hljs-comment">#如果都不对,那就符合要求</span><br>    <span class="hljs-keyword">if</span> a == <span class="hljs-number">0</span>:<br>        b += <span class="hljs-number">1</span><br><span class="hljs-comment">#计算并显示结果</span><br>result = b/n<br><span class="hljs-built_in">print</span>(result)<br><span class="hljs-comment">#为0.4828548.....结果大致是对的，增加模拟次数便可提高精度</span><br><br><br></code></pre></td></tr></table></figure><p>这样就很快的算完了,不论是几选几,我们都能快速得到答案</p><h2 id="求数列极限">求数列极限</h2><p>这道题来自于一次考试，常规做法是两边夹逼</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>求</mtext><munder><mrow><mi>lim</mi><mo>⁡</mo></mrow><mrow><mi>n</mi><mo>→</mo><mi mathvariant="normal">∞</mi></mrow></munder><mfrac><mi>n</mi><mrow><msup><mi>n</mi><mn>3</mn></msup><mo>+</mo><mn>1</mn></mrow></mfrac><mo>+</mo><mfrac><mrow><mn>2</mn><mi>n</mi></mrow><mrow><msup><mi>n</mi><mn>3</mn></msup><mo>+</mo><msup><mn>2</mn><mn>2</mn></msup></mrow></mfrac><mo>+</mo><mfrac><mrow><mn>3</mn><mi>n</mi></mrow><mrow><msup><mi>n</mi><mn>3</mn></msup><mo>+</mo><msup><mn>3</mn><mn>2</mn></msup></mrow></mfrac><mo>+</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo>+</mo><mfrac><msup><mi>n</mi><mn>2</mn></msup><mrow><msup><mi>n</mi><mn>3</mn></msup><mo>+</mo><msup><mi>n</mi><mn>2</mn></msup></mrow></mfrac></mrow><annotation encoding="application/x-tex">求\lim_{n \to \infty} \dfrac{n}{n^3+1}+\dfrac{2n}{n^3+2^2}+\dfrac{3n}{n^3+3^2}+...+\dfrac{n^2}{n^3+n^2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.8769em;vertical-align:-0.7693em;"></span><span class="mord cjk_fallback">求</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6944em;"><span style="top:-2.4em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mrel mtight">→</span><span class="mord mtight">∞</span></span></span></span><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop">lim</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.7em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1076em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">1</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.7693em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:2.0908em;vertical-align:-0.7693em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span><span class="mord mathnormal">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.7693em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:2.0908em;vertical-align:-0.7693em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord">3</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">3</span><span class="mord mathnormal">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.7693em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord">...</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:2.2604em;vertical-align:-0.7693em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.4911em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.7693em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p><p>观察到每一项都可以写成</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mfrac><mrow><mi>n</mi><mi>x</mi></mrow><mrow><msup><mi>n</mi><mn>3</mn></msup><mo>+</mo><msup><mi>x</mi><mn>2</mn></msup></mrow></mfrac></mrow><annotation encoding="application/x-tex">\dfrac{nx}{n^3+x^2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.8769em;vertical-align:-0.7693em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1076em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">n</span><span class="mord mathnormal">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.7693em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p><p>那就可以硬算</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> math<br><span class="hljs-comment">#设置数列项数和初始值</span><br>n = <span class="hljs-number">100</span><br>init_value = <span class="hljs-number">0.0</span><br><br><span class="hljs-comment">#数列每一项的通项</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">Xn</span>(<span class="hljs-params">x</span>):<br>    <span class="hljs-keyword">return</span> (x*n)/(n**<span class="hljs-number">3</span>+x**<span class="hljs-number">2</span>)<br><br><span class="hljs-comment">#生成数列</span><br>sequences = (Xn(i) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span> (<span class="hljs-number">1</span>,n+<span class="hljs-number">1</span>) )<br><br><span class="hljs-comment">#使用fsum函数求和,fsum 函数可以减小浮点差</span><br>limit = math.fsum(sequences)<br><br><span class="hljs-comment">#打印结果,显示为0.5</span><br><span class="hljs-built_in">print</span>(limit)<br><br></code></pre></td></tr></table></figure><h2 id="学习通脚本">学习通脚本</h2><p>写了一个python脚本用于打开学习通网页，配合油猴脚本可以实现自动刷网课的功能</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs python"><br><span class="hljs-string">&quot;&quot;&quot;需要安装selenium模块及webdriver驱动&quot;&quot;&quot;</span><br><span class="hljs-keyword">from</span> time <span class="hljs-keyword">import</span> sleep<br><span class="hljs-keyword">from</span> selenium <span class="hljs-keyword">import</span> webdriver<br><br><span class="hljs-comment">#添加配置，使chrome保留数据打开</span><br>options = webdriver.ChromeOptions()<br><span class="hljs-comment">#</span><br>options.add_argument(<br>    <span class="hljs-string">r&quot;--user-data-dir=C:\Users\1\AppData\Local\Google\Chrome\User Data\Default&quot;</span><span class="hljs-comment">#这里需要填chrome的用户默认配置目录</span><br>)<br><span class="hljs-comment">#保持打开状态</span><br>options.add_experimental_option(<span class="hljs-string">&quot;detach&quot;</span>, <span class="hljs-literal">True</span>)<br><span class="hljs-comment"># 启动浏览器</span><br>browser = webdriver.Chrome(options=options)<br><span class="hljs-comment">#最大化窗口</span><br>browser.maximize_window()<br><span class="hljs-comment">#稍微等待</span><br>sleep(<span class="hljs-number">1</span>)<br><span class="hljs-comment">#输入网址</span><br>url = <span class="hljs-string">&quot;exampleURL&quot;</span><span class="hljs-comment">#输入网址</span><br>browser.get(url)<span class="hljs-comment"># 启动</span><br><br></code></pre></td></tr></table></figure><p>当然这段代码只能打开单个网址，没啥用<br>观察到脚本是用js写的，代码行数达到了惊人的13600行，附上脚本网址<br><a href="https://docs.ocsjs.com/">https://docs.ocsjs.com/</a></p>]]></content>
    
    
    
    <tags>
      
      <tag>code_learning</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>随笔</title>
    <link href="/2023/10/29/post/"/>
    <url>/2023/10/29/post/</url>
    
    <content type="html"><![CDATA[<p>人间忽晚，山河渐秋。</p>]]></content>
    
    
    
    <tags>
      
      <tag>life_record</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
